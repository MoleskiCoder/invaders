<!DOCTYPE html>
<!-- saved from url=(0064)http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>Space Invaders Code</title>
		
		
		<link rel="stylesheet" href="./Space Invaders Code_files/bootstrap.min.css">
		<link rel="stylesheet" href="./Space Invaders Code_files/bootstrap-theme.min.css">
		<link rel="stylesheet" href="./Space Invaders Code_files/ca.css">

		<script src="./Space Invaders Code_files/jquery-1.11.0.min.js.download"></script>
		<script src="./Space Invaders Code_files/bootstrap.min.js.download"></script>
		<script src="./Space Invaders Code_files/ca.js.download"></script>
		
		<!-- %%ADDITIONAL_HEAD%% -->
		
	</head>
	
	<body>
	
		<nav class="navbar navbar-fixed-top" role="navigation" style="background-color:#FFFFFF">
			<div class="container-fluid">        
        
				<img src="./Space Invaders Code_files/logo.png">  
				<img src="./Space Invaders Code_files/SpaceInvaders.jpg" height="90" style="PADDING-LEFT: 40px">          
        
				<ul class="nav navbar-nav navbar-right">
					<li><a href="http://www.computerarcheology.com/Contact/">Contact</a></li>            
					<li><a href="http://www.computerarcheology.com/Help/">Help</a></li>
				</ul>
          
				<ol id="crumbs" class="breadcrumb">		
				<li><a href="http://www.computerarcheology.com/">Home</a></li><li><a href="http://www.computerarcheology.com/Arcade/">Arcade</a></li><li><a href="http://www.computerarcheology.com/Arcade/SpaceInvaders/">Space Invaders</a></li><li class="active"><strong>Code</strong></li>			
				</ol>          
        
			</div>
		</nav>
	
		<div class="container-fluid">      
			<div class="row"> 
          
				<div class="col-md-2 sidebar">
					<ul class="nav nav-tabs" style="margin-bottom:16px;">
						<li id="siteTab" role="presentation" class="active" onclick="switchTab(&#39;site&#39;);"><a>Site</a></li>
						<li id="pageTab" role="presentation" onclick="switchTab(&#39;page&#39;);"><a>Page</a></li>
					</ul>
						
					<ul id="siteTree"><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/">Home</a><p></p></li><li class="sn1 collapsed"><a class="sna" href="http://www.computerarcheology.com/Amiga/">Amiga</a><ul hidden=""><li class="snn collapsed"><a class="sna" href="http://www.computerarcheology.com/Amiga/Rainbow/">Rainbow Islands</a><ul hidden=""><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Amiga/Rainbow/1loader_dec.html">1loader_dec</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Amiga/Rainbow/1loader.html">1loader</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Amiga/Rainbow/boot.html">boot</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Amiga/Rainbow/orig_boot.html">orig_boot</a></li></ul></li></ul></li><li class="sn1 collapsed expanded"><a class="sna" href="http://www.computerarcheology.com/Arcade/">Arcade</a><ul><li class="snn collapsed"><a class="sna" href="http://www.computerarcheology.com/Arcade/Asteroids/">Asteroids</a><ul hidden=""><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/Asteroids/RAMUse.html">RAM Use</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/Asteroids/Hardware.html">Hardware</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/Asteroids/Code.html">Code</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/Asteroids/VectorROM.html">Vector ROM</a></li><li class="snn"><hr style="margin: 4px;" align="left" width="50%"></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/Asteroids/DVG.html">DVG</a></li></ul></li><li class="snn collapsed"><a class="sna" href="http://www.computerarcheology.com/Arcade/Defender/">Defender</a><ul hidden=""><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/Defender/RAMUse.html">RAM Use</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/Defender/Hardware.html">Hardware</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/Defender/Bank1.html">Bank 1</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/Defender/Bank2.html">Bank 2</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/Defender/Bank3.html">Bank 3</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/Defender/Bank7.html">Bank 7</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/Defender/BankFixed.html">Fixed Bank</a></li><li class="snn"><hr style="margin: 4px;" align="left" width="50%"></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/Defender/SoundRAMUse.html">Sound RAM Use</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/Defender/SoundHardware.html">Sound Hardware</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/Defender/SoundCode.html">Sound Code</a></li></ul></li><li class="snn collapsed"><a class="sna" href="http://www.computerarcheology.com/Arcade/Frogger/">Frogger</a><ul hidden=""><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/Frogger/SoundRAMUse.html">Sound RAM Use</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/Frogger/SoundHardware.html">Sound Hardware</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/Frogger/SoundCode.html">Sound Code</a></li></ul></li><li class="snn collapsed"><a class="sna" href="http://www.computerarcheology.com/Arcade/Galaga/">Galaga</a><ul hidden=""><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/Galaga/CPU1.html">CPU1</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/Galaga/CPU2.html">CPU2</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/Galaga/CPU3.html">CPU3</a></li></ul></li><li class="snn collapsed"><a class="sna" href="http://www.computerarcheology.com/Arcade/MoonPatrol/">Moon Patrol</a><ul hidden=""><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/MoonPatrol/RAMUse.html">RAM Use</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/MoonPatrol/Hardware.html">Hardware</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/MoonPatrol/Code.html">Code</a></li><li class="snn"><hr style="margin: 4px;" align="left" width="50%"></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/MoonPatrol/SoundRAMUse.html">Sound RAM Use</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/MoonPatrol/SoundHardware.html">Sound Hardware</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/MoonPatrol/SoundCode.html">Sound Code</a></li><li class="snn"><hr style="margin: 4px;" align="left" width="50%"></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/MoonPatrol/GFX1.html">GFX1</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/MoonPatrol/GFX2.html">GFX2</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/MoonPatrol/GFX3.html">GFX3</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/MoonPatrol/GFX4.html">GFX4</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/MoonPatrol/GFX5.html">GFX5</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/MoonPatrol/ImageBackgroundColors.html">Background Colors</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/MoonPatrol/SpriteColors.html">Sprite Colors</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/MoonPatrol/SpriteColorSets.html">Sprite Color Sets</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/MoonPatrol/TextColors.html">Text Colors</a></li></ul></li><li class="snn collapsed"><a class="sna" href="http://www.computerarcheology.com/Arcade/OmegaRace/">Omega Race</a><ul hidden=""><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/OmegaRace/RAMUse.html">RAM Use</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/OmegaRace/Hardware.html">Hardware</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/OmegaRace/MainBoard.html">Main Board</a></li><li class="snn"><hr style="margin: 4px;" align="left" width="50%"></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/OmegaRace/VectorROM.html">Vector ROM</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/OmegaRace/DVGPROM.html">DVG PROM</a></li><li class="snn"><hr style="margin: 4px;" align="left" width="50%"></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/OmegaRace/SoundHardware.html">Sound Hardware</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/OmegaRace/SoundRAMUse.html">Sound RAM Use</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/OmegaRace/SoundBoard.html">Sound Code</a></li></ul></li><li class="snn collapsed"><a class="sna" href="http://www.computerarcheology.com/Arcade/Robotron/">Robotron</a><ul hidden=""><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/Robotron/SoundCode.html">Sound Code</a></li></ul></li><li class="snn collapsed expanded"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/">Space Invaders</a><ul><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html">RAM Use</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html">Hardware Info</a></li><li class="snn"><span class="sna"><strong>Code</strong></span></li><li class="snn"><hr style="margin: 4px;" align="left" width="50%"></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Chronology.html">Chronology</a></li></ul></li><li class="snn collapsed"><a class="sna" href="http://www.computerarcheology.com/Arcade/TimePilot/">Time Pilot</a><ul hidden=""><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/TimePilot/RAMUse.html">RAM Use</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/TimePilot/Hardware.html">Hardware Info</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/TimePilot/SoundCode.html">Sound Code</a></li></ul></li></ul></li><li class="sn1 collapsed"><a class="sna" href="http://www.computerarcheology.com/Atari2600/">Atari 2600</a><ul hidden=""><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Atari2600/Stella.html">Stella</a></li><li class="snn collapsed"><a class="sna" href="http://www.computerarcheology.com/Atari2600/Asteroids/">Asteroids</a><ul hidden=""><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Atari2600/Asteroids/RAMUse.html">RAM Use</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Atari2600/Asteroids/Code.html">Code</a></li></ul></li><li class="snn collapsed"><a class="sna" href="http://www.computerarcheology.com/Atari2600/BattleZone/">BattleZone</a><ul hidden=""><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Atari2600/BattleZone/RAMUse.html">RAM Use</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Atari2600/BattleZone/Code.html">Code</a></li></ul></li><li class="snn collapsed"><a class="sna" href="http://www.computerarcheology.com/Atari2600/Chess/">Chess</a><ul hidden=""><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Atari2600/Chess/RAMUse.html">RAM Use</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Atari2600/Chess/Code.html">Code</a></li></ul></li><li class="snn collapsed"><a class="sna" href="http://www.computerarcheology.com/Atari2600/Combat/">Combat</a><ul hidden=""><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Atari2600/Combat/RAMUse.html">RAM Use</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Atari2600/Combat/Code.html">Code</a></li></ul></li><li class="snn collapsed"><a class="sna" href="http://www.computerarcheology.com/Atari2600/DoubleGap/">Double Gap</a><ul hidden=""><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Atari2600/DoubleGap/Code.html">Code</a></li></ul></li><li class="snn collapsed"><a class="sna" href="http://www.computerarcheology.com/Atari2600/ET/">ET</a><ul hidden=""><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Atari2600/ET/RAMUse.html">RAM Use</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Atari2600/ET/Code.html">Code</a></li></ul></li><li class="snn collapsed"><a class="sna" href="http://www.computerarcheology.com/Atari2600/MissileCommand/">Missile Command</a><ul hidden=""><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Atari2600/MissileCommand/RAMUse.html">RAM Use</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Atari2600/MissileCommand/Code.html">Code</a></li></ul></li></ul></li><li class="sn1 collapsed"><a class="sna" href="http://www.computerarcheology.com/CoCo/">CoCo</a><ul hidden=""><li class="snn"><a class="sna" href="http://www.computerarcheology.com/CoCo/Hardware.html">Hardware</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/CoCo/EarlyWork/">My Early Work</a><ul hidden=""></ul></li><li class="snn collapsed"><a class="sna" href="http://www.computerarcheology.com/CoCo/MadnessMinotaur/">Madness &amp; Minotaur</a><ul hidden=""><li class="snn"><a class="sna" href="http://www.computerarcheology.com/CoCo/MadnessMinotaur/RAMUse.html">RAM Use</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/CoCo/MadnessMinotaur/Code.html">Code</a></li></ul></li><li class="snn collapsed"><a class="sna" href="http://www.computerarcheology.com/CoCo/Pyramid/">Pyramid</a><ul hidden=""><li class="snn"><a class="sna" href="http://www.computerarcheology.com/CoCo/Pyramid/RAMUse.html">RAM Use</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/CoCo/Pyramid/Code.html">Code</a></li></ul></li><li class="snn collapsed"><a class="sna" href="http://www.computerarcheology.com/CoCo/RaakaTu/">Raaka Tu</a><ul hidden=""><li class="snn"><a class="sna" href="http://www.computerarcheology.com/CoCo/RaakaTu/RAMUse.html">RAM Use</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/CoCo/RaakaTu/Code.html">Code</a></li></ul></li><li class="snn collapsed"><a class="sna" href="http://www.computerarcheology.com/CoCo/Bedlam/">Bedlam</a><ul hidden=""><li class="snn"><a class="sna" href="http://www.computerarcheology.com/CoCo/Bedlam/RAMUse.html">RAM Use</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/CoCo/Bedlam/Code.html">Code</a></li></ul></li><li class="snn collapsed"><a class="sna" href="http://www.computerarcheology.com/CoCo/Daggorath/">Daggorath</a><ul hidden=""><li class="snn"><a class="sna" href="http://www.computerarcheology.com/CoCo/Daggorath/levels.html">Level Maps</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/CoCo/Daggorath/RAMUse.html">RAM Use</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/CoCo/Daggorath/Code.html">Code</a></li></ul></li></ul></li><li class="sn1 collapsed"><a class="sna" href="http://www.computerarcheology.com/People/">People</a><ul hidden=""><li class="snn"><a class="sna" href="http://www.computerarcheology.com/People/ChrisCantrell.html">Chris Cantrell</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/People/HarryHurst.html">Harry Hurst</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/People/PatrikSevallius.html">Patrik Sevallius</a></li></ul></li><li class="sn1 collapsed"><a class="sna" href="http://www.computerarcheology.com/Gameboy/">Gameboy</a><ul hidden=""><li class="snn collapsed"><a class="sna" href="http://www.computerarcheology.com/Gameboy/Zelda/">Zelda</a><ul hidden=""><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Gameboy/Zelda/RAMUse.html">RAM Use</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Gameboy/Zelda/Hardware.html">Hardware Info</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Gameboy/Zelda/Bank00.html">Bank00</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Gameboy/Zelda/Bank01.html">Bank01</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Gameboy/Zelda/Bank02.html">Bank02</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Gameboy/Zelda/Bank03.html">Bank03</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Gameboy/Zelda/Bank04.html">Bank04</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Gameboy/Zelda/Bank05.html">Bank05</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Gameboy/Zelda/Bank06.html">Bank06</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Gameboy/Zelda/Bank07.html">Bank07</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Gameboy/Zelda/Bank08.html">Bank08</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Gameboy/Zelda/Bank09.html">Bank09</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Gameboy/Zelda/Bank0A.html">Bank0A</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Gameboy/Zelda/Bank0B.html">Bank0B</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Gameboy/Zelda/Bank0C.html">Bank0C</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Gameboy/Zelda/Bank0D.html">Bank0D</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Gameboy/Zelda/Bank0E.html">Bank0E</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Gameboy/Zelda/Bank0F.html">Bank0F</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Gameboy/Zelda/Bank10.html">Bank10</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Gameboy/Zelda/Bank11.html">Bank11</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Gameboy/Zelda/Bank12.html">Bank12</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Gameboy/Zelda/Bank13.html">Bank13</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Gameboy/Zelda/Bank14.html">Bank14</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Gameboy/Zelda/Bank15.html">Bank15</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Gameboy/Zelda/Bank16.html">Bank16</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Gameboy/Zelda/Bank17.html">Bank17</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Gameboy/Zelda/Bank18.html">Bank18</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Gameboy/Zelda/Bank19.html">Bank19</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Gameboy/Zelda/Bank1A.html">Bank1A</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Gameboy/Zelda/Bank1B.html">Bank1B</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Gameboy/Zelda/Bank1C.html">Bank1C</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Gameboy/Zelda/Bank1D.html">Bank1D</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Gameboy/Zelda/Bank1E.html">Bank1E</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Gameboy/Zelda/Bank1F.html">Bank1F</a></li></ul></li></ul></li><li class="sn1 collapsed"><a class="sna" href="http://www.computerarcheology.com/NES/">Nintendo NES</a><ul hidden=""><li class="snn collapsed"><a class="sna" href="http://www.computerarcheology.com/NES/Zelda/">Zelda</a><ul hidden=""><li class="snn"><a class="sna" href="http://www.computerarcheology.com/NES/Zelda/RAMUse.html">RAM Use</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/NES/Zelda/Hardware.html">Hardware Info</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/NES/Zelda/Bank0.html">Bank0</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/NES/Zelda/Bank1.html">Bank1</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/NES/Zelda/Bank2.html">Bank2</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/NES/Zelda/Bank3.html">Bank3</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/NES/Zelda/Bank4.html">Bank4</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/NES/Zelda/Bank5.html">Bank5</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/NES/Zelda/Bank6.html">Bank6</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/NES/Zelda/Bank7.html">Bank7</a></li></ul></li></ul></li><li class="sn1 collapsed"><a class="sna" href="http://www.computerarcheology.com/TRS80/">TRS80</a><ul hidden=""><li class="snn"><a class="sna" href="http://www.computerarcheology.com/TRS80/Hardware.html">Hardware</a></li><li class="snn collapsed"><a class="sna" href="http://www.computerarcheology.com/TRS80/HauntedHouse/">HauntedHouse</a><ul hidden=""><li class="snn"><a class="sna" href="http://www.computerarcheology.com/TRS80/HauntedHouse/Code1.html">Code1</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/TRS80/HauntedHouse/RAMUse1.html">RAM Use (1st)</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/TRS80/HauntedHouse/Code2.html">Code2</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/TRS80/HauntedHouse/RAMUse2.html">RAM Use (2nd)</a></li></ul></li><li class="snn collapsed"><a class="sna" href="http://www.computerarcheology.com/TRS80/Pyramid/">Pyramid</a><ul hidden=""><li class="snn"><a class="sna" href="http://www.computerarcheology.com/TRS80/Pyramid/RAMUse.html">RAM Use</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/TRS80/Pyramid/Code.html">Code</a></li></ul></li><li class="snn collapsed"><a class="sna" href="http://www.computerarcheology.com/TRS80/Xenos/">Xenos</a><ul hidden=""><li class="snn"><a class="sna" href="http://www.computerarcheology.com/TRS80/Xenos/RAMUse.html">RAM Use</a></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/TRS80/Xenos/Code.html">Code</a></li></ul></li></ul></li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Virus/">Viruses</a><ul hidden=""><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Virus/MorrisWorm/">Morris Worm</a><ul hidden=""></ul></li><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Virus/Stoned/">Stoned</a><ul hidden=""></ul></li></ul></li><li class="sn1 collapsed"><a class="sna" href="http://www.computerarcheology.com/Tools/">Tools</a><ul hidden=""><li class="snn"><a class="sna" href="http://www.computerarcheology.com/Tools/Blend/">Blend</a><ul hidden=""></ul></li></ul></li></ul>
		
					<ul id="pageTree" class="hidden">
						<li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#Reset">Reset</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ScanLine96">ScanLine96</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ScanLine224">ScanLine224</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#InitRack">InitRack</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawAlien">DrawAlien</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#CursorNextAlien">CursorNextAlien</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#GetAlienCoords">GetAlienCoords</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#MoveRefAlien">MoveRefAlien</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#InitAliens">InitAliens</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ReturnTwo">ReturnTwo</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawBottomLine">DrawBottomLine</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#AddDelta">AddDelta</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#CopyRAMMirror">CopyRAMMirror</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawShieldPl1">DrawShieldPl1</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawShieldPl2">DrawShieldPl2</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#RememberShields1">RememberShields1</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#RememberShields2">RememberShields2</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#RestoreShields2">RestoreShields2</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#RestoreShields1">RestoreShields1</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#CopyShields">CopyShields</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#RunGameObjs">RunGameObjs</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#GameObj0">GameObj0</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#MovePlayerRight">MovePlayerRight</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawPlayerDie">DrawPlayerDie</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#GameObj1">GameObj1</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#InitPlyShot">InitPlyShot</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#MovePlyShot">MovePlyShot</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ReadPlyShot">ReadPlyShot</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#EndOfBlowup">EndOfBlowup</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#GameObj2">GameObj2</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ResetShot">ResetShot</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#GameObj3">GameObj3</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ToShotStruct">ToShotStruct</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#FromShotStruct">FromShotStruct</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#HandleAlienShot">HandleAlienShot</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#FindInColumn">FindInColumn</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ShotBlowingUp">ShotBlowingUp</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#GameObj4">GameObj4</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#WaitForStart">WaitForStart</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#NewGame">NewGame</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#GetAlRefPtr">GetAlRefPtr</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PromptPlayer">PromptPlayer</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#GetShipsPerCred">GetShipsPerCred</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#SpeedShots">SpeedShots</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PrintMessage">PrintMessage</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawChar">DrawChar</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#TimeToSaucer">TimeToSaucer</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#AlienScoreValue">AlienScoreValue</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#AdjustScore">AdjustScore</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#Print4Digits">Print4Digits</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawHexByte">DrawHexByte</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ClearPlayField">ClearPlayField</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ScoreForAlien">ScoreForAlien</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#Animate">Animate</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PrintMessageDel">PrintMessageDel</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#SplashSquiggly">SplashSquiggly</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#OneSecDelay">OneSecDelay</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#TwoSecDelay">TwoSecDelay</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#SplashDemo">SplashDemo</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ISRSplTasks">ISRSplTasks</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#IniSplashAni">IniSplashAni</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#MessageCorp">MessageCorp</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DiagnosticsRoutine">Diagnostics Routine</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawShiftedSprite">DrawShiftedSprite</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#EraseSimpleSprite">EraseSimpleSprite</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawSimpSprite">DrawSimpSprite</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#EraseShifted">EraseShifted</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#CnvtPixNumber">CnvtPixNumber</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#RememberShields">RememberShields</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawSprCollision">DrawSprCollision</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ClearSmallSprite">ClearSmallSprite</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PlayerShotHit">PlayerShotHit</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#CodeBug1">CodeBug1</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#AExplodeTime">AExplodeTime</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#Cnt16s">Cnt16s</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#FindRow">FindRow</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#FindColumn">FindColumn</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#GetAlienStatPtr">GetAlienStatPtr</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#WrapRef">WrapRef</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#RackBump">RackBump</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawSprite">DrawSprite</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#CountAliens">CountAliens</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#GetPlayerDataPtr">GetPlayerDataPtr</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PlrFireOrDemo">PlrFireOrDemo</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#AShotReloadRate">AShotReloadRate</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ShotSound">ShotSound</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#TimeFleetSound">TimeFleetSound</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#FleetDelayExShip">FleetDelayExShip</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#SndOffExtPly">SndOffExtPly</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ReadInputs">ReadInputs</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#CheckHandleTilt">CheckHandleTilt</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#CtrlSaucerSound">CtrlSaucerSound</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawAdvTable">DrawAdvTable</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ReadPriStruct">ReadPriStruct</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#SplashSprite">SplashSprite</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#SoundBits3On">SoundBits3On</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#InitAliensP2">InitAliensP2</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PlyrShotAndBump">PlyrShotAndBump</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#CurPlyAlive">CurPlyAlive</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawScoreHead">DrawScoreHead</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawScore">DrawScore</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawNumCredits">DrawNumCredits</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PrintHiScore">PrintHiScore</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawStatus">DrawStatus</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#CheckHiddenMes">CheckHiddenMes</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#MessageTaito">MessageTaito</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#EnableGameTasks">EnableGameTasks</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DsableGameTasks">DsableGameTasks</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#SoundBits3Off">SoundBits3Off</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawNumShips">DrawNumShips</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#CompYToBeam">CompYToBeam</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#BlockCopy">BlockCopy</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ReadDesc">ReadDesc</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ConvToScr">ConvToScr</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ClearScreen">ClearScreen</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#RestoreShields">RestoreShields</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#RemoveShip">RemoveShip</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ShotReloadRate">ShotReloadRate</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#MessageGOver">MessageGOver</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#MessageB1or2">MessageB1or2</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#Message1Only">Message1Only</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#MessageScore">MessageScore</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#MesssageP1">MesssageP1</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#AlienSprCYA">AlienSprCYA</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#AlienSprCYB">AlienSprCYB</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#AlienSprA">AlienSprA</a>
<ul>
<li class="snn"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#AlienImages">Alien Images</a>

</li></ul>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#AlienSprB">AlienSprB</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PlayerSprite">PlayerSprite</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PlayerShotSpr">PlayerShotSpr</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ShotExploding">ShotExploding</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#Message10Pts">Message10Pts</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#MessageAdv">MessageAdv</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#AReloadScoreTab">AReloadScoreTab</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#MessageTilt">MessageTilt</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#AlienExplode">AlienExplode</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#AShotExplo">AShotExplo</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PlungerShot">PlungerShot</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#RollShot">RollShot</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#MessagePlayUY">MessagePlayUY</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ColFireTable">ColFireTable</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ShieldImage">ShieldImage</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#SaucerScrTab">SaucerScrTab</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#SpriteSaucer">SpriteSaucer</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#SpriteSaucerExp">SpriteSaucerExp</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#SaucSoreStr">SaucSoreStr</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#AlienScores">AlienScores</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#AlienStartTable">AlienStartTable</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#MessagePlayY">MessagePlayY</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#MessageInvaders">MessageInvaders</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#AlienScoreTable">AlienScoreTable</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#MessageMyst">MessageMyst</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#Message30Pts">Message30Pts</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#Message20Pts">Message20Pts</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#Characters">Characters</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#MessageP1or2">MessageP1or2</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#Message1Coin">Message1Coin</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DemoCommands">DemoCommands</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#AlienSprCA">AlienSprCA</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#MessageCoin">MessageCoin</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#CreditTable">CreditTable</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#MessageCredit">MessageCredit</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#AlienSprCB">AlienSprCB</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#Message2Coins">Message2Coins</a>

</li><li class="sn1"><a class="sna" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#MessagePush">MessagePush</a>


					</li></ul>		

				</div> <!-- End of sidebar -->		
								      
			    <div class="col-md-10 col-md-offset-2 main">
				    <h1 class="page-header siteTarget">Space Invaders Code</h1>

				    <p> 
</p><ul><li><a href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html">RAM Usage</a></li>
<li><a href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html">Hardware Info</a></li> 
</ul>
<p> 
<script src="./Space Invaders Code_files/SpaceInvaders.js.download"></script>
<script src="./Space Invaders Code_files/TileEngine.js.download"></script>
<script src="./Space Invaders Code_files/BinaryData.js.download"></script>
<script src="./Space Invaders Code_files/CANVAS.js.download"></script>

<!-- Cache some commonly-used values -->
<canvas width="0" height="0" data-canvasfunction="TileEngine.handleTileCanvas" data-labelcolor="" data-pixwidth="8" data-gridx="8" data-gridy="8" data-pixheight="8" data-gap="0.25" data-gridpad="1" data-colorsname="UNUSED" data-colors="[&quot;#808080&quot;,&quot;#0000C0&quot;]">
</canvas>
<canvas width="0" height="0" data-colorsname="CS0" data-colors="[&quot;#808080&quot;,&quot;#000080&quot;]">
</canvas>
</p><p> 
</p><pre class="codePreStyle">; It is never completely finished:
;  * TODO Look at the various versions of the ROMs and see what's different
;  * TODO Check all X/Y references and make !Xr/Yr or !Xn/Yn

; A word on coordinates. Sometimes the code is easier to understand in the context of the screen
; in standard (no rotated) position. The comments will refer to Xn (X not-rotated) and Yn. Sometimes
; the code is easier to understand in the context of the rotated screen. The comments will
; refer to Xr (X rotated) and Yr.

; Execution begins here on power-up and reset.

<span class="siteTarget" id="Reset">R</span>eset: 
0000: 00              NOP                         ; This provides a slot ...
0001: 00              NOP                         ; ... to put in a JP for ...
0002: 00              NOP                         ; ... development
0003: C3 D4 18        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#18D4" title="$18D4" target="_self">$18D4</a>               ;  Continue startup at 18D4
0006: 00 00  ; Padding before fixed ISR address

; Interrupt brings us here when the beam is *near* the middle of the screen. The real middle would be 224/2 = 112. The code pretends this interrupt happens at line 128.

<span class="siteTarget" id="ScanLine96">S</span>canLine96: 
0008: F5              PUSH    AF                  ; Save ...
0009: C5              PUSH    BC                  ; ... 
000A: D5              PUSH    DE                  ; ...
000B: E5              PUSH    HL                  ; ... everything
000C: C3 8C 00        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#008C" title="$008C" target="_self">$008C</a>               ;  Continue ISR at 8C
000F: 00     ; Padding before fixed ISR address

; Interrupt brings us here when the beam is at the end of the screen (line 224) when the VBLANK begins.

<span class="siteTarget" id="ScanLine224">S</span>canLine224: 
0010: F5              PUSH    AF                  ; Save ...
0011: C5              PUSH    BC                  ; ... 
0012: D5              PUSH    DE                  ; ...
0013: E5              PUSH    HL                  ; ... everything
0014: 3E 80           LD      A,$80               ; Flag that tells objects ...
0016: 32 72 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2072" title="$2072" target="TABLE_1">vblankStatus</a>),A    ; ... on the lower half of the screen to draw/move
0019: 21 C0 20        LD      HL,$20C0            ; Decrement ...
001C: 35              DEC     (HL)                ; ... the general countdown (used for pauses)
001D: CD CD 17        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#CheckHandleTilt" title="$17CD" target="_self">CheckHandleTilt</a>     ; Check and handle TILT
0020: DB 01           IN      A,(<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0001pr" title="$01" target="TABLE_2">INP1</a>)            ; Read coin switch
0022: 0F              RRCA                        ; Has a coin been deposited (bit 0)?
0023: DA 67 00        JP      C,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0067" title="$0067" target="_self">$0067</a>             ; Yes ... note that switch is closed and continue at 3F with A=1
0026: 3A EA 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20EA" title="$20EA" target="TABLE_1">coinSwitch</a>)      ; Switch is now open. Was it ...
0029: A7              AND     A                   ; ... closed last time?
002A: CA 42 00        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0042" title="$0042" target="_self">$0042</a>             ;  No ... skip registering the credit
;
; Handle bumping credit count
002D: 3A EB 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20EB" title="$20EB" target="TABLE_1">numCoins</a>)        ; Number of credits in BCD
0030: FE 99           CP      $99                 ; 99 credits already?
0032: CA 3E 00        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#003E" title="$003E" target="_self">$003E</a>             ; Yes ... ignore this (better than rolling over to 00)
0035: C6 01           ADD     A,$01               ; Bump number of credits
0037: 27              DAA                         ; Make it binary coded decimal
0038: 32 EB 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20EB" title="$20EB" target="TABLE_1">numCoins</a>),A        ; New number of credits
003B: CD 47 19        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawNumCredits" title="$1947" target="_self">DrawNumCredits</a>      ; Draw credits on screen
<span class="siteTarget" id="003E">0</span>03E: AF              XOR     A                   ; Credit switch ...
<span class="siteTarget" id="003F">0</span>03F: 32 EA 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20EA" title="$20EA" target="TABLE_1">coinSwitch</a>),A      ; ... has opened
;
<span class="siteTarget" id="0042">0</span>042: 3A E9 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20E9" title="$20E9" target="TABLE_1">suspendPlay</a>)     ; Are we moving ...
0045: A7              AND     A                   ; ... game objects?
0046: CA 82 00        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0082" title="$0082" target="_self">$0082</a>             ; No ... restore registers and out
0049: 3A EF 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20EF" title="$20EF" target="TABLE_1">gameMode</a>)        ; Are we in ...
004C: A7              AND     A                   ; ... game mode?
004D: C2 6F 00        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#006F" title="$006F" target="_self">$006F</a>            ; Yes ... go process game-play things and out
0050: 3A EB 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20EB" title="$20EB" target="TABLE_1">numCoins</a>)        ; Number of credits
0053: A7              AND     A                   ; Are there any credits (player standing there)?
0054: C2 5D 00        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#005D" title="$005D" target="_self">$005D</a>            ; Yes ... skip any ISR animations for the splash screens
0057: CD BF 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ISRSplTasks" title="$0ABF" target="_self">ISRSplTasks</a>         ; Process ISR tasks for splash screens
005A: C3 82 00        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0082" title="$0082" target="_self">$0082</a>               ; Restore registers and out
;
; At this point no game is going and there are credits
<span class="siteTarget" id="005D">0</span>05D: 3A 93 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2093" title="$2093" target="TABLE_1">waitStartLoop</a>)   ; Are we in the ...
0060: A7              AND     A                   ; ... "press start" loop?
0061: C2 82 00        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0082" title="$0082" target="_self">$0082</a>            ; Yes ... restore registers and out
0064: C3 65 07        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#WaitForStart" title="$0765" target="_self">WaitForStart</a>        ; Start the "press start" loop
;
; Mark credit as needing registering
<span class="siteTarget" id="0067">0</span>067: 3E 01           LD      A,$01               ; Remember switch ...
0069: 32 EA 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20EA" title="$20EA" target="TABLE_1">coinSwitch</a>),A      ; ... state for debounce
006C: C3 3F 00        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#003F" title="$003F" target="_self">$003F</a>               ; Continue
;
; Main game-play timing loop
<span class="siteTarget" id="006F">0</span>06F: CD 40 17        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#TimeFleetSound" title="$1740" target="_self">TimeFleetSound</a>      ; Time down fleet sound and sets flag if needs new delay value
<span class="siteTarget" id="0072">0</span>072: 3A 32 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2032" title="$2032" target="TABLE_1">obj2TimerExtra</a>)  ; Use rolling shot's timer to sync ...
0075: 32 80 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2080" title="$2080" target="TABLE_1">shotSync</a>),A        ; ... other two shots
0078: CD 00 01        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawAlien" title="$0100" target="_self">DrawAlien</a>           ; Draw the current alien (or exploding alien)
007B: CD 48 02        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#RunGameObjs" title="$0248" target="_self">RunGameObjs</a>         ; Process game objects (including player object)
007E: CD 13 09        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#TimeToSaucer" title="$0913" target="_self">TimeToSaucer</a>        ; Count down time to saucer
0081: 00              NOP                         ; ** Why are we waiting?
;
<span class="siteTarget" id="0082">0</span>082: E1              POP     HL                  ; Restore ...
0083: D1              POP     DE                  ; ... 
0084: C1              POP     BC                  ; ...
0085: F1              POP     AF                  ; ... everything
0086: FB              EI                          ; Enable interrupts
0087: C9              RET                         ; Return from interrupt

0088: 00 00 00 00 ; ** Why waste the space?       

; Continues here at scanline 96
;
<span class="siteTarget" id="008C">0</span>08C: AF              XOR     A                   ; Flag that tells ...
008D: 32 72 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2072" title="$2072" target="TABLE_1">vblankStatus</a>),A    ; ... objects on the upper half of screen to draw/move
0090: 3A E9 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20E9" title="$20E9" target="TABLE_1">suspendPlay</a>)     ; Are we moving ...
0093: A7              AND     A                   ; ... game objects?
0094: CA 82 00        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0082" title="$0082" target="_self">$0082</a>             ; No ... restore and return
0097: 3A EF 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20EF" title="$20EF" target="TABLE_1">gameMode</a>)        ; Are we in ...
009A: A7              AND     A                   ; ... game mode?
009B: C2 A5 00        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#00A5" title="$00A5" target="_self">$00A5</a>            ; Yes .... process game objects and out
009E: 3A C1 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20C1" title="$20C1" target="TABLE_1">isrSplashTask</a>)   ; Splash-animation tasks
00A1: 0F              RRCA                        ; If we are in demo-mode then we'll process the tasks anyway
00A2: D2 82 00        JP      NC,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0082" title="$0082" target="_self">$0082</a>            ; Not in demo mode ... done
;
<span class="siteTarget" id="00A5">0</span>0A5: 21 20 20        LD      HL,$2020            ; Game object table (skip player-object at 2010)
00A8: CD 4B 02        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#024B" title="$024B" target="_self">$024B</a>               ; Process all game objects (except player object)
00AB: CD 41 01        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#CursorNextAlien" title="$0141" target="_self">CursorNextAlien</a>     ; Advance cursor to next alien (move the alien if it is last one)
00AE: C3 82 00        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0082" title="$0082" target="_self">$0082</a>               ; Restore and return

<span class="siteTarget" id="InitRack">I</span>nitRack: 
; Initialize the player's rack of aliens. Copy the reference-location and deltas from the
; player's data bank.
;
00B1: CD 86 08        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#GetAlRefPtr" title="$0886" target="_self">GetAlRefPtr</a>         ; 2xFC Get current player's ref-alien position pointer
00B4: E5              PUSH    HL                  ; Hold pointer
00B5: 7E              LD      A,(HL)              ; Get player's ...
00B6: 23              INC     HL                  ; ... ref-alien ...
00B7: 66              LD      H,(HL)              ; ... 
00B8: 6F              LD      L,A                 ; ... coordinates
00B9: 22 09 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2009" title="$2009" target="TABLE_1">refAlienYr</a>),HL     ; Set game's reference alien's X,Y
00BC: 22 0B 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#200B" title="$200B" target="TABLE_1">alienPosLSB</a>),HL    ; Set game's alien cursor bit position
00BF: E1              POP     HL                  ; Restore pointer
00C0: 2B              DEC     HL                  ; 21FB or 22FB ref alien's delta (left or right)
00C1: 7E              LD      A,(HL)              ; Get ref alien's delta X
00C2: FE 03           CP      $03                 ; If there is one alien it will move right at 3
00C4: C2 C8 00        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#00C8" title="$00C8" target="_self">$00C8</a>            ; Not 3 ... keep it
00C7: 3D              DEC     A                   ; If it is 3, back it down to 2 until it switches again
<span class="siteTarget" id="00C8">0</span>0C8: 32 08 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2008" title="$2008" target="TABLE_1">refAlienDXr</a>),A     ; Store alien deltaY
00CB: FE FE           CP      $FE                 ; Moving left?
00CD: 3E 00           LD      A,$00               ; Value of 0 for rack-moving-right (not XOR so flags are unaffected)
00CF: C2 D3 00        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#00D3" title="$00D3" target="_self">$00D3</a>            ; Not FE ... keep the value 0 for right
00D2: 3C              INC     A                   ; It IS FE ... use 1 for left
<span class="siteTarget" id="00D3">0</span>0D3: 32 0D 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#200D" title="$200D" target="TABLE_1">rackDirection</a>),A   ; Store rack direction
00D6: C9              RET                         ; Done

<span class="siteTarget" id="00D7">0</span>0D7: 3E 02           LD      A,$02               ; Set ...
00D9: 32 FB 21        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#21FB" title="$21FB" target="TABLE_1">p1RefAlienDX</a>),A    ; ... player 1 and 2 ...
00DC: 32 FB 22        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#22FB" title="$22FB" target="TABLE_1">p2RefAlienDX</a>),A    ; ... alien delta to 2 (right 2 pixels)
00DF: C3 E4 08        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#08E4" title="$08E4" target="_self">$08E4</a>                ;

00E2: 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00F0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
;
; This is heavily patched from a previous version of the code. There was a test here to jump to a
; self-test routine on startup (based on a dip switch). Even the original code padded with zeros
; to make the next function begin at 0100. Room for expansion?

<span class="siteTarget" id="DrawAlien">D</span>rawAlien: 
; 2006 holds the index into the alien flag data grid. 2067 holds the MSB of the pointer (21xx or 22xx).
; If there is an alien exploding time it down. Otherwise draw the alien if it alive (or skip if
; it isn't). If an alien is drawn (or blank) then the 2000 alien-drawing flag is cleared.
;
0100: 21 02 20        LD      HL,$2002            ; Is there an ... 
0103: 7E              LD      A,(HL)              ; ... alien ...
0104: A7              AND     A                   ; ... exploding?
0105: C2 38 15        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#AExplodeTime" title="$1538" target="_self">AExplodeTime</a>     ; Yes ... go time it down and out
;
0108: E5              PUSH    HL                  ; 2002 on the stack
0109: 3A 06 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2006" title="$2006" target="TABLE_1">alienCurIndex</a>)   ; Get alien index ...
010C: 6F              LD      L,A                 ; ... for the 21xx or 22xx pointer
010D: 3A 67 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2067" title="$2067" target="TABLE_1">playerDataMSB</a>)   ; Get MSB ...
0110: 67              LD      H,A                 ; ... of data area (21xx or 22xx)
0111: 7E              LD      A,(HL)              ; Get alien status flag
0112: A7              AND     A                   ; Is the alien alive?
0113: E1              POP     HL                  ; HL=2002
0114: CA 36 01        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0136" title="$0136" target="_self">$0136</a>             ; No alien ... skip drawing alien sprite (but flag done)
0117: 23              INC     HL                  ; HL=2003 Bump descriptor
0118: 23              INC     HL                  ; HL=2004 Point to alien's row
0119: 7E              LD      A,(HL)              ; Get alien type
011A: 23              INC     HL                  ; HL=2005 Bump descriptor
011B: 46              LD      B,(HL)              ; Get animation number
011C: E6 FE           AND     $FE                 ; Translate row to type offset as follows: ...
011E: 07              RLCA                        ; ... 0,1 -&gt; 32 (type 1) ...
011F: 07              RLCA                        ; ... 2,3 -&gt; 16 (type 2) ...
0120: 07              RLCA                        ; ...   4 -&gt; 32 (type 3) on top row
0121: 5F              LD      E,A                 ; Sprite offset LSB
0122: 16 00           LD      D,$00               ; MSB is 0
0124: 21 00 1C        LD      HL,$1C00            ; Position 0 alien sprites
0127: 19              ADD     HL,DE               ; Offset to sprite type
0128: EB              EX      DE,HL               ; Sprite offset to DE
0129: 78              LD      A,B                 ; Animation frame number
012A: A7              AND     A                   ; Is it position 0?
012B: C4 3B 01        CALL    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#013B" title="$013B" target="_self">$013B</a>            ; No ... add 30 and use position 1 alien sprites
012E: 2A 0B 20        LD      HL,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#200B" title="$200B" target="TABLE_1">alienPosLSB</a>)    ; Pixel position
0131: 06 10           LD      B,$10               ; 16 rows in alien sprites
0133: CD D3 15        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawSprite" title="$15D3" target="_self">DrawSprite</a>          ; Draw shifted sprite
;
<span class="siteTarget" id="0136">0</span>136: AF              XOR     A                   ; Let the ISR routine ...
0137: 32 00 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2000" title="$2000" target="TABLE_1">waitOnDraw</a>),A      ; ... advance the cursor to the next alien
013A: C9              RET                         ; Out
;
<span class="siteTarget" id="013B">0</span>13B: 21 30 00        LD      HL,$0030            ; Offset sprite pointer ...
013E: 19              ADD     HL,DE               ; ... to animation frame 1 sprites
013F: EB              EX      DE,HL               ; Back to DE
0140: C9              RET                         ; Out

<span class="siteTarget" id="CursorNextAlien">C</span>ursorNextAlien: 
; This is called from the mid-screen ISR to set the cursor for the next alien to draw. 
; When the cursor moves over all aliens then it is reset to the beginning and the reference 
; alien is moved to its next position.
;
; The flag at 2000 keeps this in sync with the alien-draw routine called from the end-screen ISR. 
; When the cursor is moved here then the flag at 2000 is set to 1. This routine will not change 
; the cursor until the alien-draw routine at 100 clears the flag. Thus no alien is skipped.
;
0141: 3A 68 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2068" title="$2068" target="TABLE_1">playerOK</a>)        ; Is the player ...
0144: A7              AND     A                   ; ... blowing up?
0145: C8              RET     Z                   ; Yes ... ignore the aliens
0146: 3A 00 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2000" title="$2000" target="TABLE_1">waitOnDraw</a>)      ; Still waiting on ...
0149: A7              AND     A                   ; ... this alien to be drawn?
014A: C0              RET     NZ                  ; Yes ... leave cursor in place
014B: 3A 67 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2067" title="$2067" target="TABLE_1">playerDataMSB</a>)   ; Load alien-data ...
014E: 67              LD      H,A                 ; ... MSB (either 21xx or 22xx)
014F: 3A 06 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2006" title="$2006" target="TABLE_1">alienCurIndex</a>)   ; Load the xx part of the alien flag pointer
0152: 16 02           LD      D,$02               ; When all are gone this triggers 1A1 to return from this stack frame
<span class="siteTarget" id="0154">0</span>154: 3C              INC     A                   ; Have we drawn all aliens ...
0155: FE 37           CP      $37                 ; ... at last position? 
0157: CC A1 01        CALL    Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#MoveRefAlien" title="$01A1" target="_self">MoveRefAlien</a>      ; Yes ... move the bottom/right alien and reset index to 0
015A: 6F              LD      L,A                 ; HL now points to alien flag
015B: 46              LD      B,(HL)              ; Is alien ...
015C: 05              DEC     B                   ; ... alive?
015D: C2 54 01        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0154" title="$0154" target="_self">$0154</a>            ; No ... skip to next alien
0160: 32 06 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2006" title="$2006" target="TABLE_1">alienCurIndex</a>),A   ; New alien index
0163: CD 7A 01        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#GetAlienCoords" title="$017A" target="_self">GetAlienCoords</a>      ; Calculate bit position and type for index
0166: 61              LD      H,C                 ; The calculation returns the MSB in C
0167: 22 0B 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#200B" title="$200B" target="TABLE_1">alienPosLSB</a>),HL    ; Store new bit position
016A: 7D              LD      A,L                 ; Has this alien ...
016B: FE 28           CP      $28                 ; ... reached the end of screen?
016D: DA 71 19        JP      C,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1971" title="$1971" target="_self">$1971</a>             ; Yes ... kill the player
0170: 7A              LD      A,D                 ; This alien's ...
0171: 32 04 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2004" title="$2004" target="TABLE_1">alienRow</a>),A        ; ... row index
0174: 3E 01           LD      A,$01               ; Set the wait-flag for the ...
0176: 32 00 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2000" title="$2000" target="TABLE_1">waitOnDraw</a>),A      ; ... draw-alien routine to clear
0179: C9              RET                         ; Done

<span class="siteTarget" id="GetAlienCoords">G</span>etAlienCoords: 
; Convert alien index in L to screen bit position in C,L.
; Return alien row index (converts to type) in D.
; 
017A: 16 00           LD      D,$00               ; Row 0
017C: 7D              LD      A,L                 ; Hold onto alien index
017D: 21 09 20        LD      HL,$2009            ; Get alien X ...
0180: 46              LD      B,(HL)              ; ... to B
0181: 23              INC     HL                  ; Get alien y ...
0182: 4E              LD      C,(HL)              ; ... to C
<span class="siteTarget" id="0183">0</span>183: FE 0B           CP      $0B                 ; Can we take a full row off of index?
0185: FA 94 01        JP      M,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0194" title="$0194" target="_self">$0194</a>             ; No ... we have the row
0188: DE 0B           SBC     A,$0B               ; Subtract off 11 (one whole row)
018A: 5F              LD      E,A                 ; Hold the new index
018B: 78              LD      A,B                 ; Add ...
018C: C6 10           ADD     A,$10               ; ... 16 to bit ...
018E: 47              LD      B,A                 ; ... position Y (1 row in rack)
018F: 7B              LD      A,E                 ; Restore tallied index
0190: 14              INC     D                   ; Next row
0191: C3 83 01        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0183" title="$0183" target="_self">$0183</a>               ; Keep skipping whole rows
;
<span class="siteTarget" id="0194">0</span>194: 68              LD      L,B                 ; We have the LSB (the row)
<span class="siteTarget" id="0195">0</span>195: A7              AND     A                   ; Are we in the right column?
0196: C8              RET     Z                   ; Yes ... X and Y are right
0197: 5F              LD      E,A                 ; Hold index
0198: 79              LD      A,C                 ; Add ...
0199: C6 10           ADD     A,$10               ; ... 16 to bit ...
019B: 4F              LD      C,A                 ; ... position X (1 column in rack)
019C: 7B              LD      A,E                 ; Restore index
019D: 3D              DEC     A                   ; We adjusted for 1 column
019E: C3 95 01        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0195" title="$0195" target="_self">$0195</a>               ; Keep moving over column


<span class="siteTarget" id="MoveRefAlien">M</span>oveRefAlien: 
; The "reference alien" is the bottom left. All other aliens are drawn relative to this
; reference. This routine moves the reference alien (the delta is set elsewhere) and toggles
; the animation frame number between 0 and 1.
;
01A1: 15              DEC     D                   ; This decrements with each call to move
01A2: CA CD 01        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ReturnTwo" title="$01CD" target="_self">ReturnTwo</a>         ; Return out of TWO call frames (only used if no aliens left)
01A5: 21 06 20        LD      HL,$2006            ; Set current alien ...
01A8: 36 00           LD      (HL),$00            ; ... index to 0
01AA: 23              INC     HL                  ; Point to DeltaX
01AB: 4E              LD      C,(HL)              ; Load DX into C
01AC: 36 00           LD      (HL),$00            ; Set DX to 0
01AE: CD D9 01        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#AddDelta" title="$01D9" target="_self">AddDelta</a>            ; Move alien
01B1: 21 05 20        LD      HL,$2005            ; Alien animation frame number
01B4: 7E              LD      A,(HL)              ; Toggle ...
01B5: 3C              INC     A                   ; ... animation ...
01B6: E6 01           AND     $01                 ; ... number between ...
01B8: 77              LD      (HL),A              ; ... 0 and 1
01B9: AF              XOR     A                   ; Alien index in A is now 0
01BA: 21 67 20        LD      HL,$2067            ; Restore H ...
01BD: 66              LD      H,(HL)              ; ... to player data MSB (21 or 22)
01BE: C9              RET                         ; Done

01BF: 00 ; ** Why?

<span class="siteTarget" id="InitAliens">I</span>nitAliens: 
; Initialize the 55 aliens from last to 1st. 1 means alive.
;
01C0: 21 00 21        LD      HL,$2100            ; Start of alien structures (this is the last alien)
<span class="siteTarget" id="01C3">0</span>1C3: 06 37           LD      B,$37               ; Count to 55 (that's five rows of 11 aliens)
<span class="siteTarget" id="01C5">0</span>1C5: 36 01           LD      (HL),$01            ; Bring alien to live
01C7: 23              INC     HL                  ; Next alien
01C8: 05              DEC     B                   ; All done?
01C9: C2 C5 01        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#01C5" title="$01C5" target="_self">$01C5</a>            ; No ... keep looping
01CC: C9              RET                         ; Done

<span class="siteTarget" id="ReturnTwo">R</span>eturnTwo: 
; If there are no aliens left on the screen then MoveDrawAlien comes here which returns from the
; caller's stack frame.
;
01CD: E1              POP     HL                  ; Drop return to caller
01CE: C9              RET                         ; Return to caller's caller

<span class="siteTarget" id="DrawBottomLine">D</span>rawBottomLine: 
; Draw a 1px line across the player's stash at the bottom of the screen.
;
01CF: 3E 01           LD      A,$01               ; Bit 1 set ... going to draw a 1-pixel stripe down left side
01D1: 06 E0           LD      B,$E0               ; All the way down the screen
01D3: 21 02 24        LD      HL,$2402            ; Screen coordinates (3rd byte from upper left)
01D6: C3 CC 14        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#14CC" title="$14CC" target="_self">$14CC</a>               ; Draw line down left side 

<span class="siteTarget" id="AddDelta">A</span>ddDelta: 
; HL points to descriptor: DX DY XX YY except DX is already loaded in C
; ** Why the "already loaded" part? Why not just load it here?
;
01D9: 23              INC     HL                  ; We loaded delta-x already ... skip over it
01DA: 46              LD      B,(HL)              ; Get delta-y
01DB: 23              INC     HL                  ; Skip over it
01DC: 79              LD      A,C                 ; Add delta-x ...
01DD: 86              ADD     A,(HL)              ; ... to x
01DE: 77              LD      (HL),A              ; Store new x
01DF: 23              INC     HL                  ; Skip to y
01E0: 78              LD      A,B                 ; Add delta-y ...
01E1: 86              ADD     A,(HL)              ; ... to y
01E2: 77              LD      (HL),A              ; Store new y
01E3: C9              RET                         ; Done

<span class="siteTarget" id="CopyRAMMirror">C</span>opyRAMMirror: 
; Block copy ROM mirror 1B00-1BBF to initialize RAM at 2000-20BF.
; 
01E4: 06 C0           LD      B,$C0               ; Number of bytes
<span class="siteTarget" id="01E6">0</span>1E6: 11 00 1B        LD      DE,$1B00            ; RAM mirror in ROM
01E9: 21 00 20        LD      HL,$2000            ; Start of RAM
01EC: C3 32 1A        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#BlockCopy" title="$1A32" target="_self">BlockCopy</a>           ; Copy [DE]-&gt;[HL] and return



<span class="siteTarget" id="DrawShieldPl1">D</span>rawShieldPl1: 
; Draw the shields for player 1 (draws it in the buffer in the player's data area).
;
01EF: 21 42 21        LD      HL,$2142            ; Player 1 shield buffer (remember between games in multi-player)
01F2: C3 F8 01        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#01F8" title="$01F8" target="_self">$01F8</a>               ; Common draw point
;
<span class="siteTarget" id="DrawShieldPl2">D</span>rawShieldPl2: 
; Draw the shields for player 1 (draws it in the buffer in the player's data area).
;
01F5: 21 42 22        LD      HL,$2242            ; Player 2 shield buffer (remember between games in multi-player)
;
<span class="siteTarget" id="01F8">0</span>1F8: 0E 04           LD      C,$04               ; Going to draw 4 shields
01FA: 11 20 1D        LD      DE,$1D20            ; Shield pixel pattern       
<span class="siteTarget" id="01FD">0</span>1FD: D5              PUSH    DE                  ; Hold the start for the next shield
01FE: 06 2C           LD      B,$2C               ; 44 bytes to copy
0200: CD 32 1A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#BlockCopy" title="$1A32" target="_self">BlockCopy</a>           ; Block copy DE to HL (B bytes)
0203: D1              POP     DE                  ; Restore start of shield pattern
0204: 0D              DEC     C                   ; Drawn all shields?
0205: C2 FD 01        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#01FD" title="$01FD" target="_self">$01FD</a>            ; No ... go draw them all
0208: C9              RET                         ; Done

<span class="siteTarget" id="RememberShields1">R</span>ememberShields1: 
; Copy shields on the screen to player 1's data area.
;
0209: 3E 01           LD      A,$01               ; Not zero means remember
020B: C3 1B 02        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#021B" title="$021B" target="_self">$021B</a>               ; Shuffle-shields player 1

<span class="siteTarget" id="RememberShields2">R</span>ememberShields2: 
; Copy shields on the screen to player 2's data area.
;
020E: 3E 01           LD      A,$01               ; Not zero means remember
0210: C3 14 02        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0214" title="$0214" target="_self">$0214</a>               ; Shuffle-shields player 2

<span class="siteTarget" id="RestoreShields2">R</span>estoreShields2: 
; Copy shields from player 2's data area to screen.
;
0213: AF              XOR     A                   ; Zero means restore
<span class="siteTarget" id="0214">0</span>214: 11 42 22        LD      DE,$2242            ; Player 2 shield buffer (remember between games in multi-player)
0217: C3 1E 02        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#CopyShields" title="$021E" target="_self">CopyShields</a>         ; Shuffle-shields player 2

<span class="siteTarget" id="RestoreShields1">R</span>estoreShields1: 
; Copy shields from player 1's data area to screen.
;
021A: AF              XOR     A                   ; Zero means restore
<span class="siteTarget" id="021B">0</span>21B: 11 42 21        LD      DE,$2142            ; Player 1 shield buffer (remember between games in multi-player)

<span class="siteTarget" id="CopyShields">C</span>opyShields: 
; A is 1 for screen-to-buffer, 0 for to buffer-to-screen
; HL is screen coordinates of first shield. There are 23 rows between shields.
; DE is sprite buffer in memory.
;
021E: 32 81 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2081" title="$2081" target="TABLE_1">tmp2081</a>),A         ; Remember copy/restore flag
0221: 01 02 16        LD      BC,$1602            ; 22 rows, 2 bytes/row (for 1 shield pattern)
0224: 21 06 28        LD      HL,$2806            ; Screen coordinates
0227: 3E 04           LD      A,$04               ; Four shields to move
<span class="siteTarget" id="0229">0</span>229: F5              PUSH    AF                  ; Hold shield count
022A: C5              PUSH    BC                  ; Hold sprite-size
022B: 3A 81 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2081" title="$2081" target="TABLE_1">tmp2081</a>)         ; Get back copy/restore flag
022E: A7              AND     A                   ; Not zero ...
022F: C2 42 02        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0242" title="$0242" target="_self">$0242</a>            ; ... means remember shidles
0232: CD 69 1A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#RestoreShields" title="$1A69" target="_self">RestoreShields</a>      ; Restore player's shields
<span class="siteTarget" id="0235">0</span>235: C1              POP     BC                  ; Get back sprite-size
0236: F1              POP     AF                  ; Get back shield count
0237: 3D              DEC     A                   ; Have we moved all shields?
0238: C8              RET     Z                   ; Yes ... out
0239: D5              PUSH    DE                  ; Hold sprite buffer
023A: 11 E0 02        LD      DE,$02E0            ; Add 2E0 (23 rows) to get to ...
023D: 19              ADD     HL,DE               ; ... next shield on screen
023E: D1              POP     DE                  ; restore sprite buffer
023F: C3 29 02        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0229" title="$0229" target="_self">$0229</a>               ; Go back and do all
;
<span class="siteTarget" id="0242">0</span>242: CD 7C 14        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#RememberShields" title="$147C" target="_self">RememberShields</a>     ; Remember player's shields
0245: C3 35 02        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0235" title="$0235" target="_self">$0235</a>               ; Continue with next shield


<span class="siteTarget" id="RunGameObjs">R</span>unGameObjs: 
; Process game objects. Each game object has a 16 byte structure. The handler routine for the object
; is at xx03 and xx04 of the structure. The pointer to xx04 is pushed onto the stack before calling
; the handler.
;
; All game objects (except task 0 ... the player) are called at the mid-screen and end-screen renderings.
; Each object decides when to run based on its Y (not rotated) coordinate. If an object is on the lower
; half of the screen then it does its work when the beam is at the top of the screen. If an object is
; on the top of the screen then it does its work when the beam is at the bottom. This keeps the
; object from updating while it is being drawn which would result in an ugly flicker.
;
;
; The player is only processed at the mid-screen interrupt. I am not sure why.
;
; The first three bytes of the structure are used for status and timers.
; 
; If the first byte is FF then the end of the game-task list has been reached.
; If the first byte is FE then the object is skipped.
;
; If the first-two bytes are non-zero then they are treated like a two-byte counter
; and decremented as such. The 2nd byte is the LSB (moves the fastest).
;
; If the first-two bytes are zero then the third byte is treated as an additional counter. It
; is decremented as such.
;
; When all three bytes reach zero the task is executed.
;
; The third-byte-counter was used as a speed-governor for the player's object, but evidently even the slowest
; setting was too slow. It got changed to 0 (fastest possible).
; 
0248: 21 10 20        LD      HL,$2010            ; First game object (active player)
<span class="siteTarget" id="024B">0</span>24B: 7E              LD      A,(HL)              ; Have we reached the ...
024C: FE FF           CP      $FF                 ; ... end of the object list?
024E: C8              RET     Z                   ; Yes ... done
024F: FE FE           CP      $FE                 ; Is object active?   
0251: CA 81 02        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0281" title="$0281" target="_self">$0281</a>             ; No ... skip it
0254: 23              INC     HL                  ; xx01
0255: 46              LD      B,(HL)              ; First byte to B
0256: 4F              LD      C,A                 ; Hold 1st byte
0257: B0              OR      B                   ; OR 1st and 2nd byte
0258: 79              LD      A,C                 ; Restore 1st byte
0259: C2 77 02        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0277" title="$0277" target="_self">$0277</a>            ; If word at xx00,xx02 is non zero then decrement it
;
025C: 23              INC     HL                  ; xx02
025D: 7E              LD      A,(HL)              ; Get byte counter 
025E: A7              AND     A                   ; Is it 0?
025F: C2 88 02        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0288" title="$0288" target="_self">$0288</a>            ; No ... decrement byte counter at xx02
0262: 23              INC     HL                  ; xx03
0263: 5E              LD      E,(HL)              ; Get handler address LSB
0264: 23              INC     HL                  ; xx04
0265: 56              LD      D,(HL)              ; Get handler address MSB
0266: E5              PUSH    HL                  ; Remember pointer to MSB
0267: EB              EX      DE,HL               ; Handler address to HL
0268: E5              PUSH    HL                  ; Now to stack (making room for indirect call)
0269: 21 6F 02        LD      HL,$026F            ; Return address to 026F
026C: E3              EX      (SP),HL             ; Return address (026F) now on stack. Handler in HL.
026D: D5              PUSH    DE                  ; Push pointer to data struct (xx04) for handler to use
026E: E9              JP      (HL)                ; Run object's code (will return to next line)
026F: E1              POP     HL                  ; Restore pointer to xx04
0270: 11 0C 00        LD      DE,$000C            ; Offset to next ... 
0273: 19              ADD     HL,DE               ; ... game task (C+4=10)
0274: C3 4B 02        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#024B" title="$024B" target="_self">$024B</a>               ; Do next game task
; 
; Word at xx00 and xx01 is non-zero. Decrement it and move to next task. 
<span class="siteTarget" id="0277">0</span>277: 05              DEC     B                   ; Decrement ...
0278: 04              INC     B                   ; ... two ...
0279: C2 7D 02        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#027D" title="$027D" target="_self">$027D</a>            ; ... byte ...
027C: 3D              DEC     A                   ; ... value ...
<span class="siteTarget" id="027D">0</span>27D: 05              DEC     B                   ; ... at ...
027E: 70              LD      (HL),B              ; ... xx00 ...
027F: 2B              DEC     HL                  ; ... and ...
0280: 77              LD      (HL),A              ; ... xx01
;
<span class="siteTarget" id="0281">0</span>281: 11 10 00        LD      DE,$0010            ; Next ...
0284: 19              ADD     HL,DE               ; ... object descriptor
0285: C3 4B 02        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#024B" title="$024B" target="_self">$024B</a>               ; Keep processing game objects
;
; Word at xx00 and xx01 is zero and byte at xx02 is non-zero. Decrement xx02 and 
; move to next task.
<span class="siteTarget" id="0288">0</span>288: 35              DEC     (HL)                ; Decrement the xx02 counter
0289: 2B              DEC     HL                  ; Back up to ...
028A: 2B              DEC     HL                  ; ... start of game task
028B: C3 81 02        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0281" title="$0281" target="_self">$0281</a>               ; Next game task



<span class="siteTarget" id="GameObj0">G</span>ameObj0: 
; Game object 0: Move/draw the player
;
; This task is only called at the mid-screen ISR. It ALWAYS does its work here, even though
; the player can be on the top or bottom of the screen (not rotated). 
;
028E: E1              POP     HL                  ; Get player object structure 2014
028F: 23              INC     HL                  ; Point to blow-up status
0290: 7E              LD      A,(HL)              ; Get player blow-up status
0291: FE FF           CP      $FF                 ; Player is blowing up?
0293: CA 3B 03        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#033B" title="$033B" target="_self">$033B</a>             ; No ... go do normal movement
;
; Handle blowing up player
0296: 23              INC     HL                  ; Point to blow-up delay count
0297: 35              DEC     (HL)                ; Decrement the blow-up delay
0298: C0              RET     NZ                  ; Not time for a new blow-up sprite ... out
0299: 47              LD      B,A                 ; Hold sprite image number
029A: AF              XOR     A                   ; 0
029B: 32 68 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2068" title="$2068" target="TABLE_1">playerOK</a>),A        ; Player is NOT OK ... player is blowing up
029E: 32 69 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2069" title="$2069" target="TABLE_1">enableAlienFire</a>),A ; Alien fire is disabled
02A1: 3E 30           LD      A,$30               ; Reset count ...
02A3: 32 6A 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#206A" title="$206A" target="TABLE_1">alienFireDelay</a>),A  ; ... till alien shots are enabled
02A6: 78              LD      A,B                 ; Restore sprite image number (used if we go to 39B)
02A7: 36 05           LD      (HL),$05            ; Reload time between blow-up changes
02A9: 23              INC     HL                  ; Point to number of blow-up changes
02AA: 35              DEC     (HL)                ; Count down blow-up changes
02AB: C2 9B 03        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawPlayerDie" title="$039B" target="_self">DrawPlayerDie</a>    ; Still blowing up ... go draw next sprite
;
; Blow up finished
02AE: 2A 1A 20        LD      HL,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#201A" title="$201A" target="TABLE_1">playerYr</a>)       ; Player's coordinates
02B1: 06 10           LD      B,$10               ; 16 Bytes
02B3: CD 24 14        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#EraseSimpleSprite" title="$1424" target="_self">EraseSimpleSprite</a>   ; Erase simple sprite (the player)
02B6: 21 10 20        LD      HL,$2010            ; Restore player ...
02B9: 11 10 1B        LD      DE,$1B10            ; ... structure ...
02BC: 06 10           LD      B,$10               ; ... from ...
02BE: CD 32 1A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#BlockCopy" title="$1A32" target="_self">BlockCopy</a>           ; ... ROM mirror
02C1: 06 00           LD      B,$00               ; Turn off ...
02C3: CD DC 19        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#SoundBits3Off" title="$19DC" target="_self">SoundBits3Off</a>       ; ... all sounds
02C6: 3A 6D 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#206D" title="$206D" target="TABLE_1">invaded</a>)         ; Has rack reached ...
02C9: A7              AND     A                   ; ... the bottom of the screen?
02CA: C0              RET     NZ                  ; Yes ... done here
02CB: 3A EF 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20EF" title="$20EF" target="TABLE_1">gameMode</a>)        ; Are we in ...
02CE: A7              AND     A                   ; ... game mode?
02CF: C8              RET     Z                   ; No ... return to splash screens
02D0: 31 00 24        LD      SP,$2400            ; We aren't going to return
02D3: FB              EI                          ; Enable interrupts (we just dropped the ISR context)
02D4: CD D7 19        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DsableGameTasks" title="$19D7" target="_self">DsableGameTasks</a>     ; Disable game tasks
02D7: CD 2E 09        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#092E" title="$092E" target="_self">$092E</a>               ; Get number of ships for active player
02DA: A7              AND     A                   ; Any left?
02DB: CA 6D 16        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#166D" title="$166D" target="_self">$166D</a>             ; No ... handle game over for player
02DE: CD E7 18        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#18E7" title="$18E7" target="_self">$18E7</a>               ; Get player-alive status pointer
02E1: 7E              LD      A,(HL)              ; Is player ...
02E2: A7              AND     A                   ; ... alive?
02E3: CA 2C 03        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#032C" title="$032C" target="_self">$032C</a>             ; Yes ... remove a ship from player's stash and reenter game loop
02E6: 3A CE 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20CE" title="$20CE" target="TABLE_1">twoPlayers</a>)      ; Multi-player game
02E9: A7              AND     A                   ; Only one player?
02EA: CA 2C 03        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#032C" title="$032C" target="_self">$032C</a>             ; Yes ... remove a ship from player's stash and reenter game loop
<span class="siteTarget" id="02ED">0</span>2ED: 3A 67 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2067" title="$2067" target="TABLE_1">playerDataMSB</a>)   ; Player data MSB
02F0: F5              PUSH    AF                  ; Hold the MSB
02F1: 0F              RRCA                        ; Player 1 is active player?
02F2: DA 32 03        JP      C,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0332" title="$0332" target="_self">$0332</a>             ; Yes ... go store player 1 shields and come back to 02F8
02F5: CD 0E 02        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#RememberShields2" title="$020E" target="_self">RememberShields2</a>    ; No ... go store player 2 shields
<span class="siteTarget" id="02F8">0</span>2F8: CD 78 08        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0878" title="$0878" target="_self">$0878</a>               ; Get ref-alien info and pointer to storage
02FB: 73              LD      (HL),E              ; Hold the ...
02FC: 23              INC     HL                  ; ... ref-alien ...
02FD: 72              LD      (HL),D              ; ... screen coordinates
02FE: 2B              DEC     HL                  ; Back up ...
02FF: 2B              DEC     HL                  ; .. to delta storage
0300: 70              LD      (HL),B              ; Store ref-alien's delta (direction)
0301: 00              NOP                         ; ** Why?
0302: CD E4 01        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#CopyRAMMirror" title="$01E4" target="_self">CopyRAMMirror</a>       ; Copy RAM mirror (getting ready to switch players)
0305: F1              POP     AF                  ; Restore active player MSB
0306: 0F              RRCA                        ; Player 1?
0307: 3E 21           LD      A,$21               ; Player 1 data pointer
0309: 06 00           LD      B,$00               ; Cocktail bit=0 (player 1)
030B: D2 12 03        JP      NC,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0312" title="$0312" target="_self">$0312</a>            ; It was player one ... keep data for player 2
030E: 06 20           LD      B,$20               ; Cocktail bit=1 (player 2)
0310: 3E 22           LD      A,$22               ; Player 2 data pointer
<span class="siteTarget" id="0312">0</span>312: 32 67 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2067" title="$2067" target="TABLE_1">playerDataMSB</a>),A   ; Change players 
0315: CD B6 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#TwoSecDelay" title="$0AB6" target="_self">TwoSecDelay</a>         ; Two second delay
0318: AF              XOR     A                   ; Clear the player-object ...
0319: 32 11 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2011" title="$2011" target="TABLE_1">obj0TimerLSB</a>),A    ; ... timer (player can move instantly after switching players)
031C: 78              LD      A,B                 ; Cocktail bit to A
031D: D3 05           OUT     (<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0005pw" title="$05" target="TABLE_2">SOUND2</a>),A          ; Set the cocktail mode
031F: 3C              INC     A                   ; Fleet sound 1 (first tone)
0320: 32 98 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2098" title="$2098" target="TABLE_1">soundPort5</a>),A      ; Set the port 5 hold
0323: CD D6 09        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ClearPlayField" title="$09D6" target="_self">ClearPlayField</a>      ; Clear center window
0326: CD 7F 1A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#RemoveShip" title="$1A7F" target="_self">RemoveShip</a>          ; Remove a ship and update indicators
0329: C3 F9 07        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#07F9" title="$07F9" target="_self">$07F9</a>               ; Tell the players that the switch has been made
;
<span class="siteTarget" id="032C">0</span>32C: CD 7F 1A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#RemoveShip" title="$1A7F" target="_self">RemoveShip</a>          ; Remove a ship and update indicators
032F: C3 17 08        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0817" title="$0817" target="_self">$0817</a>               ; Continue into game loop
;
<span class="siteTarget" id="0332">0</span>332: CD 09 02        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#RememberShields1" title="$0209" target="_self">RememberShields1</a>    ; Remember the shields for player 1
0335: C3 F8 02        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#02F8" title="$02F8" target="_self">$02F8</a>               ; Back to switching-players above

0338: 00 00 00 ; ** Why

; Player not blowing up ... handle inputs
<span class="siteTarget" id="033B">0</span>33B: 21 68 20        LD      HL,$2068            ; Player OK flag
033E: 36 01           LD      (HL),$01            ; Flag 1 ... player is OK
0340: 23              INC     HL                  ; 2069
0341: 7E              LD      A,(HL)              ; Alien shots enabled?
0342: A7              AND     A                   ; Set flags
0343: C3 B0 03        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#03B0" title="$03B0" target="_self">$03B0</a>               ; Continue

<span class="siteTarget" id="0346">0</span>346: 00              NOP                         ; ** Why?
0347: 2B              DEC     HL                  ; 2069
0348: 36 01           LD      (HL),$01            ; Enable alien fire

<span class="siteTarget" id="034A">0</span>34A: 3A 1B 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#201B" title="$201B" target="TABLE_1">playerXr</a>)        ; Current player coordinates
034D: 47              LD      B,A                 ; Hold it
034E: 3A EF 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20EF" title="$20EF" target="TABLE_1">gameMode</a>)        ; Are we in ...
0351: A7              AND     A                   ; ... game mode?
0352: C2 63 03        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0363" title="$0363" target="_self">$0363</a>            ; Yes ... use switches as player controls
; 
0355: 3A 1D 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#201D" title="$201D" target="TABLE_1">nextDemoCmd</a>)     ; Get demo command
0358: 0F              RRCA                        ; Is it right?
0359: DA 81 03        JP      C,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#MovePlayerRight" title="$0381" target="_self">MovePlayerRight</a>   ; Yes ... do right
035C: 0F              RRCA                        ; Is it left?
035D: DA 8E 03        JP      C,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#038E" title="$038E" target="_self">$038E</a>             ; Yes ... do left
0360: C3 6F 03        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#036F" title="$036F" target="_self">$036F</a>               ; Skip over movement (draw player and out)
; Player is in control
<span class="siteTarget" id="0363">0</span>363: CD C0 17        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ReadInputs" title="$17C0" target="_self">ReadInputs</a>          ; Read active player controls
0366: 07              RLCA                        ; Test for ...
0367: 07              RLCA                        ; ... right button
0368: DA 81 03        JP      C,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#MovePlayerRight" title="$0381" target="_self">MovePlayerRight</a>   ; Yes ... handle move right
036B: 07              RLCA                        ; Test for left button
036C: DA 8E 03        JP      C,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#038E" title="$038E" target="_self">$038E</a>             ; Yes ... handle move left
; Draw player sprite
<span class="siteTarget" id="036F">0</span>36F: 21 18 20        LD      HL,$2018            ; Active player descriptor
0372: CD 3B 1A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ReadDesc" title="$1A3B" target="_self">ReadDesc</a>            ; Load 5 byte sprite descriptor in order: EDLHB
0375: CD 47 1A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ConvToScr" title="$1A47" target="_self">ConvToScr</a>           ; Convert HL to screen coordinates
0378: CD 39 14        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawSimpSprite" title="$1439" target="_self">DrawSimpSprite</a>      ; Draw player
037B: 3E 00           LD      A,$00               ; Clear the task timer. Nobody changes this but it could have ...
037D: 32 12 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2012" title="$2012" target="TABLE_1">obj0TimerExtra</a>),A  ; ... been speed set for the player with a value other than 0 (not XORA)
0380: C9              RET                         ; Out

<span class="siteTarget" id="MovePlayerRight">M</span>ovePlayerRight: 
; Handle player moving right
0381: 78              LD      A,B                 ; Player coordinate
0382: FE D9           CP      $D9                 ; At right edge?
0384: CA 6F 03        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#036F" title="$036F" target="_self">$036F</a>             ; Yes ... ignore this
0387: 3C              INC     A                   ; Bump X coordinate
0388: 32 1B 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#201B" title="$201B" target="TABLE_1">playerXr</a>),A        ; New X coordinate
038B: C3 6F 03        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#036F" title="$036F" target="_self">$036F</a>               ; Draw player and out

MovePlayerLeft : ; =
; Handle player moving left
<span class="siteTarget" id="038E">0</span>38E: 78              LD      A,B                 ; Player coordinate
038F: FE 30           CP      $30                 ; At left edge
0391: CA 6F 03        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#036F" title="$036F" target="_self">$036F</a>             ; Yes ... ignore this
0394: 3D              DEC     A                   ; Bump X coordinate
0395: 32 1B 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#201B" title="$201B" target="TABLE_1">playerXr</a>),A        ; New X coordinate
0398: C3 6F 03        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#036F" title="$036F" target="_self">$036F</a>               ; Draw player and out

<span class="siteTarget" id="DrawPlayerDie">D</span>rawPlayerDie: 
; Toggle the player's blowing-up sprite between two pictures and draw it
039B: 3C              INC     A                   ; Toggle blowing-up ...
039C: E6 01           AND     $01                 ; ... player sprite (0,1,0,1)
039E: 32 15 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2015" title="$2015" target="TABLE_1">playerAlive</a>),A     ; Hold current state
03A1: 07              RLCA                        ; *2
03A2: 07              RLCA                        ; *4
03A3: 07              RLCA                        ; *8
03A4: 07              RLCA                        ; *16
03A5: 21 70 1C        LD      HL,$1C70            ; Base blow-up sprite location
03A8: 85              ADD     A,L                 ; Offset sprite ...
03A9: 6F              LD      L,A                 ; ... pointer
03AA: 22 18 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2018" title="$2018" target="TABLE_1">plyrSprPicL</a>),HL    ; New blow-up sprite picture
03AD: C3 6F 03        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#036F" title="$036F" target="_self">$036F</a>               ; Draw new blow-up sprite and out

<span class="siteTarget" id="03B0">0</span>3B0: C2 4A 03        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#034A" title="$034A" target="_self">$034A</a>            ; Alien shots enabled ... move player's ship, draw it, and out
03B3: 23              INC     HL                  ; To 206A
03B4: 35              DEC     (HL)                ; Time until aliens can fire
03B5: C2 4A 03        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#034A" title="$034A" target="_self">$034A</a>            ; Not time to enable ... move player's ship, draw it, and out
03B8: C3 46 03        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0346" title="$0346" target="_self">$0346</a>               ; Enable alien fire ... move player's ship, draw it, and out


<span class="siteTarget" id="GameObj1">G</span>ameObj1: 
; Game object 1: Move/draw the player shot
;
; This task executes at either mid-screen ISR (if it is on the top half of the non-rotated screen) or
; at the end-screen ISR (if it is on the bottom half of the screen).
;
03BB: 11 2A 20        LD      DE,$202A            ; Object's Yn coordiante
03BE: CD 06 1A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#CompYToBeam" title="$1A06" target="_self">CompYToBeam</a>         ; Compare to screen-update location
03C1: E1              POP     HL                  ; Pointer to task data
03C2: D0              RET     NC                  ; Make sure we are in the right ISR

03C3: 23              INC     HL                  ; Point to 2025 ... the shot status
03C4: 7E              LD      A,(HL)              ; Get shot status
03C5: A7              AND     A                   ; Return if ...
03C6: C8              RET     Z                   ; ... no shot is active
;
03C7: FE 01           CP      $01                 ; Shot just starting (requested elsewhere)?
03C9: CA FA 03        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#InitPlyShot" title="$03FA" target="_self">InitPlyShot</a>       ; Yes ... go initiate shot
;
03CC: FE 02           CP      $02                 ; Progressing normally?
03CE: CA 0A 04        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#MovePlyShot" title="$040A" target="_self">MovePlyShot</a>       ; Yes ... go move it
;
03D1: 23              INC     HL                  ; 2026
03D2: FE 03           CP      $03                 ; Shot blowing up (not because of alien)?
03D4: C2 2A 04        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#042A" title="$042A" target="_self">$042A</a>            ; No ... try other options
;
; Shot blowing up because it left the playfield, hit a shield, or hit another bullet
03D7: 35              DEC     (HL)                ; Decrement the timer
03D8: CA 36 04        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#EndOfBlowup" title="$0436" target="_self">EndOfBlowup</a>       ; If done then
03DB: 7E              LD      A,(HL)              ; Get timer value
03DC: FE 0F           CP      $0F                 ; Starts at 10 ... first decrement brings us here
03DE: C0              RET     NZ                  ; Not the first time ... explosion has been drawn
; Draw explosion first pass through timer loop
03DF: E5              PUSH    HL                  ; Hold pointer to data
03E0: CD 30 04        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ReadPlyShot" title="$0430" target="_self">ReadPlyShot</a>         ; Read shot descriptor
03E3: CD 52 14        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#EraseShifted" title="$1452" target="_self">EraseShifted</a>        ; Erase the sprite
03E6: E1              POP     HL                  ; 2026 (timer flag)
03E7: 23              INC     HL                  ; 2027 point to sprite LSB
03E8: 34              INC     (HL)                ; Change 1C90 to 1C91
03E9: 23              INC     HL                  ; 2028
03EA: 23              INC     HL                  ; 2029
03EB: 35              DEC     (HL)                ; Drop X coordinate ...
03EC: 35              DEC     (HL)                ; ... by 2
03ED: 23              INC     HL                  ; 202A
03EE: 35              DEC     (HL)                ; Drop Y ...
03EF: 35              DEC     (HL)                ; ... coordinate ...
03F0: 35              DEC     (HL)                ; ... by ...
03F1: 23              INC     HL                  ; ... 3
03F2: 36 08           LD      (HL),$08            ; 202B 8 bytes in size of sprite
03F4: CD 30 04        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ReadPlyShot" title="$0430" target="_self">ReadPlyShot</a>         ; Read player shot structure
03F7: C3 00 14        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawShiftedSprite" title="$1400" target="_self">DrawShiftedSprite</a>   ; Draw sprite and out
;
<span class="siteTarget" id="InitPlyShot">I</span>nitPlyShot: 
03FA: 3C              INC     A                   ; Type is now ...
03FB: 77              LD      (HL),A              ; ... 2 (in progress)
03FC: 3A 1B 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#201B" title="$201B" target="TABLE_1">playerXr</a>)        ; Players Y coordinate
03FF: C6 08           ADD     A,$08               ; To center of player
0401: 32 2A 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#202A" title="$202A" target="TABLE_1">obj1CoorXr</a>),A      ; Shot's Y coordinate
0404: CD 30 04        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ReadPlyShot" title="$0430" target="_self">ReadPlyShot</a>         ; Read 5 byte structure
0407: C3 00 14        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawShiftedSprite" title="$1400" target="_self">DrawShiftedSprite</a>   ; Draw sprite and out
;
<span class="siteTarget" id="MovePlyShot">M</span>ovePlyShot: 
040A: CD 30 04        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ReadPlyShot" title="$0430" target="_self">ReadPlyShot</a>         ; Read the shot structure
040D: D5              PUSH    DE                  ; Hold pointer to sprite image
040E: E5              PUSH    HL                  ; Hold sprite coordinates
040F: C5              PUSH    BC                  ; Hold sprite size (in B)
0410: CD 52 14        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#EraseShifted" title="$1452" target="_self">EraseShifted</a>        ; Erase the sprite from the screen
0413: C1              POP     BC                  ; Restore size
0414: E1              POP     HL                  ; Restore coords
0415: D1              POP     DE                  ; Restore pointer to sprite image
0416: 3A 2C 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#202C" title="$202C" target="TABLE_1">shotDeltaX</a>)      ; DeltaX for shot
0419: 85              ADD     A,L                 ; Move the shot ...
041A: 6F              LD      L,A                 ; ... up the screen
041B: 32 29 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2029" title="$2029" target="TABLE_1">obj1CoorYr</a>),A      ; Store shot's new X coordinate
041E: CD 91 14        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawSprCollision" title="$1491" target="_self">DrawSprCollision</a>    ; Draw sprite with collision detection
0421: 3A 61 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2061" title="$2061" target="TABLE_1">collision</a>)       ; Test for ...
0424: A7              AND     A                   ; ... collision
0425: C8              RET     Z                   ; No collision ... out
;
; Collision with alien detected
0426: 32 02 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2002" title="$2002" target="TABLE_1">alienIsExploding</a>),A           ; Set to not-0 indicating ...
0429: C9              RET                         ; ... an alien is blowing up
;
; Other shot-status options
<span class="siteTarget" id="042A">0</span>42A: FE 05           CP      $05                 ; Alien explosion in progress?
042C: C8              RET     Z                   ; Yes ... nothing to do
042D: C3 36 04        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#EndOfBlowup" title="$0436" target="_self">EndOfBlowup</a>         ; Anything else erases the shot and removes it from duty

<span class="siteTarget" id="ReadPlyShot">R</span>eadPlyShot: 
0430: 21 27 20        LD      HL,$2027            ; Read 5 byte sprite structure for ...
0433: C3 3B 1A        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ReadDesc" title="$1A3B" target="_self">ReadDesc</a>            ; ... player shot

<span class="siteTarget" id="EndOfBlowup">E</span>ndOfBlowup: 
0436: CD 30 04        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ReadPlyShot" title="$0430" target="_self">ReadPlyShot</a>         ; Read the shot structure
0439: CD 52 14        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#EraseShifted" title="$1452" target="_self">EraseShifted</a>        ; Erase the player's shot
043C: 21 25 20        LD      HL,$2025            ; Reinit ...
043F: 11 25 1B        LD      DE,$1B25            ; ... shot structure ...
0442: 06 07           LD      B,$07               ; ... from ...
0444: CD 32 1A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#BlockCopy" title="$1A32" target="_self">BlockCopy</a>           ; ... ROM mirror
0447: 2A 8D 20        LD      HL,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#208D" title="$208D" target="TABLE_1">sauScoreLSB</a>)    ; Get pointer to saucer-score table
044A: 2C              INC     L                   ; Every shot explosion advances it one
044B: 7D              LD      A,L                 ; Have we passed ...
044C: FE 63           CP      $63                 ; ... the end at 1D63 (bug! this should be $64 to cover all 16 values)
044E: DA 53 04        JP      C,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0453" title="$0453" target="_self">$0453</a>             ; No .... keep it
0451: 2E 54           LD      L,$54               ; Wrap back around to 1D54
<span class="siteTarget" id="0453">0</span>453: 22 8D 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#208D" title="$208D" target="TABLE_1">sauScoreLSB</a>),HL    ; New score pointer
0456: 2A 8F 20        LD      HL,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#208F" title="$208F" target="TABLE_1">shotCountLSB</a>)   ; Increments with every shot ...
0459: 2C              INC     L                   ; ... but only LSB ** ...
045A: 22 8F 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#208F" title="$208F" target="TABLE_1">shotCountLSB</a>),HL   ; ... used for saucer direction
;
045D: 3A 84 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2084" title="$2084" target="TABLE_1">saucerActive</a>)    ; Is saucer ...
0460: A7              AND     A                   ; ... on screen?
0461: C0              RET     NZ                  ; Yes ... don't reset it
;
; Setup saucer direction for next trip
0462: 7E              LD      A,(HL)              ; Shot counter
0463: E6 01           AND     $01                 ; Lowest bit set?
0465: 01 29 02        LD      BC,$0229            ; Xr delta of 2 starting at Xr=29
0468: C2 6E 04        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#046E" title="$046E" target="_self">$046E</a>            ; Yes ... use 2/29
046B: 01 E0 FE        LD      BC,$FEE0            ; No ... Xr delta of -2 starting at Xr=E0
<span class="siteTarget" id="046E">0</span>46E: 21 8A 20        LD      HL,$208A            ; Saucer descriptor
0471: 71              LD      (HL),C              ; Store Xr coordinate
0472: 23              INC     HL                  ; Point to ...
0473: 23              INC     HL                  ; ... delta Xr
0474: 70              LD      (HL),B              ; Store delta Xr
0475: C9              RET                         ; Done


<span class="siteTarget" id="GameObj2">G</span>ameObj2: 
; Game object 2: Allien rolling-shot (targets player specifically)
;
; The 2-byte value at 2038 is where the firing-column-table-pointer would be (see other
; shots ... next game objects). This shot doesn't use that table. It targets the player
; specifically. Instead the value is used as a flag to have the shot skip its first
; attempt at firing every time it is reinitialized (when it blows up).
;
; The task-timer at 2032 is copied to 2080 in the game loop. The flag is used as a
; synchronization flag to keep all the shots processed on separate interrupt ticks. This
; has the main effect of slowing the shots down.
;
; When the timer is 2 the squiggly-shot/saucer (object 4 ) runs.
; When the timer is 1 the plunger-shot (object 3) runs.
; Whne the timer is 0 this object, the rolling-shot, runs.
;
0476: E1              POP     HL                  ; Game object data
0477: 3A 32 1B        LD      A,($1B32)           ; Restore delay from ... 
047A: 32 32 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2032" title="$2032" target="TABLE_1">obj2TimerExtra</a>),A  ; ... ROM mirror (value 2)
047D: 2A 38 20        LD      HL,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2038" title="$2038" target="TABLE_1">rolShotCFirLSB</a>) ; Get pointer to ...
0480: 7D              LD      A,L                 ; ... column-firing table.
0481: B4              OR      H                   ; All zeros?
0482: C2 8A 04        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#048A" title="$048A" target="_self">$048A</a>            ; No ... must be a valid column. Go fire.
0485: 2B              DEC     HL                  ; Decrement the counter
0486: 22 38 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2038" title="$2038" target="TABLE_1">rolShotCFirLSB</a>),HL ; Store new counter value (run the shot next time)
0489: C9              RET                         ; And out

<span class="siteTarget" id="048A">0</span>48A: 11 35 20        LD      DE,$2035            ; Rolling-shot data structure
048D: 3E F9           LD      A,$F9               ; Last picture of "rolling" alien shot
048F: CD 50 05        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ToShotStruct" title="$0550" target="_self">ToShotStruct</a>        ; Set code to handle rolling-shot
0492: 3A 46 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2046" title="$2046" target="TABLE_1">pluShotStepCnt</a>)  ; Get the plunger-shot step count
0495: 32 70 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2070" title="$2070" target="TABLE_1">otherShot1</a>),A      ; Hold it
0498: 3A 56 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2056" title="$2056" target="TABLE_1">squShotStepCnt</a>)  ; Get the squiggly-shot step count
049B: 32 71 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2071" title="$2071" target="TABLE_1">otherShot2</a>),A      ; Hold it
049E: CD 63 05        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#HandleAlienShot" title="$0563" target="_self">HandleAlienShot</a>     ; Handle active shot structure
04A1: 3A 78 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2078" title="$2078" target="TABLE_1">aShotBlowCnt</a>)    ; Blow up counter
04A4: A7              AND     A                   ; Test if shot has cycled through blowing up
04A5: 21 35 20        LD      HL,$2035            ; Rolling-shot data structure
04A8: C2 5B 05        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#FromShotStruct" title="$055B" target="_self">FromShotStruct</a>   ; If shot is still running, copy the updated data and out

<span class="siteTarget" id="ResetShot">R</span>esetShot: 
; The rolling-shot has blown up. Reset the data structure.
04AB: 11 30 1B        LD      DE,$1B30            ; Reload ...
04AE: 21 30 20        LD      HL,$2030            ; ... object ...
04B1: 06 10           LD      B,$10               ; ... structure ...
04B3: C3 32 1A        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#BlockCopy" title="$1A32" target="_self">BlockCopy</a>           ; ... from ROM mirror and out


<span class="siteTarget" id="GameObj3">G</span>ameObj3: 
; Game object 3: Alien plunger-shot
; This is skipped if there is only one alien left on the screen.
;
04B6: E1              POP     HL                  ; Game object data
04B7: 3A 6E 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#206E" title="$206E" target="TABLE_1">skipPlunger</a>)     ; One alien left? Skip plunger shot?
04BA: A7              AND     A                   ; Check
04BB: C0              RET     NZ                  ; Yes. Only one alien. Skip this shot.
04BC: 3A 80 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2080" title="$2080" target="TABLE_1">shotSync</a>)        ; Sync flag (copied from GO-2's timer value)
04BF: FE 01           CP      $01                 ; GO-2 and GO-4 are idle?
04C1: C0              RET     NZ                  ; No ... only one shot at a time

04C2: 11 45 20        LD      DE,$2045            ; Plunger alien shot data structure
04C5: 3E ED           LD      A,$ED               ; Last picture of "plunger" alien shot
04C7: CD 50 05        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ToShotStruct" title="$0550" target="_self">ToShotStruct</a>        ; Copy the plunger alien to the active structure
04CA: 3A 36 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2036" title="$2036" target="TABLE_1">rolShotStepCnt</a>)  ; Step count from rolling-shot
04CD: 32 70 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2070" title="$2070" target="TABLE_1">otherShot1</a>),A      ; Hold it
04D0: 3A 56 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2056" title="$2056" target="TABLE_1">squShotStepCnt</a>)  ; Step count from squiggly shot
04D3: 32 71 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2071" title="$2071" target="TABLE_1">otherShot2</a>),A      ; Hold it
04D6: CD 63 05        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#HandleAlienShot" title="$0563" target="_self">HandleAlienShot</a>     ; Handle active shot structure
04D9: 3A 76 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2076" title="$2076" target="TABLE_1">aShotCFirLSB</a>)    ; LSB of column-firing table
04DC: FE 10           CP      $10                 ; Been through all entries in the table?
04DE: DA E7 04        JP      C,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#04E7" title="$04E7" target="_self">$04E7</a>             ; Not yet ... table is OK
04E1: 3A 48 1B        LD      A,($1B48)           ; Been through all ..
04E4: 32 76 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2076" title="$2076" target="TABLE_1">aShotCFirLSB</a>),A    ; ... so reset pointer into firing-column table
<span class="siteTarget" id="04E7">0</span>4E7: 3A 78 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2078" title="$2078" target="TABLE_1">aShotBlowCnt</a>)    ; Get the blow up timer
04EA: A7              AND     A                   ; Zero means shot is done
04EB: 21 45 20        LD      HL,$2045            ; Plunger shot data
04EE: C2 5B 05        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#FromShotStruct" title="$055B" target="_self">FromShotStruct</a>   ; If shot is still running, go copy the updated data and out
;
04F1: 11 40 1B        LD      DE,$1B40            ; Reload ...
04F4: 21 40 20        LD      HL,$2040            ; ... object ...
04F7: 06 10           LD      B,$10               ; ... structure ...
04F9: CD 32 1A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#BlockCopy" title="$1A32" target="_self">BlockCopy</a>           ; ... from mirror
;
04FC: 3A 82 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2082" title="$2082" target="TABLE_1">numAliens</a>)       ; Number of aliens on screen
04FF: 3D              DEC     A                   ; Is there only one left?
0500: C2 08 05        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0508" title="$0508" target="_self">$0508</a>            ; No ... move on
0503: 3E 01           LD      A,$01               ; Disable plunger shot ...
0505: 32 6E 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#206E" title="$206E" target="TABLE_1">skipPlunger</a>),A     ; ... when only one alien remains
<span class="siteTarget" id="0508">0</span>508: 2A 76 20        LD      HL,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2076" title="$2076" target="TABLE_1">aShotCFirLSB</a>)   ; Set the plunger shot's ...
050B: C3 7E 06        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#067E" title="$067E" target="_self">$067E</a>               ; ... column-firing pointer data

; Game task 4 when splash screen alien is shooting extra "C" with a squiggly shot
050E: E1              POP     HL                  ; Ignore the task data pointer passed on stack
;
; GameObject 4 comes here if processing a squiggly shot
<span class="siteTarget" id="050F">0</span>50F: 11 55 20        LD      DE,$2055            ; Squiggly shot data structure
0512: 3E DB           LD      A,$DB               ; LSB of last byte of picture
0514: CD 50 05        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ToShotStruct" title="$0550" target="_self">ToShotStruct</a>        ; Copy squiggly shot to
0517: 3A 46 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2046" title="$2046" target="TABLE_1">pluShotStepCnt</a>)  ; Get plunger ...
051A: 32 70 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2070" title="$2070" target="TABLE_1">otherShot1</a>),A      ; ... step count
051D: 3A 36 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2036" title="$2036" target="TABLE_1">rolShotStepCnt</a>)  ; Get rolling ...
0520: 32 71 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2071" title="$2071" target="TABLE_1">otherShot2</a>),A      ; ... step count
0523: CD 63 05        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#HandleAlienShot" title="$0563" target="_self">HandleAlienShot</a>     ; Handle active shot structure
0526: 3A 76 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2076" title="$2076" target="TABLE_1">aShotCFirLSB</a>)    ; LSB of column-firing table pointer
0529: FE 15           CP      $15                 ; Have we processed all entries?
052B: DA 34 05        JP      C,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0534" title="$0534" target="_self">$0534</a>             ; No ... don't reset it
052E: 3A 58 1B        LD      A,($1B58)           ; Reset the pointer ...
0531: 32 76 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2076" title="$2076" target="TABLE_1">aShotCFirLSB</a>),A    ; ... back to the start of the table
<span class="siteTarget" id="0534">0</span>534: 3A 78 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2078" title="$2078" target="TABLE_1">aShotBlowCnt</a>)    ; Check to see if squiggly shot is done
0537: A7              AND     A                   ; 0 means blow-up timer expired
0538: 21 55 20        LD      HL,$2055            ; Squiggly shot data structure
053B: C2 5B 05        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#FromShotStruct" title="$055B" target="_self">FromShotStruct</a>   ; If shot is still running, go copy the updated data and out

; Shot explosion is over. Remove the shot.
053E: 11 50 1B        LD      DE,$1B50            ; Reload
0541: 21 50 20        LD      HL,$2050            ; ... object ...
0544: 06 10           LD      B,$10               ; ... structure ...
0546: CD 32 1A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#BlockCopy" title="$1A32" target="_self">BlockCopy</a>           ; ... from mirror
0549: 2A 76 20        LD      HL,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2076" title="$2076" target="TABLE_1">aShotCFirLSB</a>)   ; Copy pointer to column-firing table ...
054C: 22 58 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2058" title="$2058" target="TABLE_1">squShotCFirLSB</a>),HL ; ... back to data structure (for next shot)
054F: C9              RET                         ; Done

<span class="siteTarget" id="ToShotStruct">T</span>oShotStruct: 
0550: 32 7F 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#207F" title="$207F" target="TABLE_1">shotPicEnd</a>),A      ; LSB of last byte of last picture in sprite
0553: 21 73 20        LD      HL,$2073            ; Destination is the shot-structure
0556: 06 0B           LD      B,$0B               ; 11 bytes
0558: C3 32 1A        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#BlockCopy" title="$1A32" target="_self">BlockCopy</a>           ; Block copy and out

<span class="siteTarget" id="FromShotStruct">F</span>romShotStruct: 
055B: 11 73 20        LD      DE,$2073            ; Source is the shot-structure
055E: 06 0B           LD      B,$0B               ; 11 bytes
0560: C3 32 1A        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#BlockCopy" title="$1A32" target="_self">BlockCopy</a>           ; Block copy and out

<span class="siteTarget" id="HandleAlienShot">H</span>andleAlienShot: 
; Each of the 3 shots copy their data to the 2073 structure (0B bytes) and call this.
; Then they copy back if the shot is still active. Otherwise they copy from the mirror.
;
; The alien "fire rate" is based on the number of steps the other two shots on the screen 
; have made. The smallest number-of-steps is compared to the reload-rate. If it is too
; soon then no shot is made. The reload-rate is based on the player's score. The MSB
; is looked up in a table to get the reload-rate. The smaller the rate the faster the
; aliens fire. Setting rate this way keeps shots from walking on each other.
; 
0563: 21 73 20        LD      HL,$2073            ; Start of active shot structure
0566: 7E              LD      A,(HL)              ; Get the shot status
0567: E6 80           AND     $80                 ; Is the shot active?
0569: C2 C1 05        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#05C1" title="$05C1" target="_self">$05C1</a>            ; Yes ... go move it

056C: 3A C1 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20C1" title="$20C1" target="TABLE_1">isrSplashTask</a>)   ; ISR splash task
056F: FE 04           CP      $04                 ; Shooting the "C" ?
0571: 3A 69 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2069" title="$2069" target="TABLE_1">enableAlienFire</a>) ; Alien fire enabled flag
0574: CA B7 05        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#05B7" title="$05B7" target="_self">$05B7</a>             ; We are shooting the extra "C" ... just flag it active and out
0577: A7              AND     A                   ; Is alien fire enabled?
0578: C8              RET     Z                   ; No ... don't start a new shot

0579: 23              INC     HL                  ; 2074 step count of current shot
057A: 36 00           LD      (HL),$00            ; clear the step count

; Make sure it isn't too soon to fire another shot
057C: 3A 70 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2070" title="$2070" target="TABLE_1">otherShot1</a>)      ; Get the step count of the 1st "other shot"
057F: A7              AND     A                   ; Any steps made?
0580: CA 89 05        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0589" title="$0589" target="_self">$0589</a>             ; No ... ignore this count
0583: 47              LD      B,A                 ; Shuffle off step count
0584: 3A CF 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20CF" title="$20CF" target="TABLE_1">aShotReloadRate</a>) ; Get the reload rate (based on MSB of score)
0587: B8              CP      B                   ; Too soon to fire again?
0588: D0              RET     NC                  ; Yes ... don't fire
<span class="siteTarget" id="0589">0</span>589: 3A 71 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2071" title="$2071" target="TABLE_1">otherShot2</a>)      ; Get the step count of the 2nd "other shot"
058C: A7              AND     A                   ; Any steps made?
058D: CA 96 05        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0596" title="$0596" target="_self">$0596</a>             ; No steps on any shot ... we are clear to fire
0590: 47              LD      B,A                 ; Shuffle off step count
0591: 3A CF 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20CF" title="$20CF" target="TABLE_1">aShotReloadRate</a>) ; Get the reload rate (based on MSB of score)
0594: B8              CP      B                   ; Too soon to fire again?
0595: D0              RET     NC                  ; Yes ... don't fire
<span class="siteTarget" id="0596">0</span>596: 23              INC     HL                  ; 2075
0597: 7E              LD      A,(HL)              ; Get tracking flag
0598: A7              AND     A                   ; Does this shot track the player?
0599: CA 1B 06        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#061B" title="$061B" target="_self">$061B</a>             ; Yes ... go make a tracking shot;
059C: 2A 76 20        LD      HL,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2076" title="$2076" target="TABLE_1">aShotCFirLSB</a>)   ; Column-firing table
059F: 4E              LD      C,(HL)              ; Get next column to fire from
05A0: 23              INC     HL                  ; Bump the ...
05A1: 00              NOP                         ; % WHY?
05A2: 22 76 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2076" title="$2076" target="TABLE_1">aShotCFirLSB</a>),HL   ; ... pointer into column table
<span class="siteTarget" id="05A5">0</span>5A5: CD 2F 06        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#FindInColumn" title="$062F" target="_self">FindInColumn</a>        ; Find alien in target column
05A8: D0              RET     NC                  ; No alien is alive in target column ... out
;
05A9: CD 7A 01        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#GetAlienCoords" title="$017A" target="_self">GetAlienCoords</a>      ; Get coordinates of alien (lowest alien in firing column)
05AC: 79              LD      A,C                 ; Offset ...
05AD: C6 07           ADD     A,$07               ; ... Y by 7
05AF: 67              LD      H,A                 ; To H
05B0: 7D              LD      A,L                 ; Offset ...
05B1: D6 0A           SUB     $0A                 ; ... X down 10
05B3: 6F              LD      L,A                 ; To L
05B4: 22 7B 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#207B" title="$207B" target="TABLE_1">alienShotYr</a>),HL    ; Set shot coordinates below alien
;
<span class="siteTarget" id="05B7">0</span>5B7: 21 73 20        LD      HL,$2073            ; Alien shot status
05BA: 7E              LD      A,(HL)              ; Get the status
05BB: F6 80           OR      $80                 ; Mark this shot ...
05BD: 77              LD      (HL),A              ; ... as actively running
05BE: 23              INC     HL                  ; 2074 step count
05BF: 34              INC     (HL)                ; Give this shot 1 step (it just started)
05C0: C9              RET                         ; Out
;
; Move the alien shot
<span class="siteTarget" id="05C1">0</span>5C1: 11 7C 20        LD      DE,$207C            ; Alien-shot Y coordinate
05C4: CD 06 1A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#CompYToBeam" title="$1A06" target="_self">CompYToBeam</a>         ; Compare to beam position
05C7: D0              RET     NC                  ; Not the right ISR for this shot
;
05C8: 23              INC     HL                  ; 2073 status
05C9: 7E              LD      A,(HL)              ; Get shot status
05CA: E6 01           AND     $01                 ; Bit 0 is 1 if blowing up
05CC: C2 44 06        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ShotBlowingUp" title="$0644" target="_self">ShotBlowingUp</a>    ; Go do shot-is-blowing-up sequence
05CF: 23              INC     HL                  ; 2074 step count
05D0: 34              INC     (HL)                ; Count the steps (used for fire rate)
05D1: CD 75 06        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0675" title="$0675" target="_self">$0675</a>               ; Erase shot
05D4: 3A 79 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2079" title="$2079" target="TABLE_1">aShotImageLSB</a>)   ; Get LSB of the image pointer
05D7: C6 03           ADD     A,$03               ; Next set of images
05D9: 21 7F 20        LD      HL,$207F            ; End of image
05DC: BE              CP      (HL)                ; Have we reached the end of the set?
05DD: DA E2 05        JP      C,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#05E2" title="$05E2" target="_self">$05E2</a>             ; No ... keep it
05E0: D6 0C           SUB     $0C                 ; Back up to the 1st image in the set
<span class="siteTarget" id="05E2">0</span>5E2: 32 79 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2079" title="$2079" target="TABLE_1">aShotImageLSB</a>),A   ; New LSB image pointer
05E5: 3A 7B 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#207B" title="$207B" target="TABLE_1">alienShotYr</a>)     ; Get shot's Y coordinate
05E8: 47              LD      B,A                 ; Hold it
05E9: 3A 7E 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#207E" title="$207E" target="TABLE_1">alienShotDelta</a>)  ; Get alien shot delta 
05EC: 80              ADD     A,B                 ; Add to shots coordinate
05ED: 32 7B 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#207B" title="$207B" target="TABLE_1">alienShotYr</a>),A     ; New shot Y coordinate
05F0: CD 6C 06        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#066C" title="$066C" target="_self">$066C</a>               ; Draw the alien shot
05F3: 3A 7B 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#207B" title="$207B" target="TABLE_1">alienShotYr</a>)     ; Shot's Y coordinate
05F6: FE 15           CP      $15                 ; Still in the active playfield?
05F8: DA 12 06        JP      C,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0612" title="$0612" target="_self">$0612</a>             ; No ... end it
05FB: 3A 61 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2061" title="$2061" target="TABLE_1">collision</a>)       ; Did shot collide ...
05FE: A7              AND     A                   ; ... with something?
05FF: C8              RET     Z                   ; No ... we are done here
0600: 3A 7B 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#207B" title="$207B" target="TABLE_1">alienShotYr</a>)     ; Shot's Y coordinate
0603: FE 1E           CP      $1E                 ; Is it below player's area?
0605: DA 12 06        JP      C,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0612" title="$0612" target="_self">$0612</a>             ; Yes ... end it
0608: FE 27           CP      $27                 ; Is it above player's area?
060A: 00              NOP                         ; ** WHY?
060B: D2 12 06        JP      NC,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0612" title="$0612" target="_self">$0612</a>            ; Yes ... end it
060E: 97              SUB     A                   ; Flag that player ...
060F: 32 15 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2015" title="$2015" target="TABLE_1">playerAlive</a>),A     ; ... has been struck
;
<span class="siteTarget" id="0612">0</span>612: 3A 73 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2073" title="$2073" target="TABLE_1">aShotStatus</a>)     ; Flag to ...
0615: F6 01           OR      $01                 ; ... start shot ...
0617: 32 73 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2073" title="$2073" target="TABLE_1">aShotStatus</a>),A     ; ... blowing up
061A: C9              RET                         ; Out
;
; Start a shot right over the player
<span class="siteTarget" id="061B">0</span>61B: 3A 1B 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#201B" title="$201B" target="TABLE_1">playerXr</a>)        ; Player's X coordinate
061E: C6 08           ADD     A,$08               ; Center of player
0620: 67              LD      H,A                 ; To H for routine
0621: CD 6F 15        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#FindColumn" title="$156F" target="_self">FindColumn</a>          ; Find the column
0624: 79              LD      A,C                 ; Get the column right over player
0625: FE 0C           CP      $0C                 ; Is it a valid column?
0627: DA A5 05        JP      C,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#05A5" title="$05A5" target="_self">$05A5</a>             ; Yes ... use what we found
062A: 0E 0B           LD      C,$0B               ; Else use ...
062C: C3 A5 05        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#05A5" title="$05A5" target="_self">$05A5</a>               ; ... as far over as we can

<span class="siteTarget" id="FindInColumn">F</span>indInColumn: 
; C contains the target column. Look for a live alien in the column starting with
; the lowest position. Return C=1 if found ... HL points to found slot.
062F: 0D              DEC     C                   ; Column that is firing
0630: 3A 67 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2067" title="$2067" target="TABLE_1">playerDataMSB</a>)   ; Player's MSB (21xx or 22xx)
0633: 67              LD      H,A                 ; To MSB of HL
0634: 69              LD      L,C                 ; Column to L
0635: 16 05           LD      D,$05               ; 5 rows of aliens
<span class="siteTarget" id="0637">0</span>637: 7E              LD      A,(HL)              ; Get alien's status
0638: A7              AND     A                   ; 0 means dead
0639: 37              SCF                         ; In case not 0
063A: C0              RET     NZ                  ; Alien is alive? Yes ... return
063B: 7D              LD      A,L                 ; Get the flag pointer LSB
063C: C6 0B           ADD     A,$0B               ; Jump to same column on next row of rack (+11 aliens per row)
063E: 6F              LD      L,A                 ; New alien index
063F: 15              DEC     D                   ; Tested all rows?
0640: C2 37 06        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0637" title="$0637" target="_self">$0637</a>            ; No ... keep looking for a live alien up the rack
0643: C9              RET                         ; Didn't find a live alien. Return with C=0.

<span class="siteTarget" id="ShotBlowingUp">S</span>hotBlowingUp: 
; Alien shot is blowing up
0644: 21 78 20        LD      HL,$2078            ; Blow up timer
0647: 35              DEC     (HL)                ; Decrement the value
0648: 7E              LD      A,(HL)              ; Get the value
0649: FE 03           CP      $03                 ; First tick, 4, we draw the explosion
064B: C2 67 06        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0667" title="$0667" target="_self">$0667</a>            ; After that just wait
064E: CD 75 06        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0675" title="$0675" target="_self">$0675</a>               ; Erase the shot
0651: 21 DC 1C        LD      HL,$1CDC            ; Alien shot ...
0654: 22 79 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2079" title="$2079" target="TABLE_1">aShotImageLSB</a>),HL  ; ... explosion sprite
0657: 21 7C 20        LD      HL,$207C            ; Alien shot Y
065A: 35              DEC     (HL)                ; Left two for ...
065B: 35              DEC     (HL)                ; ... explosion
065C: 2B              DEC     HL                  ; Point slien shot X
065D: 35              DEC     (HL)                ; Up two for ...
065E: 35              DEC     (HL)                ; ... explosion
065F: 3E 06           LD      A,$06               ; Alien shot descriptor ...
0661: 32 7D 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#207D" title="$207D" target="TABLE_1">alienShotSize</a>),A   ; ... size 6
0664: C3 6C 06        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#066C" title="$066C" target="_self">$066C</a>               ; Draw alien shot explosion

<span class="siteTarget" id="0667">0</span>667: A7              AND     A                   ; Have we reached 0?
0668: C0              RET     NZ                  ; No ... keep waiting
0669: C3 75 06        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0675" title="$0675" target="_self">$0675</a>               ; Erase the explosion and out
;
<span class="siteTarget" id="066C">0</span>66C: 21 79 20        LD      HL,$2079            ; Alien shot descriptor
066F: CD 3B 1A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ReadDesc" title="$1A3B" target="_self">ReadDesc</a>            ; Read 5 byte structure
0672: C3 91 14        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawSprCollision" title="$1491" target="_self">DrawSprCollision</a>    ; Draw shot and out
;
<span class="siteTarget" id="0675">0</span>675: 21 79 20        LD      HL,$2079            ; Alien shot descriptor
0678: CD 3B 1A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ReadDesc" title="$1A3B" target="_self">ReadDesc</a>            ; Read 5 byte structure
067B: C3 52 14        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#EraseShifted" title="$1452" target="_self">EraseShifted</a>        ; Erase the shot and out

<span class="siteTarget" id="067E">0</span>67E: 22 48 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2048" title="$2048" target="TABLE_1">pluShotCFirLSB</a>),HL ; From 50B, update ...
0681: C9              RET                         ; ... column-firing table pointer and out



<span class="siteTarget" id="GameObj4">G</span>ameObj4: 
; Game object 4: Flying Saucer OR squiggly shot
;
; This task is shared by the squiggly-shot and the flying saucer. The saucer waits until the 
; squiggly-shot is over before it begins.
;
0682: E1              POP     HL                  ; Pull data pointer from the stack (not going to use it)
0683: 3A 80 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2080" title="$2080" target="TABLE_1">shotSync</a>)        ; Sync flag (copied from GO-2's timer value)
0686: FE 02           CP      $02                 ; Are GO-2 and GO-3 idle?
0688: C0              RET     NZ                  ; No ... only one at a time
0689: 21 83 20        LD      HL,$2083            ; Time-till-saucer flag
068C: 7E              LD      A,(HL)              ; Is it time ...
068D: A7              AND     A                   ; ... for a saucer?
068E: CA 0F 05        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#050F" title="$050F" target="_self">$050F</a>             ; No ... go process squiggly shot
0691: 3A 56 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2056" title="$2056" target="TABLE_1">squShotStepCnt</a>)  ; Is there a ...
0694: A7              AND     A                   ; ... squiggly shot going?
0695: C2 0F 05        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#050F" title="$050F" target="_self">$050F</a>            ; Yes ... go handle squiggly shot

0698: 23              INC     HL                  ; Saucer on screen flag
0699: 7E              LD      A,(HL)              ; (2084) Is the saucer ...
069A: A7              AND     A                   ; ... already on the screen?
069B: C2 AB 06        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#06AB" title="$06AB" target="_self">$06AB</a>            ; Yes ... go handle it
069E: 3A 82 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2082" title="$2082" target="TABLE_1">numAliens</a>)       ; Number of aliens remaining
06A1: FE 08           CP      $08                 ; Less than ...
06A3: DA 0F 05        JP      C,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#050F" title="$050F" target="_self">$050F</a>             ; ... 8 ... no saucer
06A6: 36 01           LD      (HL),$01            ; (2084) The saucer is on the screen
06A8: CD 3C 07        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#073C" title="$073C" target="_self">$073C</a>               ; Draw the flying saucer

<span class="siteTarget" id="06AB">0</span>6AB: 11 8A 20        LD      DE,$208A            ; Saucer's Y coordinate
06AE: CD 06 1A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#CompYToBeam" title="$1A06" target="_self">CompYToBeam</a>         ; Compare to beam position
06B1: D0              RET     NC                  ; Not the right ISR for moving saucer

06B2: 21 85 20        LD      HL,$2085            ; Saucer hit flag
06B5: 7E              LD      A,(HL)              ; Has saucer ...
06B6: A7              AND     A                   ; ... been hit?
06B7: C2 D6 06        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#06D6" title="$06D6" target="_self">$06D6</a>            ; Yes ... don't move it

06BA: 21 8A 20        LD      HL,$208A            ; Saucer's structure
06BD: 7E              LD      A,(HL)              ; Get saucer's Y coordinate
06BE: 23              INC     HL                  ; Bump to ...
06BF: 23              INC     HL                  ; ... delta Y
06C0: 86              ADD     A,(HL)              ; Move saucer
06C1: 32 8A 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#208A" title="$208A" target="TABLE_1">saucerPriPicMSB</a>),A ; New coordinate
06C4: CD 3C 07        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#073C" title="$073C" target="_self">$073C</a>               ; Draw the flying saucer
06C7: 21 8A 20        LD      HL,$208A            ; Saucer's structure
06CA: 7E              LD      A,(HL)              ; Y coordinate
06CB: FE 28           CP      $28                 ; Too low? End of screen?
06CD: DA F9 06        JP      C,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#06F9" title="$06F9" target="_self">$06F9</a>             ; Yes ... remove from play
06D0: FE E1           CP      $E1                 ; Too high? End of screen?
06D2: D2 F9 06        JP      NC,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#06F9" title="$06F9" target="_self">$06F9</a>            ; Yes ... remove from play
06D5: C9              RET                         ; Done

<span class="siteTarget" id="06D6">0</span>6D6: 06 FE           LD      B,$FE               ; Turn off ...
06D8: CD DC 19        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#SoundBits3Off" title="$19DC" target="_self">SoundBits3Off</a>       ; ... flying saucer sound
06DB: 23              INC     HL                  ; (2086) show-hit timer
06DC: 35              DEC     (HL)                ; Count down show-hit timer
06DD: 7E              LD      A,(HL)              ; Get current value
06DE: FE 1F           CP      $1F                 ; Starts at 20 ... is this the first tick of show-hit timer?
06E0: CA 4B 07        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#074B" title="$074B" target="_self">$074B</a>             ; Yes ... go show the explosion
06E3: FE 18           CP      $18                 ; A little later ...
06E5: CA 0C 07        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#070C" title="$070C" target="_self">$070C</a>             ; ... show the score besides the saucer and add it
06E8: A7              AND     A                   ; Has timer expired?
06E9: C0              RET     NZ                  ; No ... let it run
06EA: 06 EF           LD      B,$EF               ; 1110_1111 (mask off saucer hit sound)
06EC: 21 98 20        LD      HL,$2098            ; Get current ...
06EF: 7E              LD      A,(HL)              ; ... value of port 5 sound
06F0: A0              AND     B                   ; Mask off the saucer-hit sound
06F1: 77              LD      (HL),A              ; Set the new value
06F2: E6 20           AND     $20                 ; All sound off but ...
06F4: D3 05           OUT     (<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0005pw" title="$05" target="TABLE_2">SOUND2</a>),A          ; ... cocktail cabinet bit
06F6: 00              NOP                         ; ** Why
06F7: 00              NOP                         ; **
06F8: 00              NOP                         ; **
;
<span class="siteTarget" id="06F9">0</span>6F9: CD 42 07        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0742" title="$0742" target="_self">$0742</a>               ; Covert pixel pos from descriptor to HL screen and shift
06FC: CD CB 14        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ClearSmallSprite" title="$14CB" target="_self">ClearSmallSprite</a>    ; Clear a one byte sprite at HL
06FF: 21 83 20        LD      HL,$2083            ; Saucer structure
0702: 06 0A           LD      B,$0A               ; 10 bytes in saucer structure
0704: CD 5F 07        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#075F" title="$075F" target="_self">$075F</a>               ; Re-initialize saucer structure

<span class="siteTarget" id="0707">0</span>707: 06 FE           LD      B,$FE               ; Turn off UFO ...
0709: C3 DC 19        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#SoundBits3Off" title="$19DC" target="_self">SoundBits3Off</a>       ; ... sound and out

<span class="siteTarget" id="070C">0</span>70C: 3E 01           LD      A,$01               ; Flag the score ...
070E: 32 F1 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20F1" title="$20F1" target="TABLE_1">adjustScore</a>),A     ; ... needs updating
0711: 2A 8D 20        LD      HL,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#208D" title="$208D" target="TABLE_1">sauScoreLSB</a>)    ; Saucer score table
0714: 46              LD      B,(HL)              ; Get score for this saucer
0715: 0E 04           LD      C,$04               ; There are only 4 possibilities
0717: 21 50 1D        LD      HL,$1D50            ; Possible scores table
071A: 11 4C 1D        LD      DE,$1D4C            ; Print strings for each score
<span class="siteTarget" id="071D">0</span>71D: 1A              LD      A,(DE)              ; Find ...
071E: B8              CP      B                   ; ... the ...
071F: CA 28 07        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0728" title="$0728" target="_self">$0728</a>             ; ... print ...
0722: 23              INC     HL                  ; ... string ...
0723: 13              INC     DE                  ; ... for ...
0724: 0D              DEC     C                   ; ... the ...
0725: C2 1D 07        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#071D" title="$071D" target="_self">$071D</a>            ; ... score
<span class="siteTarget" id="0728">0</span>728: 7E              LD      A,(HL)              ; Get LSB of message (MSB is 2088 which is 1D)
0729: 32 87 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2087" title="$2087" target="TABLE_1">saucerPriLocLSB</a>),A ; Message's LSB (_50=1D94 100=1D97 150=1D9A 300=1D9D)
072C: 26 00           LD      H,$00               ; MSB = 0 ...
072E: 68              LD      L,B                 ; HL = B
072F: 29              ADD     HL,HL               ; *2
0730: 29              ADD     HL,HL               ; *4
0731: 29              ADD     HL,HL               ; *8
0732: 29              ADD     HL,HL               ; *16
0733: 22 F2 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20F2" title="$20F2" target="TABLE_1">scoreDeltaLSB</a>),HL  ; Add score for hitting saucer (015 becomes 150 in BCD).
0736: CD 42 07        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0742" title="$0742" target="_self">$0742</a>               ; Get the flying saucer score descriptor
0739: C3 F1 08        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#08F1" title="$08F1" target="_self">$08F1</a>               ; Print the three-byte score and out

<span class="siteTarget" id="073C">0</span>73C: CD 42 07        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0742" title="$0742" target="_self">$0742</a>               ; Draw the ...
073F: C3 39 14        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawSimpSprite" title="$1439" target="_self">DrawSimpSprite</a>      ; ... flying saucer

<span class="siteTarget" id="0742">0</span>742: 21 87 20        LD      HL,$2087            ; Read flying saucer ...
0745: CD 3B 1A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ReadDesc" title="$1A3B" target="_self">ReadDesc</a>            ; ... structure
0748: C3 47 1A        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ConvToScr" title="$1A47" target="_self">ConvToScr</a>           ; Convert pixel number to screen and shift and out
;
<span class="siteTarget" id="074B">0</span>74B: 06 10           LD      B,$10               ; Saucer hit sound bit
074D: 21 98 20        LD      HL,$2098            ; Current state of sounds
0750: 7E              LD      A,(HL)              ; OR ...
0751: B0              OR      B                   ; ... in ...
0752: 77              LD      (HL),A              ; ... saucer-hit sound
0753: CD 70 17        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1770" title="$1770" target="_self">$1770</a>               ; Turn off fleet sound and start saucer-hit
0756: 21 7C 1D        LD      HL,$1D7C            ; Sprite for saucer blowing up
0759: 22 87 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2087" title="$2087" target="TABLE_1">saucerPriLocLSB</a>),HL          ; Store it in structure
075C: C3 3C 07        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#073C" title="$073C" target="_self">$073C</a>               ; Draw the flying saucer
;
<span class="siteTarget" id="075F">0</span>75F: 11 83 1B        LD      DE,$1B83            ; Data for saucer (702 sets count to 0A)
0762: C3 32 1A        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#BlockCopy" title="$1A32" target="_self">BlockCopy</a>           ; Reset saucer object data


<span class="siteTarget" id="WaitForStart">W</span>aitForStart: 
; Wait for player 1 start button press
0765: 3E 01           LD      A,$01               ; Tell ISR that we ...
0767: 32 93 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2093" title="$2093" target="TABLE_1">waitStartLoop</a>),A   ; ... have started to wait
076A: 31 00 24        LD      SP,$2400            ; Reset stack
076D: FB              EI                          ; Enable interrupts
076E: CD 79 19        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1979" title="$1979" target="_self">$1979</a>               ; Suspend game tasks
0771: CD D6 09        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ClearPlayField" title="$09D6" target="_self">ClearPlayField</a>      ; Clear center window
0774: 21 13 30        LD      HL,$3013            ; Screen coordinates
0777: 11 F3 1F        LD      DE,$1FF3            ; "PRESS"
077A: 0E 04           LD      C,$04               ; Message length
077C: CD F3 08        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PrintMessage" title="$08F3" target="_self">PrintMessage</a>        ; Print it
<span class="siteTarget" id="077F">0</span>77F: 3A EB 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20EB" title="$20EB" target="TABLE_1">numCoins</a>)        ; Number of credits
0782: 3D              DEC     A                   ; Set flags
0783: 21 10 28        LD      HL,$2810            ; Screen coordinates
0786: 0E 14           LD      C,$14               ; Message length
0788: C2 57 08        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0857" title="$0857" target="_self">$0857</a>            ; Take 1 or 2 player start
078B: 11 CF 1A        LD      DE,$1ACF            ; "ONLY 1PLAYER BUTTON "
078E: CD F3 08        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PrintMessage" title="$08F3" target="_self">PrintMessage</a>        ; Print message
0791: DB 01           IN      A,(<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0001pr" title="$01" target="TABLE_2">INP1</a>)            ; Read player controls
0793: E6 04           AND     $04                 ; 1Player start button?
0795: CA 7F 07        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#077F" title="$077F" target="_self">$077F</a>             ; No ... wait for button or credit

;=============================================================
<span class="siteTarget" id="NewGame">N</span>ewGame: 
; START NEW GAME
;
; 1 Player start
0798: 06 99           LD      B,$99               ; Essentially a -1 for DAA
079A: AF              XOR     A                   ; Clear two player flag
;
; 2 player start sequence enters here with a=1 and B=98 (-2)
<span class="siteTarget" id="079B">0</span>79B: 32 CE 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20CE" title="$20CE" target="TABLE_1">twoPlayers</a>),A      ; Set flag for 1 or 2 players
079E: 3A EB 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20EB" title="$20EB" target="TABLE_1">numCoins</a>)        ; Number of credits
07A1: 80              ADD     A,B                 ; Take away credits
07A2: 27              DAA                         ; Convert back to DAA
07A3: 32 EB 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20EB" title="$20EB" target="TABLE_1">numCoins</a>),A        ; New credit count
07A6: CD 47 19        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawNumCredits" title="$1947" target="_self">DrawNumCredits</a>      ; Display number of credits
07A9: 21 00 00        LD      HL,$0000            ; Score of 0000
07AC: 22 F8 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20F8" title="$20F8" target="TABLE_1">P1ScorL</a>),HL        ; Clear player-1 score
07AF: 22 FC 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20FC" title="$20FC" target="TABLE_1">P2ScorL</a>),HL        ; CLear player-2 score
07B2: CD 25 19        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1925" title="$1925" target="_self">$1925</a>               ; Print player-1 score
07B5: CD 2B 19        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#192B" title="$192B" target="_self">$192B</a>               ; Print player-2 score
07B8: CD D7 19        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DsableGameTasks" title="$19D7" target="_self">DsableGameTasks</a>     ; Disable game tasks
07BB: 21 01 01        LD      HL,$0101            ; Two bytes 1, 1
07BE: 7C              LD      A,H                 ; 1 to A
07BF: 32 EF 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20EF" title="$20EF" target="TABLE_1">gameMode</a>),A        ; 20EF=1 ... game mode
07C2: 22 E7 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20E7" title="$20E7" target="TABLE_1">player1Alive</a>),HL   ; 20E7 and 20E8 both one ... players 1 and 2 are alive
07C5: 22 E5 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20E5" title="$20E5" target="TABLE_1">player1Ex</a>),HL      ; Extra-ship is available for player-1 and player-2
07C8: CD 56 19        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawStatus" title="$1956" target="_self">DrawStatus</a>          ; Print scores and credits
07CB: CD EF 01        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawShieldPl1" title="$01EF" target="_self">DrawShieldPl1</a>       ; Draw shields for player-1
07CE: CD F5 01        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawShieldPl2" title="$01F5" target="_self">DrawShieldPl2</a>       ; Draw shields for player-2
07D1: CD D1 08        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#GetShipsPerCred" title="$08D1" target="_self">GetShipsPerCred</a>     ; Get number of ships from DIP settings
07D4: 32 FF 21        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#21FF" title="$21FF" target="TABLE_1">p1ShipsRem</a>),A      ; Player-1 ships
07D7: 32 FF 22        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#22FF" title="$22FF" target="TABLE_1">p2ShipsRem</a>),A      ; Player-2 ships
07DA: CD D7 00        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#00D7" title="$00D7" target="_self">$00D7</a>               ; Set player-1 and player-2 alien racks going right
07DD: AF              XOR     A                   ; Make a 0
07DE: 32 FE 21        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#21FE" title="$21FE" target="TABLE_1">p1RackCnt</a>),A       ; Player 1 is on first rack of aliens
07E1: 32 FE 22        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#22FE" title="$22FE" target="TABLE_1">p2RackCnt</a>),A       ; Player 2 is on first rack of aliens
07E4: CD C0 01        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#InitAliens" title="$01C0" target="_self">InitAliens</a>          ; Initialize 55 aliens for player 1
07E7: CD 04 19        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#InitAliensP2" title="$1904" target="_self">InitAliensP2</a>        ; Initialize 55 aliens for player 2
07EA: 21 78 38        LD      HL,$3878            ; Screen coordinates for lower-left alien
07ED: 22 FC 21        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#21FC" title="$21FC" target="TABLE_1">p1RefAlienY</a>),HL    ; Initialize reference alien for player 1
07F0: 22 FC 22        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#22FC" title="$22FC" target="TABLE_1">p2RefAlienYr</a>),HL   ; Initialize reference alien for player 2
07F3: CD E4 01        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#CopyRAMMirror" title="$01E4" target="_self">CopyRAMMirror</a>       ; Copy ROM mirror to RAM (2000 - 20C0)
07F6: CD 7F 1A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#RemoveShip" title="$1A7F" target="_self">RemoveShip</a>          ; Initialize ship hold indicator
;
<span class="siteTarget" id="07F9">0</span>7F9: CD 8D 08        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PromptPlayer" title="$088D" target="_self">PromptPlayer</a>        ; Prompt with "PLAY PLAYER "
07FC: CD D6 09        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ClearPlayField" title="$09D6" target="_self">ClearPlayField</a>      ; Clear the playfield
07FF: 00              NOP                         ; % Why?
0800: AF              XOR     A                   ; Make a 0
0801: 32 C1 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20C1" title="$20C1" target="TABLE_1">isrSplashTask</a>),A   ; Disable isr splash-task animation
<span class="siteTarget" id="0804">0</span>804: CD CF 01        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawBottomLine" title="$01CF" target="_self">DrawBottomLine</a>      ; Draw line across screen under player
0807: 3A 67 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2067" title="$2067" target="TABLE_1">playerDataMSB</a>)   ; Current player
080A: 0F              RRCA                        ; Right bit tells all
080B: DA 72 08        JP      C,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0872" title="$0872" target="_self">$0872</a>             ; Go do player 1
;
080E: CD 13 02        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#RestoreShields2" title="$0213" target="_self">RestoreShields2</a>     ; Restore shields for player 2
0811: CD CF 01        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawBottomLine" title="$01CF" target="_self">DrawBottomLine</a>      ; Draw line across screen under player
<span class="siteTarget" id="0814">0</span>814: CD B1 00        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#InitRack" title="$00B1" target="_self">InitRack</a>            ; Initialize alien rack for current player
<span class="siteTarget" id="0817">0</span>817: CD D1 19        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#EnableGameTasks" title="$19D1" target="_self">EnableGameTasks</a>     ; Enable game tasks in ISR
081A: 06 20           LD      B,$20               ; Enable ...
081C: CD FA 18        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#SoundBits3On" title="$18FA" target="_self">SoundBits3On</a>        ; ... sound amplifier
;
; GAME LOOP
;
<span class="siteTarget" id="081F">0</span>81F: CD 18 16        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PlrFireOrDemo" title="$1618" target="_self">PlrFireOrDemo</a>       ; Initiate player shot if button pressed
0822: CD 0A 19        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PlyrShotAndBump" title="$190A" target="_self">PlyrShotAndBump</a>     ; Collision detect player's shot and rack-bump
0825: CD F3 15        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#CountAliens" title="$15F3" target="_self">CountAliens</a>         ; Count aliens (count to 2082)
0828: CD 88 09        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#AdjustScore" title="$0988" target="_self">AdjustScore</a>         ; Adjust score (and print) if there is an adjustment
082B: 3A 82 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2082" title="$2082" target="TABLE_1">numAliens</a>)       ; Number of live aliens
082E: A7              AND     A                   ; All aliens gone?
082F: CA EF 09        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#09EF" title="$09EF" target="_self">$09EF</a>             ; Yes ... end of turn
0832: CD 0E 17        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#AShotReloadRate" title="$170E" target="_self">AShotReloadRate</a>     ; Update alien-shot-rate based on player's score
0835: CD 35 09        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0935" title="$0935" target="_self">$0935</a>               ; Check (and handle) extra ship award
0838: CD D8 08        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#SpeedShots" title="$08D8" target="_self">SpeedShots</a>          ; Adjust alien shot speed
083B: CD 2C 17        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ShotSound" title="$172C" target="_self">ShotSound</a>           ; Shot sound on or off with 2025
083E: CD 59 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0A59" title="$0A59" target="_self">$0A59</a>               ; Check if player is hit
0841: CA 49 08        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0849" title="$0849" target="_self">$0849</a>             ; No hit ... jump handler
0844: 06 04           LD      B,$04               ; Player hit sound
0846: CD FA 18        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#SoundBits3On" title="$18FA" target="_self">SoundBits3On</a>        ; Make explosion sound
<span class="siteTarget" id="0849">0</span>849: CD 75 17        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#FleetDelayExShip" title="$1775" target="_self">FleetDelayExShip</a>    ; Extra-ship sound timer, set fleet-delay, play fleet movement sound
084C: D3 06           OUT     (<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0006pw" title="$06" target="TABLE_2">WATCHDOG</a>),A        ; Feed the watchdog
084E: CD 04 18        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#CtrlSaucerSound" title="$1804" target="_self">CtrlSaucerSound</a>     ; Control saucer sound
0851: C3 1F 08        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#081F" title="$081F" target="_self">$081F</a>               ; Continue game loop

0854: 00 00 00                                    ; ** Why?

; Test for 1 or 2 player start button press
<span class="siteTarget" id="0857">0</span>857: 11 BA 1A        LD      DE,$1ABA            ; "1 OR 2PLAYERS BUTTON"
085A: CD F3 08        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PrintMessage" title="$08F3" target="_self">PrintMessage</a>        ; Print message
085D: 06 98           LD      B,$98               ; -2 (take away 2 credits)
085F: DB 01           IN      A,(<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0001pr" title="$01" target="TABLE_2">INP1</a>)            ; Read player controls
0861: 0F              RRCA                        ; Test ...
0862: 0F              RRCA                        ; ... bit 2
0863: DA 6D 08        JP      C,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#086D" title="$086D" target="_self">$086D</a>             ; 2 player button pressed ... do it
0866: 0F              RRCA                        ; Test bit 3
0867: DA 98 07        JP      C,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#NewGame" title="$0798" target="_self">NewGame</a>           ; One player start ... do it
086A: C3 7F 07        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#077F" title="$077F" target="_self">$077F</a>               ; Keep waiting on credit or button
; 2 PLAYER START
<span class="siteTarget" id="086D">0</span>86D: 3E 01           LD      A,$01               ; Flag 2 player game
086F: C3 9B 07        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#079B" title="$079B" target="_self">$079B</a>               ; Continue normal startup

<span class="siteTarget" id="0872">0</span>872: CD 1A 02        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#RestoreShields1" title="$021A" target="_self">RestoreShields1</a>     ; Restore shields for player 1
0875: C3 14 08        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0814" title="$0814" target="_self">$0814</a>               ; Continue in game loop

<span class="siteTarget" id="0878">0</span>878: 3A 08 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2008" title="$2008" target="TABLE_1">refAlienDXr</a>)     ; Alien deltaY
087B: 47              LD      B,A                 ; Hold it
087C: 2A 09 20        LD      HL,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2009" title="$2009" target="TABLE_1">refAlienYr</a>)     ; Alien coordinates
087F: EB              EX      DE,HL               ; Coordinates to DE
0880: C3 86 08        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#GetAlRefPtr" title="$0886" target="_self">GetAlRefPtr</a>         ; HL is 21FC or 22FC and out

0883: 00 00 00                                    ; ** Why?

<span class="siteTarget" id="GetAlRefPtr">G</span>etAlRefPtr: 
; Get pointer to player's alien ref coordiantes
0886: 3A 67 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2067" title="$2067" target="TABLE_1">playerDataMSB</a>)   ; Player data MSB (21 or 22)
0889: 67              LD      H,A                 ; To H
088A: 2E FC           LD      L,$FC               ; 21FC or 22FC ... alien coordinates
088C: C9              RET                         ; Done

<span class="siteTarget" id="PromptPlayer">P</span>romptPlayer: 
; Print "PLAY PLAYER <n>" and blink score for 2 seconds.
;
088D: 21 11 2B        LD      HL,$2B11            ; Screen coordinates
0890: 11 70 1B        LD      DE,$1B70            ; Message "PLAY PLAYER&lt;1&gt;"
0893: 0E 0E           LD      C,$0E               ; 14 bytes in message
0895: CD F3 08        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PrintMessage" title="$08F3" target="_self">PrintMessage</a>        ; Print the message
0898: 3A 67 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2067" title="$2067" target="TABLE_1">playerDataMSB</a>)   ; Get the player number
089B: 0F              RRCA                        ; C will be set for player 1
089C: 3E 1C           LD      A,$1C               ; The "2" character
089E: 21 11 37        LD      HL,$3711            ; Replace the "&lt;1&gt;" with "&lt;2"&gt;
08A1: D4 FF 08        CALL    NC,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawChar" title="$08FF" target="_self">DrawChar</a>         ; If player 2 ... change the message
08A4: 3E B0           LD      A,$B0               ; Delay of 176 (roughly 2 seconds)
08A6: 32 C0 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20C0" title="$20C0" target="TABLE_1">isrDelay</a>),A        ; Set the ISR delay value
;
<span class="siteTarget" id="08A9">0</span>8A9: 3A C0 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20C0" title="$20C0" target="TABLE_1">isrDelay</a>)        ; Get the ISR delay value
08AC: A7              AND     A                   ; Has the 2 second delay expired?
08AD: C8              RET     Z                   ; Yes ... done
08AE: E6 04           AND     $04                 ; Every 4 ISRs ...
08B0: C2 BC 08        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#08BC" title="$08BC" target="_self">$08BC</a>            ; ... flash the player's score
08B3: CD CA 09        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#09CA" title="$09CA" target="_self">$09CA</a>               ; Get the score descriptor for the active player
08B6: CD 31 19        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawScore" title="$1931" target="_self">DrawScore</a>           ; Draw the score
08B9: C3 A9 08        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#08A9" title="$08A9" target="_self">$08A9</a>               ; Back to the top of the wait loop
;
<span class="siteTarget" id="08BC">0</span>8BC: 06 20           LD      B,$20               ; 32 rows (4 characters * 8 bytes each)
08BE: 21 1C 27        LD      HL,$271C            ; Player-1 score on the screen
08C1: 3A 67 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2067" title="$2067" target="TABLE_1">playerDataMSB</a>)   ; Get the player number
08C4: 0F              RRCA                        ; C will be set for player 1
08C5: DA CB 08        JP      C,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#08CB" title="$08CB" target="_self">$08CB</a>             ; We have the right score coordinates
08C8: 21 1C 39        LD      HL,$391C            ; Use coordinates for player-2's score
<span class="siteTarget" id="08CB">0</span>8CB: CD CB 14        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ClearSmallSprite" title="$14CB" target="_self">ClearSmallSprite</a>    ; Clear a one byte sprite at HL
08CE: C3 A9 08        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#08A9" title="$08A9" target="_self">$08A9</a>               ; Back to the top of the wait loop


<span class="siteTarget" id="GetShipsPerCred">G</span>etShipsPerCred: 
; Get number of ships from DIP settings
08D1: DB 02           IN      A,(<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0002pr" title="$02" target="TABLE_2">INP2</a>)            ; DIP settings
08D3: E6 03           AND     $03                 ; Get number of ships
08D5: C6 03           ADD     A,$03               ; From 3-6
08D7: C9              RET                         ; Out

<span class="siteTarget" id="SpeedShots">S</span>peedShots: 
; With less than 9 aliens on the screen the alien shots get a tad bit faster. Probably
; because the advancing rack can catch them.
;
08D8: 3A 82 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2082" title="$2082" target="TABLE_1">numAliens</a>)       ; Number of aliens on screen
08DB: FE 09           CP      $09                 ; More than 8?
08DD: D0              RET     NC                  ; Yes ... leave shot speed alone
08DE: 3E FB           LD      A,$FB               ; Normally FF (-1) ... now FB (-4)
08E0: 32 7E 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#207E" title="$207E" target="TABLE_1">alienShotDelta</a>),A  ; Speed up alien shots
08E3: C9              RET                         ; Done

<span class="siteTarget" id="08E4">0</span>8E4: 3A CE 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20CE" title="$20CE" target="TABLE_1">twoPlayers</a>)      ; Number of players
08E7: A7              AND     A                   ; Skip if ...
08E8: C0              RET     NZ                  ; ... two player
08E9: 21 1C 39        LD      HL,$391C            ; Player 2's score
08EC: 06 20           LD      B,$20               ; 32 rows is 4 digits * 8 rows each
08EE: C3 CB 14        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ClearSmallSprite" title="$14CB" target="_self">ClearSmallSprite</a>    ; Clear a one byte sprite (32 rows long) at HL

<span class="siteTarget" id="08F1">0</span>8F1: 0E 03           LD      C,$03               ; Length of saucer-score message ... fall into print

<span class="siteTarget" id="PrintMessage">P</span>rintMessage: 
; Print a message on the screen
; HL = coordinates
; DE = message buffer
; C = length
08F3: 1A              LD      A,(DE)              ; Get character
08F4: D5              PUSH    DE                  ; Preserve
08F5: CD FF 08        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawChar" title="$08FF" target="_self">DrawChar</a>            ; Print character
08F8: D1              POP     DE                  ; Restore
08F9: 13              INC     DE                  ; Next character
08FA: 0D              DEC     C                   ; All done?
08FB: C2 F3 08        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PrintMessage" title="$08F3" target="_self">PrintMessage</a>     ; Print all of message
08FE: C9              RET                         ; Out

;=============================================================
<span class="siteTarget" id="DrawChar">D</span>rawChar: 
; Get pointer to 8 byte sprite number in A and
; draw sprite on screen at HL
08FF: 11 00 1E        LD      DE,$1E00            ; Character set
0902: E5              PUSH    HL                  ; Preserve
0903: 26 00           LD      H,$00               ; MSB=0
0905: 6F              LD      L,A                 ; Character number to L
0906: 29              ADD     HL,HL               ; HL = HL *2
0907: 29              ADD     HL,HL               ; *4
0908: 29              ADD     HL,HL               ; *8 (8 bytes each)
0909: 19              ADD     HL,DE               ; Get pointer to sprite
090A: EB              EX      DE,HL               ; Now into DE
090B: E1              POP     HL                  ; Restore HL
090C: 06 08           LD      B,$08               ; 8 bytes each
090E: D3 06           OUT     (<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0006pw" title="$06" target="TABLE_2">WATCHDOG</a>),A        ; Feed watchdog
0910: C3 39 14        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawSimpSprite" title="$1439" target="_self">DrawSimpSprite</a>      ; To screen

<span class="siteTarget" id="TimeToSaucer">T</span>imeToSaucer: 
0913: 3A 09 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2009" title="$2009" target="TABLE_1">refAlienYr</a>)      ; Reference alien's X coordinate
0916: FE 78           CP      $78                 ; Don't process saucer timer ... ($78 is 1st rack Yr)
0918: D0              RET     NC                  ; ... unless aliens are closer to bottom
0919: 2A 91 20        LD      HL,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2091" title="$2091" target="TABLE_1">tillSaucerLSB</a>)  ; Time to saucer
091C: 7D              LD      A,L                 ; Is it time ...
091D: B4              OR      H                   ; ... for a saucer
091E: C2 29 09        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0929" title="$0929" target="_self">$0929</a>            ; No ... skip flagging
0921: 21 00 06        LD      HL,$0600            ; Reset timer to 600 game loops
0924: 3E 01           LD      A,$01               ; Flag a ...
0926: 32 83 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2083" title="$2083" target="TABLE_1">saucerStart</a>),A     ; ... saucer sequence
<span class="siteTarget" id="0929">0</span>929: 2B              DEC     HL                  ; Decrement the ...
092A: 22 91 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2091" title="$2091" target="TABLE_1">tillSaucerLSB</a>),HL  ; ... time-to-saucer
092D: C9              RET                         ; Done

;=============================================================
; Get number of ships for acive player
<span class="siteTarget" id="092E">0</span>92E: CD 11 16        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#GetPlayerDataPtr" title="$1611" target="_self">GetPlayerDataPtr</a>    ; HL points to player data
0931: 2E FF           LD      L,$FF               ; Last byte = numbe of ships
0933: 7E              LD      A,(HL)              ; Get number of ships
0934: C9              RET                         ; Done

;=============================================================
; Award extra ship if score has reached ceiling
<span class="siteTarget" id="0935">0</span>935: CD 10 19        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#CurPlyAlive" title="$1910" target="_self">CurPlyAlive</a>         ; Get descriptor of sorts
0938: 2B              DEC     HL                  ; Back up ...
0939: 2B              DEC     HL                  ; ... two bytes
093A: 7E              LD      A,(HL)              ; Has extra ship ...
093B: A7              AND     A                   ; already been awarded?
093C: C8              RET     Z                   ; Yes ... ignore
093D: 06 15           LD      B,$15               ; Default 1500
093F: DB 02           IN      A,(<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0002pr" title="$02" target="TABLE_2">INP2</a>)            ; Read DIP settings
0941: E6 08           AND     $08                 ; Extra ship at 1000 or 1500
0943: CA 48 09        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0948" title="$0948" target="_self">$0948</a>             ; 0=1500
0946: 06 10           LD      B,$10               ; Awarded at 1000
<span class="siteTarget" id="0948">0</span>948: CD CA 09        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#09CA" title="$09CA" target="_self">$09CA</a>               ; Get score descriptor for active player
094B: 23              INC     HL                  ; MSB of score ...
094C: 7E              LD      A,(HL)              ; ... to accumulator
094D: B8              CP      B                   ; Time for an extra ship?
094E: D8              RET     C                   ; No ... out
094F: CD 2E 09        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#092E" title="$092E" target="_self">$092E</a>               ; Get pointer to number of ships
0952: 34              INC     (HL)                ; Bump number of ships
0953: 7E              LD      A,(HL)              ; Get the new total
0954: F5              PUSH    AF                  ; Hang onto it for a bit
0955: 21 01 25        LD      HL,$2501            ; Screen coords for ship hold
<span class="siteTarget" id="0958">0</span>958: 24              INC     H                   ; Bump to ...
0959: 24              INC     H                   ; ... next
095A: 3D              DEC     A                   ; ... spot
095B: C2 58 09        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0958" title="$0958" target="_self">$0958</a>            ; Find spot for new ship
095E: 06 10           LD      B,$10               ; 16 byte sprite
0960: 11 60 1C        LD      DE,$1C60            ; Player sprite
0963: CD 39 14        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawSimpSprite" title="$1439" target="_self">DrawSimpSprite</a>      ; Draw the sprite
0966: F1              POP     AF                  ; Restore the count
0967: 3C              INC     A                   ; +1
0968: CD 8B 1A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1A8B" title="$1A8B" target="_self">$1A8B</a>               ; Print the number of ships
096B: CD 10 19        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#CurPlyAlive" title="$1910" target="_self">CurPlyAlive</a>         ; Get descriptor for active player of some sort
096E: 2B              DEC     HL                  ; Back up ...
096F: 2B              DEC     HL                  ; ... two bytes
0970: 36 00           LD      (HL),$00            ; Flag extra ship has been awarded
0972: 3E FF           LD      A,$FF               ; Set timer ...
0974: 32 99 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2099" title="$2099" target="TABLE_1">extraHold</a>),A       ; ... for extra-ship sound
0977: 06 10           LD      B,$10               ; Make sound ...
0979: C3 FA 18        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#SoundBits3On" title="$18FA" target="_self">SoundBits3On</a>        ; ... for extra man

<span class="siteTarget" id="AlienScoreValue">A</span>lienScoreValue: 
097C: 21 A0 1D        LD      HL,$1DA0            ; Table for scores for hitting alien
097F: FE 02           CP      $02                 ; 0 or 1 (lower two rows) ...
0981: D8              RET     C                   ; ... return HL points to value 10
0982: 23              INC     HL                  ; next value
0983: FE 04           CP      $04                 ; 2 or 3 (middle two rows) ...
0985: D8              RET     C                   ; ... return HL points to value 20
0986: 23              INC     HL                  ; Top row ...
0987: C9              RET                         ; ... return HL points to value 30

<span class="siteTarget" id="AdjustScore">A</span>djustScore: 
; Adjust the score for the active player. 20F1 is 1 if there is a new value to add.
; The adjustment is in 20F2,20F3. Then print the score.
0988: CD CA 09        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#09CA" title="$09CA" target="_self">$09CA</a>               ; Get score structure for active player
098B: 3A F1 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20F1" title="$20F1" target="TABLE_1">adjustScore</a>)     ; Does the score ...
098E: A7              AND     A                   ; ... need increasing?
098F: C8              RET     Z                   ; No ... done
0990: AF              XOR     A                   ; Mark score ...
0991: 32 F1 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20F1" title="$20F1" target="TABLE_1">adjustScore</a>),A     ; ... as adjusted
0994: E5              PUSH    HL                  ; Hold the pointer to the structure
0995: 2A F2 20        LD      HL,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20F2" title="$20F2" target="TABLE_1">scoreDeltaLSB</a>)  ; Get requested adjustment
0998: EB              EX      DE,HL               ; Adjustment to DE
0999: E1              POP     HL                  ; Get back pointer to structure
099A: 7E              LD      A,(HL)              ; Add adjustment ...
099B: 83              ADD     A,E                 ; ... first byte
099C: 27              DAA                         ; Adjust it for BCD
099D: 77              LD      (HL),A              ; Store new LSB
099E: 5F              LD      E,A                 ; Add adjustment ...
099F: 23              INC     HL                  ; ... to ...
09A0: 7E              LD      A,(HL)              ; ... second ...
09A1: 8A              ADC     A,D                 ; ... byte
09A2: 27              DAA                         ; Adjust for BCD (cary gets dropped)
09A3: 77              LD      (HL),A              ; Store second byte
09A4: 57              LD      D,A                 ; Second byte to D (first byte still in E)
09A5: 23              INC     HL                  ; Load ...
09A6: 7E              LD      A,(HL)              ; ... the ...
09A7: 23              INC     HL                  ; ... screen ...
09A8: 66              LD      H,(HL)              ; ... coordinates ...
09A9: 6F              LD      L,A                 ; ... to HL
09AA: C3 AD 09        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#Print4Digits" title="$09AD" target="_self">Print4Digits</a>        ; ** Usually a good idea, but wasted here

<span class="siteTarget" id="Print4Digits">P</span>rint4Digits: 
; Print 4 digits in DE
09AD: 7A              LD      A,D                 ; Get first 2 digits of BCD or hex
09AE: CD B2 09        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawHexByte" title="$09B2" target="_self">DrawHexByte</a>         ; Print them
09B1: 7B              LD      A,E                 ; Get second 2 digits of BCD or hex (fall into print)

<span class="siteTarget" id="DrawHexByte">D</span>rawHexByte: 
; Display 2 digits in A to screen at HL
09B2: D5              PUSH    DE                  ; Preserve
09B3: F5              PUSH    AF                  ; Save for later
09B4: 0F              RRCA                        ; Get ...
09B5: 0F              RRCA                        ; ...
09B6: 0F              RRCA                        ; ...
09B7: 0F              RRCA                        ; ... left digit
09B8: E6 0F           AND     $0F                 ; Mask out lower digit's bits
09BA: CD C5 09        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#09C5" title="$09C5" target="_self">$09C5</a>               ; To screen at HL
09BD: F1              POP     AF                  ; Restore digit
09BE: E6 0F           AND     $0F                 ; Mask out upper digit
09C0: CD C5 09        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#09C5" title="$09C5" target="_self">$09C5</a>               ; To screen
09C3: D1              POP     DE                  ; Restore
09C4: C9              RET                         ; Done
;
<span class="siteTarget" id="09C5">0</span>9C5: C6 1A           ADD     A,$1A               ; Bump to number characters
09C7: C3 FF 08        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawChar" title="$08FF" target="_self">DrawChar</a>            ; Continue ...

; Get score descriptor for active player
<span class="siteTarget" id="09CA">0</span>9CA: 3A 67 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2067" title="$2067" target="TABLE_1">playerDataMSB</a>)   ; Get active player
09CD: 0F              RRCA                        ; Test for player
09CE: 21 F8 20        LD      HL,$20F8            ; Player 1 score descriptor
09D1: D8              RET     C                   ; Keep it if player 1 is active
09D2: 21 FC 20        LD      HL,$20FC            ; Else get player 2 descriptor
09D5: C9              RET                         ; Out

<span class="siteTarget" id="ClearPlayField">C</span>learPlayField: 
; Clear center window of screen
09D6: 21 02 24        LD      HL,$2402            ; Thrid from left, top of screen
<span class="siteTarget" id="09D9">0</span>9D9: 36 00           LD      (HL),$00            ; Clear screen byte
09DB: 23              INC     HL                  ; Next in row
09DC: 7D              LD      A,L                 ; Get X ...
09DD: E6 1F           AND     $1F                 ; ... coordinate
09DF: FE 1C           CP      $1C                 ; Edge minus a buffer?
09E1: DA E8 09        JP      C,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#09E8" title="$09E8" target="_self">$09E8</a>             ; No ... keep going
09E4: 11 06 00        LD      DE,$0006            ; Else ... bump to
09E7: 19              ADD     HL,DE               ; ... next edge + buffer
<span class="siteTarget" id="09E8">0</span>9E8: 7C              LD      A,H                 ; Get Y coordinate
09E9: FE 40           CP      $40                 ; Reached bottom?
09EB: DA D9 09        JP      C,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#09D9" title="$09D9" target="_self">$09D9</a>             ; No ... keep going
09EE: C9              RET                         ; Done

<span class="siteTarget" id="09EF">0</span>9EF: CD 3C 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0A3C" title="$0A3C" target="_self">$0A3C</a>               ;
09F2: AF              XOR     A                   ; Suspend ...
09F3: 32 E9 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20E9" title="$20E9" target="TABLE_1">suspendPlay</a>),A     ; ... ISR game tasks
09F6: CD D6 09        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ClearPlayField" title="$09D6" target="_self">ClearPlayField</a>      ; Clear playfield
09F9: 3A 67 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2067" title="$2067" target="TABLE_1">playerDataMSB</a>)   ; Hold current player number ...
09FC: F5              PUSH    AF                  ; ... on stack
09FD: CD E4 01        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#CopyRAMMirror" title="$01E4" target="_self">CopyRAMMirror</a>       ; Block copy RAM mirror from ROM
0A00: F1              POP     AF                  ; Restore ...
0A01: 32 67 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2067" title="$2067" target="TABLE_1">playerDataMSB</a>),A   ; ... current player number
0A04: 3A 67 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2067" title="$2067" target="TABLE_1">playerDataMSB</a>)   ; ** Why load this again? Nobody ever jumps to 0A04?
0A07: 67              LD      H,A                 ; To H
0A08: E5              PUSH    HL                  ; Hold player-data pointer
0A09: 2E FE           LD      L,$FE               ; 2xFE ... rack count
0A0B: 7E              LD      A,(HL)              ; Get the number of racks the player has beaten
0A0C: E6 07           AND     $07                 ; 0-7
0A0E: 3C              INC     A                   ; Now 1-8
0A0F: 77              LD      (HL),A              ; Update count since player just beat a rack
0A10: 21 A2 1D        LD      HL,$1DA2            ; Starting coordinate of alien table
<span class="siteTarget" id="0A13">0</span>A13: 23              INC     HL                  ; Find the ...
0A14: 3D              DEC     A                   ; ... right entry ...
0A15: C2 13 0A        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0A13" title="$0A13" target="_self">$0A13</a>            ; ... in the table
0A18: 7E              LD      A,(HL)              ; Get the starting Y coordiante
0A19: E1              POP     HL                  ; Restore player's pointer
0A1A: 2E FC           LD      L,$FC               ; 2xFC ... 
0A1C: 77              LD      (HL),A              ; Set rack's starting Y coordinate
0A1D: 23              INC     HL                  ; Point to X
0A1E: 36 38           LD      (HL),$38            ; Set rack's starting X coordinate to 38
0A20: 7C              LD      A,H                 ; Player ...
0A21: 0F              RRCA                        ; ... number to carry
0A22: DA 33 0A        JP      C,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0A33" title="$0A33" target="_self">$0A33</a>             ; 2nd player stuff
0A25: 3E 21           LD      A,$21               ; Start fleet with ...
0A27: 32 98 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2098" title="$2098" target="TABLE_1">soundPort5</a>),A      ; ... first sound
0A2A: CD F5 01        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawShieldPl2" title="$01F5" target="_self">DrawShieldPl2</a>       ; Draw shields for player 2
0A2D: CD 04 19        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#InitAliensP2" title="$1904" target="_self">InitAliensP2</a>        ; Initalize aliens for player 2
0A30: C3 04 08        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0804" title="$0804" target="_self">$0804</a>               ; Continue at top of game loop
;
<span class="siteTarget" id="0A33">0</span>A33: CD EF 01        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawShieldPl1" title="$01EF" target="_self">DrawShieldPl1</a>       ; Draw shields for player 1
0A36: CD C0 01        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#InitAliens" title="$01C0" target="_self">InitAliens</a>          ; Initialize aliens for player 1
0A39: C3 04 08        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0804" title="$0804" target="_self">$0804</a>               ; Continue at top of game loop
;
<span class="siteTarget" id="0A3C">0</span>A3C: CD 59 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0A59" title="$0A59" target="_self">$0A59</a>               ; Check player collision
0A3F: C2 52 0A        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0A52" title="$0A52" target="_self">$0A52</a>            ; Player is not alive ... skip delay
0A42: 3E 30           LD      A,$30               ; Half second delay
0A44: 32 C0 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20C0" title="$20C0" target="TABLE_1">isrDelay</a>),A        ; Set ISR timer
<span class="siteTarget" id="0A47">0</span>A47: 3A C0 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20C0" title="$20C0" target="TABLE_1">isrDelay</a>)        ; Has timer expired?
0A4A: A7              AND     A                   ; Check exipre
0A4B: C8              RET     Z                   ; Out if done
0A4C: CD 59 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0A59" title="$0A59" target="_self">$0A59</a>               ; Check player collision
0A4F: CA 47 0A        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0A47" title="$0A47" target="_self">$0A47</a>             ; No collision ... wait on timer
<span class="siteTarget" id="0A52">0</span>A52: CD 59 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0A59" title="$0A59" target="_self">$0A59</a>               ; Wait for ...
0A55: C2 52 0A        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0A52" title="$0A52" target="_self">$0A52</a>            ; ... collision to end
0A58: C9              RET                         ; Done

; Check to see if player is hit
<span class="siteTarget" id="0A59">0</span>A59: 3A 15 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2015" title="$2015" target="TABLE_1">playerAlive</a>)     ; Active player hit flag
0A5C: FE FF           CP      $FF                 ; All FFs means player is OK
0A5E: C9              RET                         ; Out

<span class="siteTarget" id="ScoreForAlien">S</span>coreForAlien: 
; Start the hit-alien sound and flag the adjustment for the score.
; B contains the row, which determines the score value.
0A5F: 3A EF 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20EF" title="$20EF" target="TABLE_1">gameMode</a>)        ; Are we in ...
0A62: A7              AND     A                   ; ... game mode?
0A63: CA 7C 0A        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0A7C" title="$0A7C" target="_self">$0A7C</a>             ; No ... skip scoring in demo
0A66: 48              LD      C,B                 ; Hold row number
0A67: 06 08           LD      B,$08               ; Alien hit sound
0A69: CD FA 18        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#SoundBits3On" title="$18FA" target="_self">SoundBits3On</a>        ; Enable sound
0A6C: 41              LD      B,C                 ; Restore row number
0A6D: 78              LD      A,B                 ; Into A
0A6E: CD 7C 09        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#AlienScoreValue" title="$097C" target="_self">AlienScoreValue</a>     ; Look up the score for the alien
0A71: 7E              LD      A,(HL)              ; Get the score value
0A72: 21 F3 20        LD      HL,$20F3            ; Pointer to score delta
0A75: 36 00           LD      (HL),$00            ; Upper byte of score delta is "00"
0A77: 2B              DEC     HL                  ; Point to score delta LSB
0A78: 77              LD      (HL),A              ; Set score for hitting alien
0A79: 2B              DEC     HL                  ; Point to adjust-score-flag
0A7A: 36 01           LD      (HL),$01            ; The score will get changed elsewhere
<span class="siteTarget" id="0A7C">0</span>A7C: 21 62 20        LD      HL,$2062            ; Return exploding-alien descriptor
0A7F: C9              RET                         ; Out

<span class="siteTarget" id="Animate">A</span>nimate: 
; Start the ISR moving the sprite. Return when done.
0A80: 3E 02           LD      A,$02               ; Start simple linear ...
0A82: 32 C1 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20C1" title="$20C1" target="TABLE_1">isrSplashTask</a>),A   ; ... sprite animation (splash)
<span class="siteTarget" id="0A85">0</span>A85: D3 06           OUT     (<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0006pw" title="$06" target="TABLE_2">WATCHDOG</a>),A        ; Feed watchdog
0A87: 3A CB 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20CB" title="$20CB" target="TABLE_1">splashReached</a>)   ; Has the ...
0A8A: A7              AND     A                   ; ... sprite reached target?
0A8B: CA 85 0A        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0A85" title="$0A85" target="_self">$0A85</a>             ; No ... wait
0A8E: AF              XOR     A                   ; Stop ...
0A8F: 32 C1 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20C1" title="$20C1" target="TABLE_1">isrSplashTask</a>),A   ; ... ISR animation
0A92: C9              RET                         ; Done

<span class="siteTarget" id="PrintMessageDel">P</span>rintMessageDel: 
; Print message from DE to screen at HL (length in C) with a
; delay between letters.
0A93: D5              PUSH    DE                  ; Preserve
0A94: 1A              LD      A,(DE)              ; Get character
0A95: CD FF 08        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawChar" title="$08FF" target="_self">DrawChar</a>            ; Draw character on screen
0A98: D1              POP     DE                  ; Preserve
0A99: 3E 07           LD      A,$07               ; Delay between letters
0A9B: 32 C0 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20C0" title="$20C0" target="TABLE_1">isrDelay</a>),A        ; Set counter
<span class="siteTarget" id="0A9E">0</span>A9E: 3A C0 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20C0" title="$20C0" target="TABLE_1">isrDelay</a>)        ; Get counter
0AA1: 3D              DEC     A                   ; Is it 1?
0AA2: C2 9E 0A        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0A9E" title="$0A9E" target="_self">$0A9E</a>            ; No ... wait on it
0AA5: 13              INC     DE                  ; Next in message
0AA6: 0D              DEC     C                   ; All done?
0AA7: C2 93 0A        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PrintMessageDel" title="$0A93" target="_self">PrintMessageDel</a>  ; No ... do all
0AAA: C9              RET                         ; Out

<span class="siteTarget" id="SplashSquiggly">S</span>plashSquiggly: 
0AAB: 21 50 20        LD      HL,$2050            ; Pointer to game-object 4 timer
0AAE: C3 4B 02        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#024B" title="$024B" target="_self">$024B</a>               ; Process squiggly-shot in demo mode

<span class="siteTarget" id="OneSecDelay">O</span>neSecDelay: 
; Delay 64 interrupts
0AB1: 3E 40           LD      A,$40               ; Delay of 64 (tad over 1 sec)
0AB3: C3 D7 0A        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0AD7" title="$0AD7" target="_self">$0AD7</a>               ; Do delay

<span class="siteTarget" id="TwoSecDelay">T</span>woSecDelay: 
; Delay 128 interrupts
0AB6: 3E 80           LD      A,$80               ; Delay of 80 (tad over 2 sec)
0AB8: C3 D7 0A        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0AD7" title="$0AD7" target="_self">$0AD7</a>               ; Do delay

<span class="siteTarget" id="SplashDemo">S</span>plashDemo: 
0ABB: E1              POP     HL                  ; Drop the call to ABF and ...
0ABC: C3 72 00        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0072" title="$0072" target="_self">$0072</a>               ; ... do a demo game loop without sound

<span class="siteTarget" id="ISRSplTasks">I</span>SRSplTasks: 
; Different types of splash tasks managed by ISR in splash screens. The ISR
; calls this if in splash-mode. These may have been bit flags to allow all 3 
; at the same time. Maybe it is just easier to do a switch with a rotate-to-carry.
;
0ABF: 3A C1 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20C1" title="$20C1" target="TABLE_1">isrSplashTask</a>)   ; Get the ISR task number
0AC2: 0F              RRCA                        ; In demo play mode?
0AC3: DA BB 0A        JP      C,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#SplashDemo" title="$0ABB" target="_self">SplashDemo</a>        ; 1: Yes ... go do game play (without sound)
0AC6: 0F              RRCA                        ; Moving little alien from point A to B?
0AC7: DA 68 18        JP      C,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#SplashSprite" title="$1868" target="_self">SplashSprite</a>      ; 2: Yes ... go move little alien from point A to B
0ACA: 0F              RRCA                        ; Shooting extra "C" with squiggly shot?
0ACB: DA AB 0A        JP      C,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#SplashSquiggly" title="$0AAB" target="_self">SplashSquiggly</a>    ; 4: Yes ... go shoot extra "C" in splash
0ACE: C9              RET                         ; No task to do

; Message to center of screen.
; Only used in one place for "SPACE  INVADERS"
<span class="siteTarget" id="0ACF">0</span>ACF: 21 14 2B        LD      HL,$2B14            ; Near center of screen
0AD2: 0E 0F           LD      C,$0F               ; 15 bytes in message
0AD4: C3 93 0A        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PrintMessageDel" title="$0A93" target="_self">PrintMessageDel</a>     ; Print and out

WaitOnDelay : ; =
; Wait on ISR counter to reach 0
<span class="siteTarget" id="0AD7">0</span>AD7: 32 C0 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20C0" title="$20C0" target="TABLE_1">isrDelay</a>),A        ; Delay counter
<span class="siteTarget" id="0ADA">0</span>ADA: 3A C0 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20C0" title="$20C0" target="TABLE_1">isrDelay</a>)        ; Get current delay
0ADD: A7              AND     A                   ; Zero yet?
0ADE: C2 DA 0A        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0ADA" title="$0ADA" target="_self">$0ADA</a>            ; No ... wait on it
0AE1: C9              RET                         ; Out

<span class="siteTarget" id="IniSplashAni">I</span>niSplashAni: 
; Init the splash-animation block
0AE2: 21 C2 20        LD      HL,$20C2            ; The splash-animation descriptor
0AE5: 06 0C           LD      B,$0C               ; C bytes
0AE7: C3 32 1A        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#BlockCopy" title="$1A32" target="_self">BlockCopy</a>           ; Block copy DE to descriptor

;=============================================================
; After initialization ... splash screens
<span class="siteTarget" id="0AEA">0</span>AEA: AF              XOR     A                   ; Make a 0
0AEB: D3 03           OUT     (<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0003pw" title="$03" target="TABLE_2">SOUND1</a>),A          ; Turn off sound
0AED: D3 05           OUT     (<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0005pw" title="$05" target="TABLE_2">SOUND2</a>),A          ; Turn off sound
0AEF: CD 82 19        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1982" title="$1982" target="_self">$1982</a>               ; Turn off ISR splash-task
0AF2: FB              EI                          ; Enable interrupts (using them for delays)
0AF3: CD B1 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#OneSecDelay" title="$0AB1" target="_self">OneSecDelay</a>         ; One second delay
0AF6: 3A EC 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20EC" title="$20EC" target="TABLE_1">splashAnimate</a>)   ; Splash screen type
0AF9: A7              AND     A                   ; Set flags based on type
0AFA: 21 17 30        LD      HL,$3017            ; Screen coordinates (middle near top)
0AFD: 0E 04           LD      C,$04               ; 4 characters in "PLAY"
0AFF: C2 E8 0B        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0BE8" title="$0BE8" target="_self">$0BE8</a>            ; Not 0 ... do "normal" PLAY
0B02: 11 FA 1C        LD      DE,$1CFA            ; The "PLAy" with an upside down 'Y'
0B05: CD 93 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PrintMessageDel" title="$0A93" target="_self">PrintMessageDel</a>     ; Print the "PLAy"
0B08: 11 AF 1D        LD      DE,$1DAF            ; "SPACE  INVADERS" message
<span class="siteTarget" id="0B0B">0</span>B0B: CD CF 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0ACF" title="$0ACF" target="_self">$0ACF</a>               ; Print to middle-ish of screen
0B0E: CD B1 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#OneSecDelay" title="$0AB1" target="_self">OneSecDelay</a>         ; One second delay
0B11: CD 15 18        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawAdvTable" title="$1815" target="_self">DrawAdvTable</a>        ; Draw "SCORE ADVANCE TABLE" with print delay
0B14: CD B6 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#TwoSecDelay" title="$0AB6" target="_self">TwoSecDelay</a>         ; Two second delay
0B17: 3A EC 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20EC" title="$20EC" target="TABLE_1">splashAnimate</a>)   ; Do splash ...
0B1A: A7              AND     A                   ; ... animations?
0B1B: C2 4A 0B        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0B4A" title="$0B4A" target="_self">$0B4A</a>            ; Not 0 ... no animations
;
; Animate small alien replacing upside-down Y with correct Y
0B1E: 11 95 1A        LD      DE,$1A95            ; Animate sprite from Y=FE to Y=9E step -1
0B21: CD E2 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#IniSplashAni" title="$0AE2" target="_self">IniSplashAni</a>        ; Copy to splash-animate structure
0B24: CD 80 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#Animate" title="$0A80" target="_self">Animate</a>             ; Wait for ISR to move sprite (small alien)
0B27: 11 B0 1B        LD      DE,$1BB0            ; Animate sprite from Y=98 to Y=FF step 1
0B2A: CD E2 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#IniSplashAni" title="$0AE2" target="_self">IniSplashAni</a>        ; Copy to splash-animate structure
0B2D: CD 80 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#Animate" title="$0A80" target="_self">Animate</a>             ; Wait for ISR to move sprite (alien pulling upside down Y)
0B30: CD B1 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#OneSecDelay" title="$0AB1" target="_self">OneSecDelay</a>         ; One second delay
0B33: 11 C9 1F        LD      DE,$1FC9            ; Animate sprite from Y=FF to Y=97 step 1
0B36: CD E2 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#IniSplashAni" title="$0AE2" target="_self">IniSplashAni</a>        ; Copy to splash-animate structure
0B39: CD 80 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#Animate" title="$0A80" target="_self">Animate</a>             ; Wait for ISR to move sprite (alien pushing Y)
0B3C: CD B1 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#OneSecDelay" title="$0AB1" target="_self">OneSecDelay</a>         ; One second delay
0B3F: 21 B7 33        LD      HL,$33B7            ; Where the splash alien ends up
0B42: 06 0A           LD      B,$0A               ; 10 rows
0B44: CD CB 14        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ClearSmallSprite" title="$14CB" target="_self">ClearSmallSprite</a>    ; Clear a one byte sprite at HL
0B47: CD B6 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#TwoSecDelay" title="$0AB6" target="_self">TwoSecDelay</a>         ; Two second delay
;
; Play demo
<span class="siteTarget" id="0B4A">0</span>B4A: CD D6 09        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ClearPlayField" title="$09D6" target="_self">ClearPlayField</a>      ; Clear playfield
0B4D: 3A FF 21        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#21FF" title="$21FF" target="TABLE_1">p1ShipsRem</a>)      ; Number of ships for player-1
0B50: A7              AND     A                   ; If non zero ...
0B51: C2 5D 0B        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0B5D" title="$0B5D" target="_self">$0B5D</a>            ; ... keep it (counts down between demos)
0B54: CD D1 08        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#GetShipsPerCred" title="$08D1" target="_self">GetShipsPerCred</a>     ; Get number of ships from DIP settings
0B57: 32 FF 21        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#21FF" title="$21FF" target="TABLE_1">p1ShipsRem</a>),A      ; Reset number of ships for player-1
0B5A: CD 7F 1A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#RemoveShip" title="$1A7F" target="_self">RemoveShip</a>          ; Remove a ship from stash and update indicators
;
<span class="siteTarget" id="0B5D">0</span>B5D: CD E4 01        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#CopyRAMMirror" title="$01E4" target="_self">CopyRAMMirror</a>       ; Block copy ROM mirror to initialize RAM
0B60: CD C0 01        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#InitAliens" title="$01C0" target="_self">InitAliens</a>          ; Initialize all player 1 aliens
0B63: CD EF 01        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawShieldPl1" title="$01EF" target="_self">DrawShieldPl1</a>       ; Draw shields for player 1 (to buffer)
0B66: CD 1A 02        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#RestoreShields1" title="$021A" target="_self">RestoreShields1</a>     ; Restore shields for player 1 (to screen)
0B69: 3E 01           LD      A,$01               ; ISR splash-task ...
0B6B: 32 C1 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20C1" title="$20C1" target="TABLE_1">isrSplashTask</a>),A   ; ... playing demo
0B6E: CD CF 01        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawBottomLine" title="$01CF" target="_self">DrawBottomLine</a>      ; Draw playfield line
;
<span class="siteTarget" id="0B71">0</span>B71: CD 18 16        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PlrFireOrDemo" title="$1618" target="_self">PlrFireOrDemo</a>       ; In demo ... process demo movement and always fire
0B74: CD F1 0B        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0BF1" title="$0BF1" target="_self">$0BF1</a>               ; Check player shot and aliens bumping edges of screen and hidden message
0B77: D3 06           OUT     (<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0006pw" title="$06" target="TABLE_2">WATCHDOG</a>),A        ; Feed watchdog
0B79: CD 59 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0A59" title="$0A59" target="_self">$0A59</a>               ; Has demo player been hit?
0B7C: CA 71 0B        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0B71" title="$0B71" target="_self">$0B71</a>             ; No ... continue game
0B7F: AF              XOR     A                   ; Remove player shot ...
0B80: 32 25 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2025" title="$2025" target="TABLE_1">plyrShotStatus</a>),A  ; ... from activity
<span class="siteTarget" id="0B83">0</span>B83: CD 59 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0A59" title="$0A59" target="_self">$0A59</a>               ; Wait for demo player ...
0B86: C2 83 0B        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0B83" title="$0B83" target="_self">$0B83</a>            ; ... to stop exploding
;
; Credit information
<span class="siteTarget" id="0B89">0</span>B89: AF              XOR     A                   ; Turn off ...
0B8A: 32 C1 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20C1" title="$20C1" target="TABLE_1">isrSplashTask</a>),A   ; ... splash animation
0B8D: CD B1 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#OneSecDelay" title="$0AB1" target="_self">OneSecDelay</a>         ; One second delay
0B90: CD 88 19        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1988" title="$1988" target="_self">$1988</a>               ; ** Something else at one time? Jump straight to clear-play-field
0B93: 0E 0C           LD      C,$0C               ; Message size
0B95: 21 11 2C        LD      HL,$2C11            ; Screen coordinates
0B98: 11 90 1F        LD      DE,$1F90            ; "INSERT  COIN"
0B9B: CD F3 08        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PrintMessage" title="$08F3" target="_self">PrintMessage</a>        ; Print message
0B9E: 3A EC 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20EC" title="$20EC" target="TABLE_1">splashAnimate</a>)   ; Do splash ...
0BA1: FE 00           CP      $00                 ; ... animations?
0BA3: C2 AE 0B        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0BAE" title="$0BAE" target="_self">$0BAE</a>            ; Not 0 ... not on this screen
0BA6: 21 11 33        LD      HL,$3311            ; Screen coordinates
0BA9: 3E 02           LD      A,$02               ; Character "C"
0BAB: CD FF 08        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawChar" title="$08FF" target="_self">DrawChar</a>            ; Put an extra "C" for "CCOIN" on the screen
<span class="siteTarget" id="0BAE">0</span>BAE: 01 9C 1F        LD      BC,$1F9C            ; "&lt;1 OR 2 PLAYERS&gt;  "
0BB1: CD 56 18        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ReadPriStruct" title="$1856" target="_self">ReadPriStruct</a>       ; Load the screen,pointer
0BB4: CD 4C 18        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#184C" title="$184C" target="_self">$184C</a>               ; Print the message
0BB7: DB 02           IN      A,(<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0002pr" title="$02" target="TABLE_2">INP2</a>)            ; Display coin info (bit 7) ...
0BB9: 07              RLCA                        ; ... on demo screen?
0BBA: DA C3 0B        JP      C,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0BC3" title="$0BC3" target="_self">$0BC3</a>             ; 1 means no ... skip it
0BBD: 01 A0 1F        LD      BC,$1FA0            ; "*1 PLAYER  1 COIN "
0BC0: CD 3A 18        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#183A" title="$183A" target="_self">$183A</a>               ; Load the descriptor
<span class="siteTarget" id="0BC3">0</span>BC3: CD B6 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#TwoSecDelay" title="$0AB6" target="_self">TwoSecDelay</a>         ; Print TWO descriptors worth 
0BC6: 3A EC 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20EC" title="$20EC" target="TABLE_1">splashAnimate</a>)   ; Doing splash ...
0BC9: FE 00           CP      $00                 ; ... animation?
0BCB: C2 DA 0B        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0BDA" title="$0BDA" target="_self">$0BDA</a>            ; Not 0 ... not on this screen
0BCE: 11 D5 1F        LD      DE,$1FD5            ; Animation for small alien to line up with extra "C"
0BD1: CD E2 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#IniSplashAni" title="$0AE2" target="_self">IniSplashAni</a>        ; Copy the animation block
0BD4: CD 80 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#Animate" title="$0A80" target="_self">Animate</a>             ; Wait for the animation to complete
0BD7: CD 9E 18        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#189E" title="$189E" target="_self">$189E</a>               ; Animate alien shot to extra "C"
<span class="siteTarget" id="0BDA">0</span>BDA: 21 EC 20        LD      HL,$20EC            ; Toggle ...
0BDD: 7E              LD      A,(HL)              ; ... the ...
0BDE: 3C              INC     A                   ; ... splash screen ...
0BDF: E6 01           AND     $01                 ; ... animation for ...
0BE1: 77              LD      (HL),A              ; ... next time
0BE2: CD D6 09        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ClearPlayField" title="$09D6" target="_self">ClearPlayField</a>      ; Clear play field
0BE5: C3 DF 18        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#18DF" title="$18DF" target="_self">$18DF</a>               ; Keep splashing

<span class="siteTarget" id="0BE8">0</span>BE8: 11 AB 1D        LD      DE,$1DAB            ;"PLAY" with normal 'Y'
0BEB: CD 93 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PrintMessageDel" title="$0A93" target="_self">PrintMessageDel</a>     ; Print it
0BEE: C3 0B 0B        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0B0B" title="$0B0B" target="_self">$0B0B</a>               ; Continue with splash (HL will be pointing to next message)

<span class="siteTarget" id="0BF1">0</span>BF1: CD 0A 19        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PlyrShotAndBump" title="$190A" target="_self">PlyrShotAndBump</a>     ; Check if player is shot and aliens bumping the edge of screen
0BF4: C3 9A 19        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#CheckHiddenMes" title="$199A" target="_self">CheckHiddenMes</a>      ; Check for hidden-message display sequence

<span class="siteTarget" id="MessageCorp">M</span>essageCorp: 
; "TAITO COP"
0BF7: 13 00 08 13 0E 26 02 0E 0F

</n></pre>
<h1 id="DiagnosticsRoutine" class="siteTarget">Diagnostics Routine</h1> 
<p> 
</p><pre class="codePreStyle">; The very center 2K of the code map is an expansion area. It originally contained a 1K diagnostics routine
; beginning at 1000. The original code would check bit 0 of port 0 (wired to DIP4) and jump to this routine
; if the switch was flipped. The routine was removed in this Midway version of the code. And it was removed
; in later versions of the TAITO code line.

; The original routine is shown here for reference.

0C00: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0C20: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0C40: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0C60: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0C80: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0CA0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0CC0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0CE0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00

0D00: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0D20: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0D40: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0D60: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0D80: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0DA0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0DC0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0DE0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00

0E00: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0E20: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0E40: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0E60: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0E80: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0EA0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0EC0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0EE0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00

0F00: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0F20: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0F40: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0F60: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0F80: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0FA0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0FC0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0FE0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00

; The original TAITO code had a self-check routine here. The opening jump was to E2, which was a 
; check on bit 0 of port 0 (the DIP4 switch for self test). If the bit was set the code came here.
; When Midway branched the code, they left the check out.

1000: 00           NOP                      ; Three bytes for ...
1001: 00           NOP                      ; ... development code ...
1002: 00           NOP                      ; ... jump opcode
;
1003: AF           XOR   A                  ; Turn off ...
1004: D3 03        OUT   (<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0003pw" title="$03" target="TABLE_2">SOUND1</a>),A         ; ... sound effects (AMP ENABLE bit 5)
1006: 0E 03        LD    C,$03              ; 
<span class="siteTarget" id="1008">1</span>008: 06 55        LD    B,$55              ; 
100A: 21 00 20     LD    HL,$2000           ; 
<span class="siteTarget" id="100D">1</span>00D: 70           LD    (HL),B             ; 
100E: 23           INC   HL                 ; 
100F: 7C           LD    A,H                ; 
1010: FE 40        CP    $40                ; 
1012: C2 0D 10     JP    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#100D" title="$100D" target="_self">$100D</a>           ; 
1015: 21 00 20     LD    HL,$2000           ; 
<span class="siteTarget" id="1018">1</span>018: 7E           LD    A,(HL)             ; 
1019: A8           XOR   B                  ; 
101A: C2 90 11     JP    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1190" title="$1190" target="_self">$1190</a>           ; 
101D: 23           INC   HL                 ; 
101E: 7C           LD    A,H                ; 
101F: FE 40        CP    $40                ; 
1021: C2 18 10     JP    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1018" title="$1018" target="_self">$1018</a>           ; 
1024: 06 AA        LD    B,$AA              ; 
1026: 21 00 20     LD    HL,$2000           ; 
<span class="siteTarget" id="1029">1</span>029: 70           LD    (HL),B             ; 
102A: 23           INC   HL                 ; 
102B: 7C           LD    A,H                ; 
102C: FE 40        CP    $40                ; 
102E: C2 29 10     JP    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1029" title="$1029" target="_self">$1029</a>           ; 
1031: 21 00 20     LD    HL,$2000           ; 
<span class="siteTarget" id="1034">1</span>034: 7E           LD    A,(HL)             ; 
1035: A8           XOR   B                  ; 
1036: C2 90 11     JP    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1190" title="$1190" target="_self">$1190</a>           ; 
1039: 23           INC   HL                 ; 
103A: 7C           LD    A,H                ; 
103B: FE 40        CP    $40                ; 
103D: C2 34 10     JP    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1034" title="$1034" target="_self">$1034</a>           ; 
1040: 0D           DEC   C                  ; 
1041: C2 08 10     JP    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1008" title="$1008" target="_self">$1008</a>           ; 
1044: 21 00 20     LD    HL,$2000           ; 
1047: 06 00        LD    B,$00              ; 
<span class="siteTarget" id="1049">1</span>049: 78           LD    A,B                ; 
104A: 77           LD    (HL),A             ; 
104B: 23           INC   HL                 ; 
104C: 04           INC   B                  ; 
104D: 78           LD    A,B                ; 
104E: FE FF        CP    $FF                ; 
1050: C2 55 10     JP    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1055" title="$1055" target="_self">$1055</a>           ; 
1053: 06 00        LD    B,$00              ; 
<span class="siteTarget" id="1055">1</span>055: 7C           LD    A,H                ; 
1056: FE 40        CP    $40                ; 
1058: C2 49 10     JP    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1049" title="$1049" target="_self">$1049</a>           ; 
105B: 21 00 20     LD    HL,$2000           ; 
105E: 06 00        LD    B,$00              ; 
<span class="siteTarget" id="1060">1</span>060: 7E           LD    A,(HL)             ; 
1061: A8           XOR   B                  ; 
1062: C2 90 11     JP    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1190" title="$1190" target="_self">$1190</a>           ; 
1065: 04           INC   B                  ; 
1066: 78           LD    A,B                ; 
1067: FE FF        CP    $FF                ; 
1069: C2 6E 10     JP    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#106E" title="$106E" target="_self">$106E</a>           ; 
106C: 06 00        LD    B,$00              ; 
<span class="siteTarget" id="106E">1</span>06E: 23           INC   HL                 ; 
106F: 7C           LD    A,H                ; 
1070: FE 40        CP    $40                ; 
1072: C2 60 10     JP    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1060" title="$1060" target="_self">$1060</a>           ; 
1075: 31 00 24     LD    SP,$2400           ; 
1078: CD 83 11     CALL  <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1183" title="$1183" target="_self">$1183</a>              ; 
107B: 11 48 13     LD    DE,$1348           ; 
107E: 21 01 25     LD    HL,$2501           ; 
1081: CD 55 11     CALL  <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1155" title="$1155" target="_self">$1155</a>              ; 
1084: 21 01 27     LD    HL,$2701           ; 
1087: CD 55 11     CALL  <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1155" title="$1155" target="_self">$1155</a>              ; 
108A: 21 01 33     LD    HL,$3301           ; 
108D: CD 55 11     CALL  <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1155" title="$1155" target="_self">$1155</a>              ; 
1090: 21 07 2A     LD    HL,$2A07           ; 
1093: 0E 0F        LD    C,$0F              ; 
1095: 11 6F 13     LD    DE,$136F           ; 
1098: D5           PUSH  DE                 ; 
1099: CD 57 11     CALL  <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1157" title="$1157" target="_self">$1157</a>              ; 
109C: D1           POP   DE                 ; 
109D: 21 07 2E     LD    HL,$2E07           ; 
10A0: 0E 0F        LD    C,$0F              ; 
10A2: CD 57 11     CALL  <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1157" title="$1157" target="_self">$1157</a>              ; 
10A5: 3E 1D        LD    A,$1D              ; 
10A7: 21 0B 2E     LD    HL,$2E0B           ; 
10AA: CD 66 11     CALL  <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1166" title="$1166" target="_self">$1166</a>              ; 
10AD: 06 0B        LD    B,$0B              ; 
10AF: 21 0E 34     LD    HL,$340E           ; 
10B2: 11 7E 13     LD    DE,$137E           ; 
<span class="siteTarget" id="10B5">1</span>0B5: 0E 06        LD    C,$06              ; 
10B7: C5           PUSH  BC                 ; 
10B8: CD 57 11     CALL  <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1157" title="$1157" target="_self">$1157</a>              ; 
10BB: 01 FA 00     LD    BC,$00FA           ; 
10BE: 09           ADD   HL,BC              ; 
10BF: C1           POP   BC                 ; 
10C0: 05           DEC   B                  ; 
10C1: C2 B5 10     JP    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#10B5" title="$10B5" target="_self">$10B5</a>           ; 
10C4: 06 02        LD    B,$02              ; 
<span class="siteTarget" id="10C6">1</span>0C6: C5           PUSH  BC                 ; 
10C7: 21 0D 34     LD    HL,$340D           ; 
10CA: 22 00 20     LD    (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2000" title="$2000" target="TABLE_1">waitOnDraw</a>),HL    ; 
10CD: 3E 01        LD    A,$01              ; 
<span class="siteTarget" id="10CF">1</span>0CF: F5           PUSH  AF                 ; 
10D0: F6 20        OR    $20                ; 
10D2: D3 03        OUT   (<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0003pw" title="$03" target="TABLE_2">SOUND1</a>),A         ; 
10D4: CD 05 11     CALL  <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1105" title="$1105" target="_self">$1105</a>              ; 
10D7: 3E 20        LD    A,$20              ; 
10D9: D3 03        OUT   (<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0003pw" title="$03" target="TABLE_2">SOUND1</a>),A         ; 
10DB: CD 10 11     CALL  <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1110" title="$1110" target="_self">$1110</a>              ; 
10DE: F1           POP   AF                 ; 
10DF: 07           RLCA                     ; 
10E0: FE 20        CP    $20                ; 
10E2: C2 CF 10     JP    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#10CF" title="$10CF" target="_self">$10CF</a>           ; 
10E5: 3E 01        LD    A,$01              ; 
<span class="siteTarget" id="10E7">1</span>0E7: F5           PUSH  AF                 ; 
10E8: D3 05        OUT   (<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0005pw" title="$05" target="TABLE_2">SOUND2</a>),A         ; 
10EA: CD 05 11     CALL  <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1105" title="$1105" target="_self">$1105</a>              ; 
10ED: AF           XOR   A                  ; 
10EE: D3 05        OUT   (<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0005pw" title="$05" target="TABLE_2">SOUND2</a>),A         ; 
10F0: CD 10 11     CALL  <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1110" title="$1110" target="_self">$1110</a>              ; 
10F3: F1           POP   AF                 ; 
10F4: 07           RLCA                     ; 
10F5: FE 40        CP    $40                ; 
10F7: C2 E7 10     JP    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#10E7" title="$10E7" target="_self">$10E7</a>           ; 
10FA: C1           POP   BC                 ; 
10FB: 05           DEC   B                  ; 
10FC: C2 C6 10     JP    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#10C6" title="$10C6" target="_self">$10C6</a>           ; 
<span class="siteTarget" id="10FF">1</span>0FF: CD 29 11     CALL  <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1129" title="$1129" target="_self">$1129</a>              ; 
1102: C3 FF 10     JP    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#10FF" title="$10FF" target="_self">$10FF</a>              ; 
<span class="siteTarget" id="1105">1</span>105: 2A 00 20     LD    HL,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2000" title="$2000" target="TABLE_1">waitOnDraw</a>)    ; 
1108: 3E 0F        LD    A,$0F              ; 
110A: CD 66 11     CALL  <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1166" title="$1166" target="_self">$1166</a>              ; 
110D: C3 1F 11     JP    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#111F" title="$111F" target="_self">$111F</a>              ; 
<span class="siteTarget" id="1110">1</span>110: CD 1F 11     CALL  <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#111F" title="$111F" target="_self">$111F</a>              ; 
1113: 2A 00 20     LD    HL,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2000" title="$2000" target="TABLE_1">waitOnDraw</a>)    ; 
1116: 3E 28        LD    A,$28              ; 
1118: CD 66 11     CALL  <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1166" title="$1166" target="_self">$1166</a>              ; 
111B: 22 00 20     LD    (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2000" title="$2000" target="TABLE_1">waitOnDraw</a>),HL    ; 
111E: C9           RET                      ; 
<span class="siteTarget" id="111F">1</span>11F: 3E 60        LD    A,$60              ; 
<span class="siteTarget" id="1121">1</span>121: CD CE 11     CALL  <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#11CE" title="$11CE" target="_self">$11CE</a>              ; 
1124: 3D           DEC   A                  ; 
1125: C2 21 11     JP    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1121" title="$1121" target="_self">$1121</a>           ; 
1128: C9           RET                      ; 
<span class="siteTarget" id="1129">1</span>129: F5           PUSH  AF                 ; 
112A: 21 0E 2B     LD    HL,$2B0E           ; 
112D: DB 01        IN    A,(<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0001pr" title="$01" target="TABLE_2">INP1</a>)           ; 
112F: CD 3C 11     CALL  <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#113C" title="$113C" target="_self">$113C</a>              ; 
1132: 21 0E 2F     LD    HL,$2F0E           ; 
1135: DB 02        IN    A,(<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0002pr" title="$02" target="TABLE_2">INP2</a>)           ; 
1137: CD 3C 11     CALL  <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#113C" title="$113C" target="_self">$113C</a>              ; 
113A: F1           POP   AF                 ; 
113B: C9           RET                      ; 
<span class="siteTarget" id="113C">1</span>13C: 06 08        LD    B,$08              ; 
<span class="siteTarget" id="113E">1</span>13E: C5           PUSH  BC                 ; 
113F: E5           PUSH  HL                 ; 
1140: 0F           RRCA                     ; 
1141: F5           PUSH  AF                 ; 
1142: 3E 28        LD    A,$28              ; 
1144: DA 49 11     JP    C,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1149" title="$1149" target="_self">$1149</a>            ; 
1147: 3E 25        LD    A,$25              ; 
<span class="siteTarget" id="1149">1</span>149: CD 66 11     CALL  <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1166" title="$1166" target="_self">$1166</a>              ; 
114C: F1           POP   AF                 ; 
114D: E1           POP   HL                 ; 
114E: 23           INC   HL                 ; 
114F: C1           POP   BC                 ; 
1150: 05           DEC   B                  ; 
1151: C2 3E 11     JP    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#113E" title="$113E" target="_self">$113E</a>           ; 
1154: C9           RET                      ; 
<span class="siteTarget" id="1155">1</span>155: 0E 0D        LD    C,$0D              ; 
<span class="siteTarget" id="1157">1</span>157: 1A           LD    A,(DE)             ; 
1158: D5           PUSH  DE                 ; 
1159: E5           PUSH  HL                 ; 
115A: CD 66 11     CALL  <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1166" title="$1166" target="_self">$1166</a>              ; 
115D: E1           POP   HL                 ; 
115E: 23           INC   HL                 ; 
115F: D1           POP   DE                 ; 
1160: 13           INC   DE                 ; 
1161: 0D           DEC   C                  ; 
1162: C2 57 11     JP    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1157" title="$1157" target="_self">$1157</a>           ; 
1165: C9           RET                      ; 
<span class="siteTarget" id="1166">1</span>166: 11 00 12     LD    DE,$1200           ; 
1169: E5           PUSH  HL                 ; 
116A: 6F           LD    L,A                ; 
116B: 26 00        LD    H,$00              ; 
116D: 29           ADD   HL,HL              ; 
116E: 29           ADD   HL,HL              ; 
116F: 29           ADD   HL,HL              ; 
1170: 19           ADD   HL,DE              ; 
1171: EB           EX    DE,HL              ; 
1172: E1           POP   HL                 ; 
1173: 06 08        LD    B,$08              ; 
<span class="siteTarget" id="1175">1</span>175: C5           PUSH  BC                 ; 
1176: 1A           LD    A,(DE)             ; 
1177: 77           LD    (HL),A             ; 
1178: 13           INC   DE                 ; 
1179: 01 20 00     LD    BC,$0020           ; 
117C: 09           ADD   HL,BC              ; 
117D: C1           POP   BC                 ; 
117E: 05           DEC   B                  ; 
117F: C2 75 11     JP    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1175" title="$1175" target="_self">$1175</a>           ; 
1182: C9           RET                      ; 
<span class="siteTarget" id="1183">1</span>183: 21 00 24     LD    HL,$2400           ; 
<span class="siteTarget" id="1186">1</span>186: 36 00        LD    (HL),$00           ; 
1188: 23           INC   HL                 ; 
1189: 7C           LD    A,H                ; 
118A: FE 40        CP    $40                ; 
118C: C2 86 11     JP    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1186" title="$1186" target="_self">$1186</a>           ; 
118F: C9           RET                      ; 
<span class="siteTarget" id="1190">1</span>190: 06 01        LD    B,$01              ; 
<span class="siteTarget" id="1192">1</span>192: 0F           RRCA                     ; 
1193: DA 9A 11     JP    C,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#119A" title="$119A" target="_self">$119A</a>            ; 
1196: 04           INC   B                  ; 
1197: C3 92 11     JP    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1192" title="$1192" target="_self">$1192</a>              ; 
<span class="siteTarget" id="119A">1</span>19A: 7D           LD    A,L                ; 
119B: 21 D8 12     LD    HL,$12D8           ; 
119E: 0F           RRCA                     ; 
119F: D2 A5 11     JP    NC,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#11A5" title="$11A5" target="_self">$11A5</a>           ; 
11A2: 21 B8 13     LD    HL,$13B8           ; 
<span class="siteTarget" id="11A5">1</span>1A5: 78           LD    A,B                ; 
11A6: 07           RLCA                     ; 
11A7: 07           RLCA                     ; 
11A8: 07           RLCA                     ; 
11A9: 47           LD    B,A                ; 
11AA: 58           LD    E,B                ; 
11AB: 16 00        LD    D,$00              ; 
11AD: 19           ADD   HL,DE              ; 
11AE: EB           EX    DE,HL              ; 
11AF: 06 08        LD    B,$08              ; 
11B1: 21 11 30     LD    HL,$3011           ; 
<span class="siteTarget" id="11B4">1</span>1B4: 1A           LD    A,(DE)             ; 
11B5: 77           LD    (HL),A             ; 
11B6: 78           LD    A,B                ; 
11B7: 01 20 00     LD    BC,$0020           ; 
11BA: 09           ADD   HL,BC              ; 
11BB: 47           LD    B,A                ; 
11BC: 13           INC   DE                 ; 
11BD: 05           DEC   B                  ; 
11BE: C2 B4 11     JP    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#11B4" title="$11B4" target="_self">$11B4</a>           ; 
11C1: 06 08        LD    B,$08              ; 
11C3: 21 12 30     LD    HL,$3012           ; 
11C6: 11 40 13     LD    DE,$1340           ; 
11C9: D3 06        OUT   (<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0006pw" title="$06" target="TABLE_2">WATCHDOG</a>),A       ; 
11CB: C3 B4 11     JP    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#11B4" title="$11B4" target="_self">$11B4</a>              ; 
<span class="siteTarget" id="11CE">1</span>1CE: CD 29 11     CALL  <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1129" title="$1129" target="_self">$1129</a>              ; 
11D1: D3 06        OUT   (<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0006pw" title="$06" target="TABLE_2">WATCHDOG</a>),A       ; 
11D3: C9           RET                      ; 
11D4: FF           RST   0X38               ; 
11D5: FF           RST   0X38               ; 
11D6: FF           RST   0X38               ; 
11D7: FF           RST   0X38               ; 
11D8: FF           RST   0X38               ; 
11D9: FF           RST   0X38               ; 
11DA: FF           RST   0X38               ; 
11DB: FF           RST   0X38               ; 
11DC: FF           RST   0X38               ; 
11DD: FF           RST   0X38               ; 
11DE: FF           RST   0X38               ; 
11DF: FF           RST   0X38               ; 
11E0: FF           RST   0X38               ; 
11E1: FF           RST   0X38               ; 
11E2: FF           RST   0X38               ; 
11E3: FF           RST   0X38               ; 
11E4: FF           RST   0X38               ; 
11E5: FF           RST   0X38               ; 
11E6: FF           RST   0X38               ; 
11E7: FF           RST   0X38               ; 
11E8: FF           RST   0X38               ; 
11E9: FF           RST   0X38               ; 
11EA: FF           RST   0X38               ; 
11EB: FF           RST   0X38               ; 
11EC: FF           RST   0X38               ; 
11ED: FF           RST   0X38               ; 
11EE: FF           RST   0X38               ; 
11EF: FF           RST   0X38               ; 
11F0: FF           RST   0X38               ; 
11F1: FF           RST   0X38               ; 
11F2: FF           RST   0X38               ; 
11F3: FF           RST   0X38               ; 
11F4: FF           RST   0X38               ; 
11F5: FF           RST   0X38               ; 
11F6: FF           RST   0X38               ; 
11F7: FF           RST   0X38               ; 
11F8: FF           RST   0X38               ; 
11F9: FF           RST   0X38               ; 
11FA: FF           RST   0X38               ; 
11FB: FF           RST   0X38               ; 
11FC: FF           RST   0X38               ; 
11FD: FF           RST   0X38               ; 
11FE: FF           RST   0X38               ; 
11FF: FF           RST   0X38               ; 
1200: 00           NOP                      ; 
1201: 70           LD    (HL),B             ; 
1202: 88           ADC   A,B                ; 
1203: A8           XOR   B                  ; 
1204: E8           RET   PE                 ; 
1205: 68           LD    L,B                ; 
1206: 08           EX    AF,AF'             ; 
1207: F0           RET   P                  ; 
1208: 00           NOP                      ; 
1209: 20 50        JR    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#125B" title="$125B" target="_self">$125B</a>           ; 
120B: 88           ADC   A,B                ; 
120C: 88           ADC   A,B                ; 
120D: F8           RET   M                  ; 
120E: 88           ADC   A,B                ; 
120F: 88           ADC   A,B                ; 
1210: 00           NOP                      ; 
1211: 78           LD    A,B                ; 
1212: 88           ADC   A,B                ; 
1213: 88           ADC   A,B                ; 
1214: 78           LD    A,B                ; 
1215: 88           ADC   A,B                ; 
1216: 88           ADC   A,B                ; 
1217: 78           LD    A,B                ; 
1218: 00           NOP                      ; 
1219: 70           LD    (HL),B             ; 
121A: 88           ADC   A,B                ; 
121B: 08           EX    AF,AF'             ; 
121C: 08           EX    AF,AF'             ; 
121D: 08           EX    AF,AF'             ; 
121E: 88           ADC   A,B                ; 
121F: 70           LD    (HL),B             ; 
1220: 00           NOP                      ; 
1221: 78           LD    A,B                ; 
1222: 88           ADC   A,B                ; 
1223: 88           ADC   A,B                ; 
1224: 88           ADC   A,B                ; 
1225: 88           ADC   A,B                ; 
1226: 88           ADC   A,B                ; 
1227: 78           LD    A,B                ; 
1228: 00           NOP                      ; 
1229: F8           RET   M                  ; 
122A: 08           EX    AF,AF'             ; 
122B: 08           EX    AF,AF'             ; 
122C: 78           LD    A,B                ; 
122D: 08           EX    AF,AF'             ; 
122E: 08           EX    AF,AF'             ; 
122F: F8           RET   M                  ; 
1230: 00           NOP                      ; 
1231: F8           RET   M                  ; 
1232: 08           EX    AF,AF'             ; 
1233: 08           EX    AF,AF'             ; 
1234: 78           LD    A,B                ; 
1235: 08           EX    AF,AF'             ; 
1236: 08           EX    AF,AF'             ; 
1237: 08           EX    AF,AF'             ; 
1238: 00           NOP                      ; 
1239: F0           RET   P                  ; 
123A: 08           EX    AF,AF'             ; 
123B: 08           EX    AF,AF'             ; 
123C: 08           EX    AF,AF'             ; 
123D: C8           RET   Z                  ; 
123E: 88           ADC   A,B                ; 
123F: F0           RET   P                  ; 
1240: 00           NOP                      ; 
1241: 88           ADC   A,B                ; 
1242: 88           ADC   A,B                ; 
1243: 88           ADC   A,B                ; 
1244: F8           RET   M                  ; 
1245: 88           ADC   A,B                ; 
1246: 88           ADC   A,B                ; 
1247: 88           ADC   A,B                ; 
1248: 00           NOP                      ; 
1249: 70           LD    (HL),B             ; 
124A: 20 20        JR    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#126C" title="$126C" target="_self">$126C</a>           ; 
124C: 20 20        JR    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#126E" title="$126E" target="_self">$126E</a>           ; 
124E: 20 70        JR    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#12C0" title="$12C0" target="_self">$12C0</a>           ; 
1250: 00           NOP                      ; 
1251: 80           ADD   A,B                ; 
1252: 80           ADD   A,B                ; 
1253: 80           ADD   A,B                ; 
1254: 80           ADD   A,B                ; 
1255: 80           ADD   A,B                ; 
1256: 88           ADC   A,B                ; 
1257: 70           LD    (HL),B             ; 
1258: 00           NOP                      ; 
1259: 88           ADC   A,B                ; 
125A: 48           LD    C,B                ; 
<span class="siteTarget" id="125B">1</span>25B: 28 18        JR    Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1275" title="$1275" target="_self">$1275</a>            ; 
125D: 28 48        JR    Z,$12A7            ; 
125F: 88           ADC   A,B                ; 
1260: 00           NOP                      ; 
1261: 08           EX    AF,AF'             ; 
1262: 08           EX    AF,AF'             ; 
1263: 08           EX    AF,AF'             ; 
1264: 08           EX    AF,AF'             ; 
1265: 08           EX    AF,AF'             ; 
1266: 08           EX    AF,AF'             ; 
1267: F8           RET   M                  ; 
1268: 00           NOP                      ; 
1269: 88           ADC   A,B                ; 
126A: D8           RET   C                  ; 
126B: A8           XOR   B                  ; 
<span class="siteTarget" id="126C">1</span>26C: A8           XOR   B                  ; 
126D: 88           ADC   A,B                ; 
<span class="siteTarget" id="126E">1</span>26E: 88           ADC   A,B                ; 
126F: 88           ADC   A,B                ; 
1270: 00           NOP                      ; 
1271: 88           ADC   A,B                ; 
1272: 88           ADC   A,B                ; 
1273: 98           SBC   B                  ; 
1274: A8           XOR   B                  ; 
<span class="siteTarget" id="1275">1</span>275: C8           RET   Z                  ; 
1276: 88           ADC   A,B                ; 
1277: 88           ADC   A,B                ; 
1278: 00           NOP                      ; 
1279: 70           LD    (HL),B             ; 
127A: 88           ADC   A,B                ; 
127B: 88           ADC   A,B                ; 
127C: 88           ADC   A,B                ; 
127D: 88           ADC   A,B                ; 
127E: 88           ADC   A,B                ; 
127F: 70           LD    (HL),B             ; 
1280: 00           NOP                      ; 
1281: 78           LD    A,B                ; 
1282: 88           ADC   A,B                ; 
1283: 88           ADC   A,B                ; 
1284: 78           LD    A,B                ; 
1285: 08           EX    AF,AF'             ; 
1286: 08           EX    AF,AF'             ; 
1287: 08           EX    AF,AF'             ; 
1288: 00           NOP                      ; 
1289: 70           LD    (HL),B             ; 
128A: 88           ADC   A,B                ; 
128B: 88           ADC   A,B                ; 
128C: 88           ADC   A,B                ; 
128D: A8           XOR   B                  ; 
128E: 48           LD    C,B                ; 
128F: B0           OR    B                  ; 
1290: 00           NOP                      ; 
1291: 78           LD    A,B                ; 
1292: 88           ADC   A,B                ; 
1293: 88           ADC   A,B                ; 
1294: 78           LD    A,B                ; 
1295: 28 48        JR    Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#12DF" title="$12DF" target="_self">$12DF</a>            ; 
1297: 88           ADC   A,B                ; 
1298: 00           NOP                      ; 
1299: 70           LD    (HL),B             ; 
129A: 88           ADC   A,B                ; 
129B: 08           EX    AF,AF'             ; 
129C: 70           LD    (HL),B             ; 
129D: 80           ADD   A,B                ; 
129E: 88           ADC   A,B                ; 
129F: 70           LD    (HL),B             ; 
12A0: 00           NOP                      ; 
12A1: F8           RET   M                  ; 
12A2: 20 20        JR    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#12C4" title="$12C4" target="_self">$12C4</a>           ; 
12A4: 20 20        JR    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#12C6" title="$12C6" target="_self">$12C6</a>           ; 
12A6: 20 20        JR    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#12C8" title="$12C8" target="_self">$12C8</a>           ; 
12A8: 00           NOP                      ; 
12A9: 88           ADC   A,B                ; 
12AA: 88           ADC   A,B                ; 
12AB: 88           ADC   A,B                ; 
12AC: 88           ADC   A,B                ; 
12AD: 88           ADC   A,B                ; 
12AE: 88           ADC   A,B                ; 
12AF: 70           LD    (HL),B             ; 
12B0: 00           NOP                      ; 
12B1: 88           ADC   A,B                ; 
12B2: 88           ADC   A,B                ; 
12B3: 88           ADC   A,B                ; 
12B4: 88           ADC   A,B                ; 
12B5: 88           ADC   A,B                ; 
12B6: 50           LD    D,B                ; 
12B7: 20 00        JR    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#12B9" title="$12B9" target="_self">$12B9</a>           ; 
<span class="siteTarget" id="12B9">1</span>2B9: 88           ADC   A,B                ; 
12BA: 88           ADC   A,B                ; 
12BB: 88           ADC   A,B                ; 
12BC: A8           XOR   B                  ; 
12BD: A8           XOR   B                  ; 
12BE: D8           RET   C                  ; 
12BF: 88           ADC   A,B                ; 
<span class="siteTarget" id="12C0">1</span>2C0: 00           NOP                      ; 
12C1: 88           ADC   A,B                ; 
12C2: 88           ADC   A,B                ; 
12C3: 50           LD    D,B                ; 
<span class="siteTarget" id="12C4">1</span>2C4: 20 50        JR    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1316" title="$1316" target="_self">$1316</a>           ; 
<span class="siteTarget" id="12C6">1</span>2C6: 88           ADC   A,B                ; 
12C7: 88           ADC   A,B                ; 
<span class="siteTarget" id="12C8">1</span>2C8: 00           NOP                      ; 
12C9: 88           ADC   A,B                ; 
12CA: 88           ADC   A,B                ; 
12CB: 50           LD    D,B                ; 
12CC: 20 20        JR    NZ,$12EE           ; 
12CE: 20 20        JR    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#12F0" title="$12F0" target="_self">$12F0</a>           ; 
12D0: 00           NOP                      ; 
12D1: F8           RET   M                  ; 
12D2: 80           ADD   A,B                ; 
<span class="siteTarget" id="12D3">1</span>2D3: 40           LD    B,B                ; 
12D4: 20 10        JR    NZ,$12E6           ; 
12D6: 08           EX    AF,AF'             ; 
12D7: F8           RET   M                  ; 
12D8: 00           NOP                      ; 
12D9: 70           LD    (HL),B             ; 
12DA: 88           ADC   A,B                ; 
12DB: C8           RET   Z                  ; 
12DC: A8           XOR   B                  ; 
12DD: 98           SBC   B                  ; 
12DE: 88           ADC   A,B                ; 
<span class="siteTarget" id="12DF">1</span>2DF: 70           LD    (HL),B             ; 
12E0: 00           NOP                      ; 
12E1: 20 30        JR    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1313" title="$1313" target="_self">$1313</a>           ; 
12E3: 20 20        JR    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1305" title="$1305" target="_self">$1305</a>           ; 
12E5: 20 20        JR    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1307" title="$1307" target="_self">$1307</a>           ; 
12E7: 70           LD    (HL),B             ; 
12E8: 00           NOP                      ; 
12E9: 70           LD    (HL),B             ; 
12EA: 88           ADC   A,B                ; 
12EB: 80           ADD   A,B                ; 
12EC: 60           LD    H,B                ; 
12ED: 10 08        DJNZ  <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#12F7" title="$12F7" target="_self">$12F7</a>              ; 
12EF: F8           RET   M                  ; 
<span class="siteTarget" id="12F0">1</span>2F0: 00           NOP                      ; 
12F1: F8           RET   M                  ; 
12F2: 80           ADD   A,B                ; 
12F3: 40           LD    B,B                ; 
12F4: 60           LD    H,B                ; 
12F5: 80           ADD   A,B                ; 
12F6: 88           ADC   A,B                ; 
<span class="siteTarget" id="12F7">1</span>2F7: 70           LD    (HL),B             ; 
12F8: 00           NOP                      ; 
12F9: 40           LD    B,B                ; 
12FA: 60           LD    H,B                ; 
12FB: 50           LD    D,B                ; 
12FC: 48           LD    C,B                ; 
12FD: F8           RET   M                  ; 
12FE: 40           LD    B,B                ; 
12FF: 40           LD    B,B                ; 
1300: 00           NOP                      ; 
1301: F8           RET   M                  ; 
1302: 08           EX    AF,AF'             ; 
1303: 78           LD    A,B                ; 
1304: 80           ADD   A,B                ; 
<span class="siteTarget" id="1305">1</span>305: 80           ADD   A,B                ; 
1306: 88           ADC   A,B                ; 
<span class="siteTarget" id="1307">1</span>307: 70           LD    (HL),B             ; 
1308: 00           NOP                      ; 
1309: E0           RET   PO                 ; 
130A: 10 08        DJNZ  <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1314" title="$1314" target="_self">$1314</a>              ; 
130C: 78           LD    A,B                ; 
130D: 88           ADC   A,B                ; 
130E: 88           ADC   A,B                ; 
130F: 70           LD    (HL),B             ; 
1310: 00           NOP                      ; 
1311: F8           RET   M                  ; 
1312: 80           ADD   A,B                ; 
<span class="siteTarget" id="1313">1</span>313: 40           LD    B,B                ; 
<span class="siteTarget" id="1314">1</span>314: 20 10        JR    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1326" title="$1326" target="_self">$1326</a>           ; 
<span class="siteTarget" id="1316">1</span>316: 10 10        DJNZ  $1328              ; 
1318: 00           NOP                      ; 
1319: 70           LD    (HL),B             ; 
131A: 88           ADC   A,B                ; 
131B: 88           ADC   A,B                ; 
131C: 70           LD    (HL),B             ; 
131D: 88           ADC   A,B                ; 
131E: 88           ADC   A,B                ; 
131F: 70           LD    (HL),B             ; 
1320: 00           NOP                      ; 
1321: 70           LD    (HL),B             ; 
1322: 88           ADC   A,B                ; 
1323: 88           ADC   A,B                ; 
1324: F0           RET   P                  ; 
1325: 80           ADD   A,B                ; 
<span class="siteTarget" id="1326">1</span>326: 40           LD    B,B                ; 
1327: 38 00        JR    C,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1329" title="$1329" target="_self">$1329</a>            ; 
<span class="siteTarget" id="1329">1</span>329: 20 A8        JR    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#12D3" title="$12D3" target="_self">$12D3</a>           ; 
132B: 70           LD    (HL),B             ; 
132C: 20 70        JR    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#139E" title="$139E" target="_self">$139E</a>           ; 
132E: A8           XOR   B                  ; 
132F: 20 00        JR    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1331" title="$1331" target="_self">$1331</a>           ; 
<span class="siteTarget" id="1331">1</span>331: 10 20        DJNZ  $1353              ; 
1333: 40           LD    B,B                ; 
1334: 80           ADD   A,B                ; 
1335: 40           LD    B,B                ; 
1336: 20 10        JR    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1348" title="$1348" target="_self">$1348</a>           ; 
1338: 00           NOP                      ; 
1339: 00           NOP                      ; 
133A: 00           NOP                      ; 
133B: 00           NOP                      ; 
133C: 00           NOP                      ; 
133D: 00           NOP                      ; 
133E: 00           NOP                      ; 
133F: 20 00        JR    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1341" title="$1341" target="_self">$1341</a>           ; 
<span class="siteTarget" id="1341">1</span>341: 00           NOP                      ; 
1342: 00           NOP                      ; 
1343: 00           NOP                      ; 
1344: 00           NOP                      ; 
1345: 00           NOP                      ; 
1346: 00           NOP                      ; 
1347: 00           NOP                      ; 
<span class="siteTarget" id="1348">1</span>348: 26 0F        LD    H,$0F              ; 
134A: 0B           DEC   BC                 ; 
134B: 28 01        JR    Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#134E" title="$134E" target="_self">$134E</a>            ; 
134D: 0C           INC   C                  ; 
<span class="siteTarget" id="134E">1</span>34E: 0C           INC   C                  ; 
134F: 28 12        JR    Z,$1363            ; 
1351: 01 0D 13     LD    BC,$130D           ; 
1354: 28 26        JR    Z,$137C            ; 
1356: 03           INC   BC                 ; 
1357: 08           EX    AF,AF'             ; 
1358: 05           DEC   B                  ; 
1359: 03           INC   BC                 ; 
135A: 0B           DEC   BC                 ; 
135B: 28 09        JR    Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1366" title="$1366" target="_self">$1366</a>            ; 
135D: 0E 10        LD    C,$10              ; 
135F: 0F           RRCA                     ; 
1360: 12           LD    (DE),A             ; 
1361: 14           INC   D                  ; 
1362: 26 03        LD    H,$03              ; 
1364: 08           EX    AF,AF'             ; 
1365: 05           DEC   B                  ; 
<span class="siteTarget" id="1366">1</span>366: 03           INC   BC                 ; 
1367: 0B           DEC   BC                 ; 
1368: 28 13        JR    Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#137D" title="$137D" target="_self">$137D</a>            ; 
136A: 0F           RRCA                     ; 
136B: 15           DEC   D                  ; 
136C: 0E 04        LD    C,$04              ; 
136E: 28 10        JR    Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1380" title="$1380" target="_self">$1380</a>            ; 
1370: 0F           RRCA                     ; 
1371: 12           LD    (DE),A             ; 
1372: 14           INC   D                  ; 
1373: 1C           INC   E                  ; 
1374: 28 28        JR    Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#139E" title="$139E" target="_self">$139E</a>            ; 
1376: 1B           DEC   DE                 ; 
1377: 1C           INC   E                  ; 
1378: 1D           DEC   E                  ; 
1379: 1E 1F        LD    E,$1F              ; 
137B: 20 21        JR    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#139E" title="$139E" target="_self">$139E</a>           ; 
<span class="siteTarget" id="137D">1</span>37D: 22 25 15     LD    ($1525),HL         ; 
<span class="siteTarget" id="1380">1</span>380: 06 0F        LD    B,$0F              ; 
1382: 27           DAA                      ; 
1383: 06 25        LD    B,$25              ; 
1385: 0D           DEC   C                  ; 
1386: 09           ADD   HL,BC              ; 
1387: 13           INC   DE                 ; 
1388: 13           INC   DE                 ; 
1389: 0C           INC   C                  ; 
138A: 25           DEC   H                  ; 
138B: 0C           INC   C                  ; 
138C: 01 15 27     LD    BC,$2715           ; 
138F: 08           EX    AF,AF'             ; 
1390: 25           DEC   H                  ; 
1391: 09           ADD   HL,BC              ; 
1392: 0E 16        LD    C,$16              ; 
1394: 27           DAA                      ; 
1395: 08           EX    AF,AF'             ; 
1396: 25           DEC   H                  ; 
1397: 05           DEC   B                  ; 
1398: 18 14        JR    $13AE              ; 
139A: 12           LD    (DE),A             ; 
139B: 01 25 09     LD    BC,$0925           ; 
<span class="siteTarget" id="139E">1</span>39E: 0E 16        LD    C,$16              ; 
13A0: 27           DAA                      ; 
13A1: 1C           INC   E                  ; 
13A2: 25           DEC   H                  ; 
13A3: 09           ADD   HL,BC              ; 
13A4: 0E 16        LD    C,$16              ; 
13A6: 27           DAA                      ; 
13A7: 1D           DEC   E                  ; 
13A8: 25           DEC   H                  ; 
13A9: 09           ADD   HL,BC              ; 
13AA: 0E 16        LD    C,$16              ; 
13AC: 27           DAA                      ; 
13AD: 1E 25        LD    E,$25              ; 
13AF: 09           ADD   HL,BC              ; 
13B0: 0E 16        LD    C,$16              ; 
13B2: 27           DAA                      ; 
13B3: 1F           RRA                      ; 
13B4: 25           DEC   H                  ; 
13B5: 15           DEC   D                  ; 
13B6: 06 0F        LD    B,$0F              ; 
13B8: 27           DAA                      ; 
13B9: 08           EX    AF,AF'             ; 
13BA: 25           DEC   H                  ; 
13BB: 16 09        LD    D,$09              ; 
13BD: 04           INC   B                  ; 
13BE: 27           DAA                      ; 
13BF: 12           LD    (DE),A             ; 
13C0: 20 50        JR    NZ,$1412           ; 
13C2: 88           ADC   A,B                ; 
13C3: 88           ADC   A,B                ; 
13C4: F8           RET   M                  ; 
13C5: 88           ADC   A,B                ; 
13C6: 88           ADC   A,B                ; 
13C7: 00           NOP                      ; 
13C8: 78           LD    A,B                ; 
13C9: 88           ADC   A,B                ; 
13CA: 88           ADC   A,B                ; 
13CB: 78           LD    A,B                ; 
13CC: 88           ADC   A,B                ; 
13CD: 88           ADC   A,B                ; 
13CE: 78           LD    A,B                ; 
13CF: 00           NOP                      ; 
13D0: 70           LD    (HL),B             ; 
13D1: 88           ADC   A,B                ; 
13D2: 08           EX    AF,AF'             ; 
13D3: 08           EX    AF,AF'             ; 
13D4: 08           EX    AF,AF'             ; 
13D5: 88           ADC   A,B                ; 
13D6: 70           LD    (HL),B             ; 
13D7: 00           NOP                      ; 
13D8: 70           LD    (HL),B             ; 
13D9: 90           SUB   B                  ; 
13DA: 90           SUB   B                  ; 
13DB: 90           SUB   B                  ; 
13DC: 90           SUB   B                  ; 
13DD: 90           SUB   B                  ; 
13DE: 70           LD    (HL),B             ; 
13DF: 00           NOP                      ; 
13E0: E0           RET   PO                 ; 
13E1: 20 20        JR    NZ,$1403           ; 
13E3: E0           RET   PO                 ; 
13E4: 20 20        JR    NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1406" title="$1406" target="_self">$1406</a>           ; 
13E6: E0           RET   PO                 ; 
13E7: 00           NOP                      ; 
13E8: 3E 02        LD    A,$02              ; 
13EA: 02           LD    (BC),A             ; 
13EB: 1E 02        LD    E,$02              ; 
13ED: 02           LD    (BC),A             ; 
13EE: 02           LD    (BC),A             ; 
13EF: 00           NOP                      ; 
13F0: 3C           INC   A                  ; 
13F1: 02           LD    (BC),A             ; 
13F2: 02           LD    (BC),A             ; 
13F3: 02           LD    (BC),A             ; 
13F4: 32 22 3C     ;LD    ($3C22),A          ; 
13F7: 00           NOP                      ; 
13F8: 22 22 22     LD    ($2222),HL         ; 
13FB: 3E 22        LD    A,$22              ; 
13FD: 22 22 00     ;LD    ($0022),HL         ; 


;1000: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
;1020: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
;1040: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
;1060: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
;1080: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
;10A0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
;10C0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
;10E0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
;1100: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
;1120: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
;1140: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
;1160: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
;1180: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
;11A0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
;11C0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
;11E0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
;1200: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
;1220: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
;1240: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
;1260: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
;1280: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
;12A0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
;12C0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
;12E0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
;1300: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
;1320: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
;1340: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
;1360: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
;1380: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
;13A0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
;13C0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
;13E0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00

<span class="siteTarget" id="DrawShiftedSprite">D</span>rawShiftedSprite: 
; The only differences between this and EraseSimpleSprite is two CPL instructions in the latter and
; the use of AND instead of OR. NOP takes the same amount of time/space as CPL. So the two NOPs
; here make these two parallel routines the same size and speed.
;
1400: 00              NOP                         ; Time/size pad to match CPL in EraseShiftedSprite
1401: CD 74 14        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#CnvtPixNumber" title="$1474" target="_self">CnvtPixNumber</a>       ; Convert pixel number to coord and shift
1404: 00              NOP                         ; Time/size pad to match CPL in EraseShiftedSprite
<span class="siteTarget" id="1405">1</span>405: C5              PUSH    BC                  ; Hold count
<span class="siteTarget" id="1406">1</span>406: E5              PUSH    HL                  ; Hold start coordinate
1407: 1A              LD      A,(DE)              ; Get the picture bits
1408: D3 04           OUT     (<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0004pw" title="$04" target="TABLE_2">SHFT_DATA</a>),A       ; Store in shift register
140A: DB 03           IN      A,(<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0003pr" title="$03" target="TABLE_2">SHFT_IN</a>)         ; Read the shifted pixels
140C: B6              OR      (HL)                ; OR them onto the screen
140D: 77              LD      (HL),A              ; Store them back to screen
140E: 23              INC     HL                  ; Next colummn on screen
140F: 13              INC     DE                  ; Next in picture
1410: AF              XOR     A                   ; Shift over ...
1411: D3 04           OUT     (<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0004pw" title="$04" target="TABLE_2">SHFT_DATA</a>),A       ; ... to next byte in register (shift in 0)
1413: DB 03           IN      A,(<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0003pr" title="$03" target="TABLE_2">SHFT_IN</a>)         ; Read the shifted pixels
1415: B6              OR      (HL)                ; OR them onto the screen
1416: 77              LD      (HL),A              ; Store them back to screen
1417: E1              POP     HL                  ; Restore starting coordinate
1418: 01 20 00        LD      BC,$0020            ; Add 32 ...
141B: 09              ADD     HL,BC               ; ... to coordinate (move to next row)
141C: C1              POP     BC                  ; Restore count
141D: 05              DEC     B                   ; All done?
141E: C2 05 14        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1405" title="$1405" target="_self">$1405</a>            ; No ... go do all rows
1421: C9              RET                         ; Done

1422: 00 00 ; ** Why?

<span class="siteTarget" id="EraseSimpleSprite">E</span>raseSimpleSprite: 
; Clear a sprite from the screen (standard pixel number descriptor).
; ** We clear 2 bytes even though the draw-simple only draws one.
1424: CD 74 14        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#CnvtPixNumber" title="$1474" target="_self">CnvtPixNumber</a>       ; Convert pixel number in HL
<span class="siteTarget" id="1427">1</span>427: C5              PUSH    BC                  ; Hold
1428: E5              PUSH    HL                  ; Hold
1429: AF              XOR     A                   ; 0
142A: 77              LD      (HL),A              ; Clear screen byte
142B: 23              INC     HL                  ; Next byte
142C: 77              LD      (HL),A              ; Clear byte
142D: 23              INC     HL                  ; ** Is this to mimic timing? We increment then pop
142E: E1              POP     HL                  ; Restore screen coordinate
142F: 01 20 00        LD      BC,$0020            ; Add 1 row ...
1432: 09              ADD     HL,BC               ; ... to screen coordinate
1433: C1              POP     BC                  ; Restore counter
1434: 05              DEC     B                   ; All rows done?
1435: C2 27 14        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1427" title="$1427" target="_self">$1427</a>            ; Do all rows
1438: C9              RET                         ; out

<span class="siteTarget" id="DrawSimpSprite">D</span>rawSimpSprite: 
; Display character to screen
; HL = screen coordinates
; DE = character data
; B = number of rows
1439: C5              PUSH    BC                  ; Preserve counter
143A: 1A              LD      A,(DE)              ; From character set ...
143B: 77              LD      (HL),A              ; ... to screen
143C: 13              INC     DE                  ; Next in character set
143D: 01 20 00        LD      BC,$0020            ; Next row ...
1440: 09              ADD     HL,BC               ; ... on screen
1441: C1              POP     BC                  ; Restore counter
1442: 05              DEC     B                   ; Decrement counter
1443: C2 39 14        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawSimpSprite" title="$1439" target="_self">DrawSimpSprite</a>   ; Do all
1446: C9              RET                         ; Out

1447: 00 00 00 00 00 00 00 00 00 00 00 ; ** Why?

<span class="siteTarget" id="EraseShifted">E</span>raseShifted: 
; Erases a shifted sprite from screen (like for player's explosion)
1452: CD 74 14        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#CnvtPixNumber" title="$1474" target="_self">CnvtPixNumber</a>       ; Convert pixel number in HL to coorinates with shift
<span class="siteTarget" id="1455">1</span>455: C5              PUSH    BC                  ; Hold BC
1456: E5              PUSH    HL                  ; Hold coordinate
1457: 1A              LD      A,(DE)              ; Get picture value
1458: D3 04           OUT     (<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0004pw" title="$04" target="TABLE_2">SHFT_DATA</a>),A       ; Value into shift register
145A: DB 03           IN      A,(<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0003pr" title="$03" target="TABLE_2">SHFT_IN</a>)         ; Read shifted sprite picture
145C: 2F              CPL                         ; Reverse it (erasing bits)
145D: A6              AND     (HL)                ; Erase the bits from the screen
145E: 77              LD      (HL),A              ; Store the erased pattern back
145F: 23              INC     HL                  ; Next column on screen
1460: 13              INC     DE                  ; Next in image
1461: AF              XOR     A                   ; Shift register over ...
1462: D3 04           OUT     (<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0004pw" title="$04" target="TABLE_2">SHFT_DATA</a>),A       ; ... 8 bits (shift in 0)
1464: DB 03           IN      A,(<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0003pr" title="$03" target="TABLE_2">SHFT_IN</a>)         ; Read 2nd byte of image
1466: 2F              CPL                         ; Reverse it (erasing bits)
1467: A6              AND     (HL)                ; Erase the bits from the screen
1468: 77              LD      (HL),A              ; Store the erased pattern back
1469: E1              POP     HL                  ; Restore starting coordinate
146A: 01 20 00        LD      BC,$0020            ; Add 32 ...
146D: 09              ADD     HL,BC               ; ... to next row
146E: C1              POP     BC                  ; Restore BC (count)
146F: 05              DEC     B                   ; All rows done?
1470: C2 55 14        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1455" title="$1455" target="_self">$1455</a>            ; No ... erase all
1473: C9              RET                         ; Done

<span class="siteTarget" id="CnvtPixNumber">C</span>nvtPixNumber: 
; Convert pixel number in HL to screen coordinate and shift amount.
; HL gets screen coordinate.
; Hardware shift-register gets amount.
1474: 7D              LD      A,L                 ; Get X coordinate
1475: E6 07           AND     $07                 ; Shift by pixel position
1477: D3 02           OUT     (<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0002pw" title="$02" target="TABLE_2">SHFTAMNT</a>),A        ; Write shift amount to hardware
1479: C3 47 1A        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ConvToScr" title="$1A47" target="_self">ConvToScr</a>           ; HL = HL/8 + 2000 (screen coordinate)

<span class="siteTarget" id="RememberShields">R</span>ememberShields: 
; In a multi-player game the player's shields are block-copied to and from RAM between turns.
; HL = screen pointer
; DE = memory buffer
; B = number of rows
; C = number of columns
147C: C5              PUSH    BC                  ; Hold counter
147D: E5              PUSH    HL                  ; Hold start
<span class="siteTarget" id="147E">1</span>47E: 7E              LD      A,(HL)              ; From sprite ... (should be DE)
147F: 12              LD      (DE),A              ; ... to screen ... (should be HL)
1480: 13              INC     DE                  ; Next in sprite
1481: 23              INC     HL                  ; Next on screen
1482: 0D              DEC     C                   ; All columns done?
1483: C2 7E 14        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#147E" title="$147E" target="_self">$147E</a>            ; No ... do multi columns
1486: E1              POP     HL                  ; Restore screen start
1487: 01 20 00        LD      BC,$0020            ; Add 32 ...
148A: 09              ADD     HL,BC               ; ... to get to next row
148B: C1              POP     BC                  ; Pop the counters
148C: 05              DEC     B                   ; All rows done?
148D: C2 7C 14        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#RememberShields" title="$147C" target="_self">RememberShields</a>  ; No ... do multi rows
1490: C9              RET                         ; Done

<span class="siteTarget" id="DrawSprCollision">D</span>rawSprCollision: 
1491: CD 74 14        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#CnvtPixNumber" title="$1474" target="_self">CnvtPixNumber</a>       ; Convert pixel number to coord and shift
1494: AF              XOR     A                   ; Clear the ...
1495: 32 61 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2061" title="$2061" target="TABLE_1">collision</a>),A       ; ... collision-detection flag
<span class="siteTarget" id="1498">1</span>498: C5              PUSH    BC                  ; Hold count
1499: E5              PUSH    HL                  ; Hold screen
149A: 1A              LD      A,(DE)              ; Get byte
149B: D3 04           OUT     (<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0004pw" title="$04" target="TABLE_2">SHFT_DATA</a>),A       ; Write first byte to shift register
149D: DB 03           IN      A,(<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0003pr" title="$03" target="TABLE_2">SHFT_IN</a>)         ; Read shifted pattern
149F: F5              PUSH    AF                  ; Hold the pattern
14A0: A6              AND     (HL)                ; Any bits from pixel collide with bits on screen?
14A1: CA A9 14        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#14A9" title="$14A9" target="_self">$14A9</a>             ; No ... leave flag alone
14A4: 3E 01           LD      A,$01               ; Yes ... set ...
14A6: 32 61 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2061" title="$2061" target="TABLE_1">collision</a>),A       ; ... collision flag
<span class="siteTarget" id="14A9">1</span>4A9: F1              POP     AF                  ; Restore the pixel pattern
14AA: B6              OR      (HL)                ; OR it onto the screen
14AB: 77              LD      (HL),A              ; Store new screen value
14AC: 23              INC     HL                  ; Next byte on screen
14AD: 13              INC     DE                  ; Next in pixel pattern
14AE: AF              XOR     A                   ; Write zero ...
14AF: D3 04           OUT     (<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0004pw" title="$04" target="TABLE_2">SHFT_DATA</a>),A       ; ... to shift register
14B1: DB 03           IN      A,(<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0003pr" title="$03" target="TABLE_2">SHFT_IN</a>)         ; Read 2nd half of shifted sprite
14B3: F5              PUSH    AF                  ; Hold pattern
14B4: A6              AND     (HL)                ; Any bits from pixel collide with bits on screen?
14B5: CA BD 14        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#14BD" title="$14BD" target="_self">$14BD</a>             ; No ... leave flag alone
14B8: 3E 01           LD      A,$01               ; Yes ... set ...
14BA: 32 61 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2061" title="$2061" target="TABLE_1">collision</a>),A       ; ... collision flag
<span class="siteTarget" id="14BD">1</span>4BD: F1              POP     AF                  ; Restore the pixel pattern
14BE: B6              OR      (HL)                ; OR it onto the screen
14BF: 77              LD      (HL),A              ; Store new screen pattern
14C0: E1              POP     HL                  ; Starting screen coordinate
14C1: 01 20 00        LD      BC,$0020            ; Add 32 ...
14C4: 09              ADD     HL,BC               ; ... to get to next row
14C5: C1              POP     BC                  ; Restore count
14C6: 05              DEC     B                   ; All done?
14C7: C2 98 14        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1498" title="$1498" target="_self">$1498</a>            ; No ... do all rows
14CA: C9              RET                         ; Done

<span class="siteTarget" id="ClearSmallSprite">C</span>learSmallSprite: 
; Clear a one byte sprite at HL. B=number of rows.
14CB: AF              XOR     A                   ; 0
<span class="siteTarget" id="14CC">1</span>4CC: C5              PUSH    BC                  ; Preserve BC
14CD: 77              LD      (HL),A              ; Clear screen byte
14CE: 01 20 00        LD      BC,$0020            ; Bump HL ...
14D1: 09              ADD     HL,BC               ; ... one screen row
14D2: C1              POP     BC                  ; Restore
14D3: 05              DEC     B                   ; All done?
14D4: C2 CC 14        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#14CC" title="$14CC" target="_self">$14CC</a>            ; No ... clear all
14D7: C9              RET                         

<span class="siteTarget" id="PlayerShotHit">P</span>layerShotHit: 
; The player's shot hit something (or is being removed from play) 
;
14D8: 3A 25 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2025" title="$2025" target="TABLE_1">plyrShotStatus</a>)  ; Player shot flag
14DB: FE 05           CP      $05                 ; Alien explosion in progress?
14DD: C8              RET     Z                   ; Yes ... ignore this function
14DE: FE 02           CP      $02                 ; Normal movement?
14E0: C0              RET     NZ                  ; No ... out
;
14E1: 3A 29 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2029" title="$2029" target="TABLE_1">obj1CoorYr</a>)      ; Get Yr coordinate of player shot
14E4: FE D8           CP      $D8                 ; Compare to 216 (40 from Top-rotated)
14E6: 47              LD      B,A                 ; Hold value for later
14E7: D2 30 15        JP      NC,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1530" title="$1530" target="_self">$1530</a>            ; Yr is within 40 from top initiate miss-explosion (shot flag 3)
14EA: 3A 02 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2002" title="$2002" target="TABLE_1">alienIsExploding</a>)           ; Is an alien ...
14ED: A7              AND     A                   ; ... blowing up?
14EE: C8              RET     Z                   ; No ... out
;
14EF: 78              LD      A,B                 ; Get original Yr coordinate back to A
14F0: FE CE           CP      $CE                 ; Compare to 206 (50 from rotated top)
14F2: D2 79 15        JP      NC,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1579" title="$1579" target="_self">$1579</a>            ; Yr is within 50 from top? Yes ... saucer must be hit
14F5: C6 06           ADD     A,$06               ; Offset to coordinate for wider "explosion" picture
14F7: 47              LD      B,A                 ; Hold that
14F8: 3A 09 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2009" title="$2009" target="TABLE_1">refAlienYr</a>)      ; Ref alien Y coordianate

; If the lower 4 rows are all empty then the reference alien's Y coordinate will wrap around from 0 to F8.
; At this point the top row of aliens is in the shields and we will assume that everything is within
; the rack.

14FB: FE 90           CP      $90                 ; This is true if ...
14FD: D2 04 15        JP      NC,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#CodeBug1" title="$1504" target="_self">CodeBug1</a>         ; ... aliens are down in the shields
1500: B8              CP      B                   ; Compare to shot's coordinate
1501: D2 30 15        JP      NC,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1530" title="$1530" target="_self">$1530</a>            ; Outside the rack-square ... do miss explosion

<span class="siteTarget" id="CodeBug1">C</span>odeBug1: 
;
; We get here if the player's shot hit something within the rack area (a shot or an alien).
; Find the alien that is (or would be) where the shot hit. If there is no alien alive at the row/column
; thn the player hit an alien missile. If there is an alien then explode the alien.
;
; There is a code bug here, but it is extremely subtle. The algorithm for finding the row/column in the
; rack works by adding 16 to the reference coordinates (X for column, Y for row) until it passes or equals
; the target coordinates. This works great as long as the target point is within the alien's rack area.
; If the reference point is far to the right, the column number will be greater than 11, which messes
; up the column/row-to-pointer math.
;
; The entire rack of aliens is based on the lower left alien. Imagine all aliens are dead except the
; upper left. It wiggles down the screen and enters the players shields on the lower left where it begins
; to eat them. Imagine the player is under his own shields on the right side of the screen and fires a
; shot into his own shield.
;
; The alien is in the rack on row 4 (rows are numbered from bottom up starting with 0). The shot hits
; the shields below the alien's Y coordinate and gets correctly assigned to row 3. The alien is in the rack
; at column 0 (columns are numbered from left to right starting with 0). The shot hits the shields far to
; the right of the alien's X coordinate. The algorithm says it is in column 11. But 0-10 are the only
; correct values.
;
; The column/row-to-pointer math works by multiplying the row by 11 and adding the column. For the alien 
; that is 11*4 + 0 = 44. For the shot that is 11*3 +11 = 44. The game thinks the shot hit the alien.
;
1504: 68              LD      L,B                 ; L now holds the shot coordinate (adjusted)
1505: CD 62 15        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#FindRow" title="$1562" target="_self">FindRow</a>             ; Look up row number to B
1508: 3A 2A 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#202A" title="$202A" target="TABLE_1">obj1CoorXr</a>)      ; Player's shot's Xr coordinate ...
150B: 67              LD      H,A                 ; ... to H
150C: CD 6F 15        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#FindColumn" title="$156F" target="_self">FindColumn</a>          ; Get alien's coordinate
150F: 22 64 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2064" title="$2064" target="TABLE_1">expAlienYr</a>),HL     ; Put it in the exploding-alien descriptor
1512: 3E 05           LD      A,$05               ; Flag alien explosion ...
1514: 32 25 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2025" title="$2025" target="TABLE_1">plyrShotStatus</a>),A  ; ... in progress
1517: CD 81 15        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#GetAlienStatPtr" title="$1581" target="_self">GetAlienStatPtr</a>     ; Get descriptor for alien
151A: 7E              LD      A,(HL)              ; Is alien ...
151B: A7              AND     A                   ; ... alive
151C: CA 30 15        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1530" title="$1530" target="_self">$1530</a>             ; No ... must have been an alien shot
;
151F: 36 00           LD      (HL),$00            ; Make alien invader dead
1521: CD 5F 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ScoreForAlien" title="$0A5F" target="_self">ScoreForAlien</a>       ; Makes alien explosion sound and adjust score
1524: CD 3B 1A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ReadDesc" title="$1A3B" target="_self">ReadDesc</a>            ; Load 5 byte sprite descriptor
1527: CD D3 15        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawSprite" title="$15D3" target="_self">DrawSprite</a>          ; Draw explosion sprite on screen
152A: 3E 10           LD      A,$10               ; Initiate alien-explosion
152C: 32 03 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2003" title="$2003" target="TABLE_1">expAlienTimer</a>),A   ; ... timer to 16
152F: C9              RET                         ; Out
;
; Player shot leaving playfield, hitting shield, or hitting an alien shot
<span class="siteTarget" id="1530">1</span>530: 3E 03           LD      A,$03               ; Mark ...
1532: 32 25 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2025" title="$2025" target="TABLE_1">plyrShotStatus</a>),A  ; ... player shot hit something other than alien
1535: C3 4A 15        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#154A" title="$154A" target="_self">$154A</a>               ; Finish up
;
<span class="siteTarget" id="AExplodeTime">A</span>ExplodeTime: 
; Time down the alien explosion. Remove when done.
1538: 21 03 20        LD      HL,$2003            ; Decrement alien explosion ...
153B: 35              DEC     (HL)                ; ... timer
153C: C0              RET     NZ                  ; Not done  ... out
153D: 2A 64 20        LD      HL,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2064" title="$2064" target="TABLE_1">expAlienYr</a>)     ; Pixel pointer for exploding alien
1540: 06 10           LD      B,$10               ; 16 row pixel
1542: CD 24 14        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#EraseSimpleSprite" title="$1424" target="_self">EraseSimpleSprite</a>   ; Clear the explosion sprite from the screen
<span class="siteTarget" id="1545">1</span>545: 3E 04           LD      A,$04               ; 4 means that ...
1547: 32 25 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2025" title="$2025" target="TABLE_1">plyrShotStatus</a>),A  ; ... alien has exploded (remove from active duty)
;
<span class="siteTarget" id="154A">1</span>54A: AF              XOR     A                   ; Turn off ...
154B: 32 02 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2002" title="$2002" target="TABLE_1">alienIsExploding</a>),A           ; ... alien-is-blowing-up flag
154E: 06 F7           LD      B,$F7               ; Turn off ...
1550: C3 DC 19        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#SoundBits3Off" title="$19DC" target="_self">SoundBits3Off</a>       ; ... alien exploding sound

1553: 00                          

<span class="siteTarget" id="Cnt16s">C</span>nt16s: 
; Count number of 16s needed to bring reference (in A) up to target (in H).
; If the reference starts out beyond the target then we add 16s as long as
; the reference has a signed bit. But these aren't signed quantities. This
; doesn't make any sense. This counting algorithm produces questionable 
; results if the reference is beyond the target.
;
1554: 0E 00           LD      C,$00               ; Count of 16s
1556: BC              CP      H                   ; Compare reference coordinate to target
1557: D4 90 15        CALL    NC,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#WrapRef" title="$1590" target="_self">WrapRef</a>          ; If reference is greater or equal then do something questionable ... see below
<span class="siteTarget" id="155A">1</span>55A: BC              CP      H                   ; Compare reference coordinate to target
155B: D0              RET     NC                  ; If reference is greater or equal then done
155C: C6 10           ADD     A,$10               ; Add 16 to reference
155E: 0C              INC     C                   ; Bump 16s count
155F: C3 5A 15        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#155A" title="$155A" target="_self">$155A</a>               ; Keep testing

<span class="siteTarget" id="FindRow">F</span>indRow: 
; L contains a Yr coordinate. Find the row number within the rack that corresponds
; to the Yr coordinate. Return the row coordinate in L and the row number in C.
;
1562: 3A 09 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2009" title="$2009" target="TABLE_1">refAlienYr</a>)      ; Reference alien Yr coordinate  
1565: 65              LD      H,L                 ; Target Yr coordinate to H
1566: CD 54 15        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#Cnt16s" title="$1554" target="_self">Cnt16s</a>              ; Count 16s needed to bring ref alien to target
1569: 41              LD      B,C                 ; Count to B
156A: 05              DEC     B                   ; Base 0
156B: DE 10           SBC     A,$10               ; The counting also adds 16 no matter what
156D: 6F              LD      L,A                 ; To coordinate
156E: C9              RET                         ; Done

<span class="siteTarget" id="FindColumn">F</span>indColumn: 
; H contains a Xr coordinate. Find the column number within the rack that corresponds
; to the Xr coordinate. Return the column coordinate in H and the column number in C.
;
156F: 3A 0A 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#200A" title="$200A" target="TABLE_1">refAlienXr</a>)      ; Reference alien Yn coordinate
1572: CD 54 15        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#Cnt16s" title="$1554" target="_self">Cnt16s</a>              ; Count 16s to bring Y to target Y
1575: DE 10           SBC     A,$10               ; Subtract off extra 16
1577: 67              LD      H,A                 ; To H
1578: C9              RET                         ; Done

<span class="siteTarget" id="1579">1</span>579: 3E 01           LD      A,$01               ; Mark flying ...
157B: 32 85 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2085" title="$2085" target="TABLE_1">saucerHit</a>),A       ; ... saucer has been hit
157E: C3 45 15        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1545" title="$1545" target="_self">$1545</a>               ; Remove player shot

<span class="siteTarget" id="GetAlienStatPtr">G</span>etAlienStatPtr: 
; B is row number. C is column number (starts at 1). 
; Return pointer to alien-status flag for current player.
1581: 78              LD      A,B                 ; Hold original
1582: 07              RLCA                        ; *2
1583: 07              RLCA                        ; *4
1584: 07              RLCA                        ; *8
1585: 80              ADD     A,B                 ; *9
1586: 80              ADD     A,B                 ; *10
1587: 80              ADD     A,B                 ; *11
1588: 81              ADD     A,C                 ; Add row offset to column offset
1589: 3D              DEC     A                   ; -1
158A: 6F              LD      L,A                 ; Set LSB of HL
158B: 3A 67 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2067" title="$2067" target="TABLE_1">playerDataMSB</a>)   ; Set ...
158E: 67              LD      H,A                 ; ... MSB of HL with active player indicator
158F: C9              RET                         

<span class="siteTarget" id="WrapRef">W</span>rapRef: 
; This is called if the reference point is greater than the target point. I believe the goal is to
; wrap the reference back around until it is lower than the target point. But the algorithm simply adds
; until the sign bit of the the reference is 0. If the target is 2 and the reference is 238 then this
; algorithm moves the reference 238+16=244 then 244+16=4. Then the algorithm stops. But the reference is
; STILL greater than the target.
;
; Also imagine that the target is 20 and the reference is 40. The algorithm adds 40+16=56, which is not
; negative, so it stops there.
;
; I think the intended code is "JP NC" instead of "JP M", but even that doesn't make sense.
; 
1590: 0C              INC     C                   ; Increase 16s count 
1591: C6 10           ADD     A,$10               ; Add 16 to ref
1593: FA 90 15        JP      M,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#WrapRef" title="$1590" target="_self">WrapRef</a>           ; Keep going till result is positive
1596: C9              RET                         ; Out

<span class="siteTarget" id="RackBump">R</span>ackBump: 
; When rack bumps the edge of the screen then the direction flips and the rack
; drops 8 pixels. The deltaX and deltaY values are changed here. Interestingly
; if there is only one alien left then the right value is 3 instead of the 
; usual 2. The left direction is always -2.
1597: 3A 0D 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#200D" title="$200D" target="TABLE_1">rackDirection</a>)   ; Get rack direction
159A: A7              AND     A                   ; Moving right?
159B: C2 B7 15        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#15B7" title="$15B7" target="_self">$15B7</a>            ; No ... handle moving left
;
159E: 21 A4 3E        LD      HL,$3EA4            ; Line down the right edge of playfield
15A1: CD C5 15        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#15C5" title="$15C5" target="_self">$15C5</a>               ; Check line down the edge
15A4: D0              RET     NC                  ; Nothing is there ... return
15A5: 06 FE           LD      B,$FE               ; Delta X of -2
15A7: 3E 01           LD      A,$01               ; Rack now moving right
;
<span class="siteTarget" id="15A9">1</span>5A9: 32 0D 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#200D" title="$200D" target="TABLE_1">rackDirection</a>),A   ; Set new rack direction
15AC: 78              LD      A,B                 ; B has delta X
15AD: 32 08 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2008" title="$2008" target="TABLE_1">refAlienDXr</a>),A     ; Set new delta X
15B0: 3A 0E 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#200E" title="$200E" target="TABLE_1">rackDownDelta</a>)   ; Set delta Y ...
15B3: 32 07 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2007" title="$2007" target="TABLE_1">refAlienDYr</a>),A     ; ... to drop rack by 8
15B6: C9              RET                         ; Done
;
<span class="siteTarget" id="15B7">1</span>5B7: 21 24 25        LD      HL,$2524            ; Line down the left edge of playfield
15BA: CD C5 15        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#15C5" title="$15C5" target="_self">$15C5</a>               ; Check line down the edge
15BD: D0              RET     NC                  ; Nothing is there ... return
15BE: CD F1 18        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#18F1" title="$18F1" target="_self">$18F1</a>               ; Get moving-right delta X value of 2 (3 if just one alien left)
15C1: AF              XOR     A                   ; Rack now moving left
15C2: C3 A9 15        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#15A9" title="$15A9" target="_self">$15A9</a>               ; Set rack direction
;
<span class="siteTarget" id="15C5">1</span>5C5: 06 17           LD      B,$17               ; Checking 23 bytes in a line up the screen from near the bottom
<span class="siteTarget" id="15C7">1</span>5C7: 7E              LD      A,(HL)              ; Get screen memory
15C8: A7              AND     A                   ; Is screen memory empty?
15C9: C2 6B 16        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#166B" title="$166B" target="_self">$166B</a>            ; No ... set carry flag and out
15CC: 23              INC     HL                  ; Next byte on screen
15CD: 05              DEC     B                   ; All column done?
15CE: C2 C7 15        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#15C7" title="$15C7" target="_self">$15C7</a>            ; No ... keep looking
15D1: C9              RET                         ; Return with carry flag clear

15D2: 00              NOP                         ; ** Why? Something optimized?

<span class="siteTarget" id="DrawSprite">D</span>rawSprite: 
; Draw sprite at [DE] to screen at pixel position in HL
; The hardware shift register is used in converting pixel positions
; to screen coordinates.
15D3: CD 74 14        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#CnvtPixNumber" title="$1474" target="_self">CnvtPixNumber</a>       ; Convert pixel number to screen/shift
15D6: E5              PUSH    HL                  ; Preserve screen coordinate
<span class="siteTarget" id="15D7">1</span>5D7: C5              PUSH    BC                  ; Hold for a second
15D8: E5              PUSH    HL                  ; Hold for a second
15D9: 1A              LD      A,(DE)              ; From sprite data
15DA: D3 04           OUT     (<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0004pw" title="$04" target="TABLE_2">SHFT_DATA</a>),A       ; Write data to shift register
15DC: DB 03           IN      A,(<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0003pr" title="$03" target="TABLE_2">SHFT_IN</a>)         ; Read back shifted amount
15DE: 77              LD      (HL),A              ; Shifted sprite to screen
15DF: 23              INC     HL                  ; Adjacent cell
15E0: 13              INC     DE                  ; Next in sprite data
15E1: AF              XOR     A                   ; 0
15E2: D3 04           OUT     (<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0004pw" title="$04" target="TABLE_2">SHFT_DATA</a>),A       ; Write 0 to shift register
15E4: DB 03           IN      A,(<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0003pr" title="$03" target="TABLE_2">SHFT_IN</a>)         ; Read back remainder of previous
15E6: 77              LD      (HL),A              ; Write remainder to adjacent
15E7: E1              POP     HL                  ; Old screen coordinate
15E8: 01 20 00        LD      BC,$0020            ; Offset screen ...
15EB: 09              ADD     HL,BC               ; ... to next row
15EC: C1              POP     BC                  ; Restore count
15ED: 05              DEC     B                   ; All done?
15EE: C2 D7 15        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#15D7" title="$15D7" target="_self">$15D7</a>            ; No ... do all
15F1: E1              POP     HL                  ; Restore HL
15F2: C9              RET                         ; Done

<span class="siteTarget" id="CountAliens">C</span>ountAliens: 
; Count number of aliens remaining in active game and return count 2082 holds the current count.
; If only 1, 206B gets a flag of 1 ** but ever nobody checks this
15F3: CD 11 16        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#GetPlayerDataPtr" title="$1611" target="_self">GetPlayerDataPtr</a>    ; Get active player descriptor
15F6: 01 00 37        LD      BC,$3700            ; B=55 aliens to check?
<span class="siteTarget" id="15F9">1</span>5F9: 7E              LD      A,(HL)              ; Get byte
15FA: A7              AND     A                   ; Is it a zero?
15FB: CA FF 15        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#15FF" title="$15FF" target="_self">$15FF</a>             ; Yes ... don't count it
15FE: 0C              INC     C                   ; Count the live aliens
<span class="siteTarget" id="15FF">1</span>5FF: 23              INC     HL                  ; Next alien
1600: 05              DEC     B                   ; Count ...
1601: C2 F9 15        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#15F9" title="$15F9" target="_self">$15F9</a>            ; ... all alien indicators
1604: 79              LD      A,C                 ; Get the count
1605: 32 82 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2082" title="$2082" target="TABLE_1">numAliens</a>),A       ; Hold it
1608: FE 01           CP      $01                 ; Just one?
160A: C0              RET     NZ                  ; No keep going
160B: 21 6B 20        LD      HL,$206B            ; Set flag if ...
160E: 36 01           LD      (HL),$01            ; ... only one alien left
1610: C9              RET                         ; Out

<span class="siteTarget" id="GetPlayerDataPtr">G</span>etPlayerDataPtr: 
; Set HL with 2100 if player 1 is active or 2200 if player 2 is active
;
1611: 2E 00           LD      L,$00               ; Byte boundary
1613: 3A 67 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2067" title="$2067" target="TABLE_1">playerDataMSB</a>)   ; Active player number
1616: 67              LD      H,A                 ; Set HL to data
1617: C9              RET                         ; Done

<span class="siteTarget" id="PlrFireOrDemo">P</span>lrFireOrDemo: 
; Initiate player fire if button is pressed.
; Demo commands are parsed here if in demo mode
1618: 3A 15 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2015" title="$2015" target="TABLE_1">playerAlive</a>)     ; Is there an active player?
161B: FE FF           CP      $FF                 ; FF = alive
161D: C0              RET     NZ                  ; Player has been shot - no firing
161E: 21 10 20        LD      HL,$2010            ; Get player ...
1621: 7E              LD      A,(HL)              ; ... task ...
1622: 23              INC     HL                  ; ... timer ...
1623: 46              LD      B,(HL)              ; ... value
1624: B0              OR      B                   ; Is the timer 0 (object active)?
1625: C0              RET     NZ                  ; No ... no firing till player object starts
1626: 3A 25 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2025" title="$2025" target="TABLE_1">plyrShotStatus</a>)  ; Does the player have ...
1629: A7              AND     A                   ; ... a shot on the screen?
162A: C0              RET     NZ                  ; Yes ... ignore
162B: 3A EF 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20EF" title="$20EF" target="TABLE_1">gameMode</a>)        ; Are we in ...
162E: A7              AND     A                   ; ... game mode?
162F: CA 52 16        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1652" title="$1652" target="_self">$1652</a>             ; No ... in demo mode ... constant firing in demo
1632: 3A 2D 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#202D" title="$202D" target="TABLE_1">fireBounce</a>)      ; Is fire button ...
1635: A7              AND     A                   ; ... being held down?
1636: C2 48 16        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1648" title="$1648" target="_self">$1648</a>            ; Yes ... wait for bounce
1639: CD C0 17        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ReadInputs" title="$17C0" target="_self">ReadInputs</a>          ; Read active player controls
163C: E6 10           AND     $10                 ; Fire-button pressed?
163E: C8              RET     Z                   ; No ... out
163F: 3E 01           LD      A,$01               ; Flag
1641: 32 25 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2025" title="$2025" target="TABLE_1">plyrShotStatus</a>),A  ; Flag shot active
1644: 32 2D 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#202D" title="$202D" target="TABLE_1">fireBounce</a>),A      ; Flag that fire button is down
1647: C9              RET                         ; Out
<span class="siteTarget" id="1648">1</span>648: CD C0 17        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ReadInputs" title="$17C0" target="_self">ReadInputs</a>          ; Read active player controls
164B: E6 10           AND     $10                 ; Fire-button pressed?
164D: C0              RET     NZ                  ; Yes ... ignore
164E: 32 2D 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#202D" title="$202D" target="TABLE_1">fireBounce</a>),A      ; Else ... clear flag
1651: C9              RET                         ; Out
; Handle demo (constant fire, parse demo commands)
<span class="siteTarget" id="1652">1</span>652: 21 25 20        LD      HL,$2025            ; Demo fires ...
1655: 36 01           LD      (HL),$01            ; ... constantly
1657: 2A ED 20        LD      HL,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20ED" title="$20ED" target="TABLE_1">demoCmdPtrLSB</a>)  ; Demo command bufer
165A: 23              INC     HL                  ; Next position
165B: 7D              LD      A,L                 ; Command buffer ...
165C: FE 7E           CP      $7E                 ; ... wraps around
165E: DA 63 16        JP      C,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1663" title="$1663" target="_self">$1663</a>             ; ... Buffer from 1F74 to 1F7E
1661: 2E 74           LD      L,$74               ; ... overflow
<span class="siteTarget" id="1663">1</span>663: 22 ED 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20ED" title="$20ED" target="TABLE_1">demoCmdPtrLSB</a>),HL  ; Next demo command
1666: 7E              LD      A,(HL)              ; Get next command
1667: 32 1D 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#201D" title="$201D" target="TABLE_1">nextDemoCmd</a>),A     ; Set command for movement
166A: C9              RET                         ; Done

<span class="siteTarget" id="166B">1</span>66B: 37              SCF                         ; Set carry flag
166C: C9              RET                         ; Done

<span class="siteTarget" id="166D">1</span>66D: AF              XOR     A                   ; 0
166E: CD 8B 1A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1A8B" title="$1A8B" target="_self">$1A8B</a>               ; Print ZERO ships remain
<span class="siteTarget" id="1671">1</span>671: CD 10 19        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#CurPlyAlive" title="$1910" target="_self">CurPlyAlive</a>         ; Get active-flag ptr for current player
1674: 36 00           LD      (HL),$00            ; Flag player is dead
1676: CD CA 09        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#09CA" title="$09CA" target="_self">$09CA</a>               ; Get score descriptor for current player
1679: 23              INC     HL                  ; Point to high two digits
167A: 11 F5 20        LD      DE,$20F5            ; Current high score upper two digits
167D: 1A              LD      A,(DE)              ; Is player score greater ...
167E: BE              CP      (HL)                ; ... than high score?
167F: 1B              DEC     DE                  ; Point to LSB
1680: 2B              DEC     HL                  ; Point to LSB
1681: 1A              LD      A,(DE)              ; Go ahead and fetch high score lower two digits
1682: CA 8B 16        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#168B" title="$168B" target="_self">$168B</a>             ; Upper two are the same ... have to check lower two
1685: D2 98 16        JP      NC,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1698" title="$1698" target="_self">$1698</a>            ; Player score is lower than high ... nothing to do
1688: C3 8F 16        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#168F" title="$168F" target="_self">$168F</a>               ; Player socre is higher ... go copy the new high score
;
<span class="siteTarget" id="168B">1</span>68B: BE              CP      (HL)                ; Is lower digit higher? (upper was the same)
168C: D2 98 16        JP      NC,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1698" title="$1698" target="_self">$1698</a>            ; No ... high score is still greater than player's score
<span class="siteTarget" id="168F">1</span>68F: 7E              LD      A,(HL)              ; Copy the new ...
1690: 12              LD      (DE),A              ; ... high score lower two digits
1691: 13              INC     DE                  ; Point to MSB
1692: 23              INC     HL                  ; Point to MSB
1693: 7E              LD      A,(HL)              ; Copy the new ...
1694: 12              LD      (DE),A              ; ... high score upper two digits
1695: CD 50 19        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PrintHiScore" title="$1950" target="_self">PrintHiScore</a>        ; Draw the new high score
<span class="siteTarget" id="1698">1</span>698: 3A CE 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20CE" title="$20CE" target="TABLE_1">twoPlayers</a>)      ; Number of players
169B: A7              AND     A                   ; Is this a single player game?
169C: CA C9 16        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#16C9" title="$16C9" target="_self">$16C9</a>             ; Yes ... short message
169F: 21 03 28        LD      HL,$2803            ; Screen coordinates
16A2: 11 A6 1A        LD      DE,$1AA6            ; "GAME OVER PLAYER&lt; &gt;"
16A5: 0E 14           LD      C,$14               ; 20 characters
16A7: CD 93 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PrintMessageDel" title="$0A93" target="_self">PrintMessageDel</a>     ; Print message
16AA: 25              DEC     H                   ; Back up ...
16AB: 25              DEC     H                   ; ... to player indicator
16AC: 06 1B           LD      B,$1B               ; "1"
16AE: 3A 67 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2067" title="$2067" target="TABLE_1">playerDataMSB</a>)   ; Player number
16B1: 0F              RRCA                        ; Is this player 1?
16B2: DA B7 16        JP      C,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#16B7" title="$16B7" target="_self">$16B7</a>             ; Yes ... keep the digit
16B5: 06 1C           LD      B,$1C               ; Else ... set digit 2
<span class="siteTarget" id="16B7">1</span>6B7: 78              LD      A,B                 ; To A
16B8: CD FF 08        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawChar" title="$08FF" target="_self">DrawChar</a>            ; Print player number
16BB: CD B1 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#OneSecDelay" title="$0AB1" target="_self">OneSecDelay</a>         ; Short delay
16BE: CD E7 18        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#18E7" title="$18E7" target="_self">$18E7</a>               ; Get current player "alive" flag
16C1: 7E              LD      A,(HL)              ; Is player ...
16C2: A7              AND     A                   ; ... alive?
16C3: CA C9 16        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#16C9" title="$16C9" target="_self">$16C9</a>             ; No ... skip to "GAME OVER" sequence
16C6: C3 ED 02        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#02ED" title="$02ED" target="_self">$02ED</a>               ; Switch players and game loop
;
<span class="siteTarget" id="16C9">1</span>6C9: 21 18 2D        LD      HL,$2D18            ; Screen coordinates
16CC: 11 A6 1A        LD      DE,$1AA6            ; "GAME OVER PLAYER&lt; &gt;"
16CF: 0E 0A           LD      C,$0A               ; Just the "GAME OVER" part
16D1: CD 93 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PrintMessageDel" title="$0A93" target="_self">PrintMessageDel</a>     ; Print message
16D4: CD B6 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#TwoSecDelay" title="$0AB6" target="_self">TwoSecDelay</a>         ; Long delay
16D7: CD D6 09        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ClearPlayField" title="$09D6" target="_self">ClearPlayField</a>      ; Clear center window
16DA: AF              XOR     A                   ; Now in ...
16DB: 32 EF 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20EF" title="$20EF" target="TABLE_1">gameMode</a>),A        ; ... demo mode
16DE: D3 05           OUT     (<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0005pw" title="$05" target="TABLE_2">SOUND2</a>),A          ; All sound off
16E0: CD D1 19        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#EnableGameTasks" title="$19D1" target="_self">EnableGameTasks</a>     ; Enable ISR game tasks
16E3: C3 89 0B        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0B89" title="$0B89" target="_self">$0B89</a>               ; Print credit information and do splash

<span class="siteTarget" id="16E6">1</span>6E6: 31 00 24        LD      SP,$2400            ; Reset stack
16E9: FB              EI                          ; Enable interrupts
16EA: AF              XOR     A                   ; Flag ...
16EB: 32 15 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2015" title="$2015" target="TABLE_1">playerAlive</a>),A     ; ... player is shot
<span class="siteTarget" id="16EE">1</span>6EE: CD D8 14        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PlayerShotHit" title="$14D8" target="_self">PlayerShotHit</a>       ; Player's shot collision detection
16F1: 06 04           LD      B,$04               ; Player has been hit ...
16F3: CD FA 18        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#SoundBits3On" title="$18FA" target="_self">SoundBits3On</a>        ; ... sound
16F6: CD 59 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0A59" title="$0A59" target="_self">$0A59</a>               ; Has flag been set?
16F9: C2 EE 16        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#16EE" title="$16EE" target="_self">$16EE</a>            ; No ... wait for the flag
16FC: CD D7 19        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DsableGameTasks" title="$19D7" target="_self">DsableGameTasks</a>     ; Disable ISR game tasks
16FF: 21 01 27        LD      HL,$2701            ; Player's stash of ships
1702: CD FA 19        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#19FA" title="$19FA" target="_self">$19FA</a>               ; Erase the stash of shps
1705: AF              XOR     A                   ; Print ...
1706: CD 8B 1A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1A8B" title="$1A8B" target="_self">$1A8B</a>               ; ... a zero (number of ships)

1709: 06 FB           LD      B,$FB               ; Turn off ...
170B: C3 6B 19        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#196B" title="$196B" target="_self">$196B</a>               ; ... player shot sound

<span class="siteTarget" id="AShotReloadRate">A</span>ShotReloadRate: 
; Use the player's MSB to determine how fast the aliens reload their
; shots for another fire.
170E: CD CA 09        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#09CA" title="$09CA" target="_self">$09CA</a>               ; Get score descriptor for active player
1711: 23              INC     HL                  ; MSB value
1712: 7E              LD      A,(HL)              ; Get the MSB value
1713: 11 B8 1C        LD      DE,$1CB8            ; Score MSB table
1716: 21 A1 1A        LD      HL,$1AA1            ; Corresponding fire reload rate table
1719: 0E 04           LD      C,$04               ; Only 4 entries (a 5th value of 7 is used after that)
171B: 47              LD      B,A                 ; Hold the score value
<span class="siteTarget" id="171C">1</span>71C: 1A              LD      A,(DE)              ; Get lookup from table
171D: B8              CP      B                   ; Compare them
171E: D2 27 17        JP      NC,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1727" title="$1727" target="_self">$1727</a>            ; Equal or below ... use this table entry
1721: 23              INC     HL                  ; Next ...
1722: 13              INC     DE                  ; ... entry in table
1723: 0D              DEC     C                   ; Do all ...
1724: C2 1C 17        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#171C" title="$171C" target="_self">$171C</a>            ; ... 4 entries in the tables
<span class="siteTarget" id="1727">1</span>727: 7E              LD      A,(HL)              ; Load the shot reload value
1728: 32 CF 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20CF" title="$20CF" target="TABLE_1">aShotReloadRate</a>),A ; Save the value for use in shot routine
172B: C9              RET                         ; Done

; Shot sound on or off depending on 2025
<span class="siteTarget" id="ShotSound">S</span>hotSound: 
172C: 3A 25 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2025" title="$2025" target="TABLE_1">plyrShotStatus</a>)  ; Player shot flag
172F: FE 00           CP      $00                 ; Active shot?
1731: C2 39 17        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1739" title="$1739" target="_self">$1739</a>            ; Yes ... go
1734: 06 FD           LD      B,$FD               ; Sound mask
1736: C3 DC 19        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#SoundBits3Off" title="$19DC" target="_self">SoundBits3Off</a>       ; Mask off sound
;
<span class="siteTarget" id="1739">1</span>739: 06 02           LD      B,$02               ; Sound bit
173B: C3 FA 18        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#SoundBits3On" title="$18FA" target="_self">SoundBits3On</a>        ; OR on sound

173E: 00 00 ; ** Why?                       

<span class="siteTarget" id="TimeFleetSound">T</span>imeFleetSound: 
; This called from the ISR times down the fleet and sets the flag at 2095 if 
; the fleet needs a change in sound handling (new delay, new sound)
1740: 21 9B 20        LD      HL,$209B            ; Pointer to hold time for fleet
1743: 35              DEC     (HL)                ; Decrement hold time
1744: CC 6D 17        CALL    Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#176D" title="$176D" target="_self">$176D</a>             ; If 0 turn fleet movement sound off
1747: 3A 68 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2068" title="$2068" target="TABLE_1">playerOK</a>)        ; Is player OK?
174A: A7              AND     A                   ; 1  means OK
174B: CA 6D 17        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#176D" title="$176D" target="_self">$176D</a>             ; Player not OK ... fleet movement sound off and out
174E: 21 96 20        LD      HL,$2096            ; Current time on fleet sound
1751: 35              DEC     (HL)                ; Count down
1752: C0              RET     NZ                  ; Not time to change sound ... out
1753: 21 98 20        LD      HL,$2098            ; Current sound port 3 value
1756: 7E              LD      A,(HL)              ; Get value
1757: D3 05           OUT     (<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0005pw" title="$05" target="TABLE_2">SOUND2</a>),A          ; Set sounds
1759: 3A 82 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2082" title="$2082" target="TABLE_1">numAliens</a>)       ; Number of aliens on active screen 
175C: A7              AND     A                   ; Is it zero?
175D: CA 6D 17        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#176D" title="$176D" target="_self">$176D</a>             ; Yes ... turn off fleet movement sound and out
1760: 2B              DEC     HL                  ; (2097) Point to fleet timer reload
1761: 7E              LD      A,(HL)              ; Get fleet delay value
1762: 2B              DEC     HL                  ; (2096) Point to fleet timer
1763: 77              LD      (HL),A              ; Reload the timer
1764: 2B              DEC     HL                  ; Point to change-sound
1765: 36 01           LD      (HL),$01            ; (2095) time to change sound
1767: 3E 04           LD      A,$04               ; Set hold ...
1769: 32 9B 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#209B" title="$209B" target="TABLE_1">fleetSndHold</a>),A    ; ... time for fleet sound
176C: C9              RET                         ; Done

<span class="siteTarget" id="176D">1</span>76D: 3A 98 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2098" title="$2098" target="TABLE_1">soundPort5</a>)      ; Current sound port 3 value
<span class="siteTarget" id="1770">1</span>770: E6 30           AND     $30                 ; Mask off fleet movement sounds
1772: D3 05           OUT     (<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0005pw" title="$05" target="TABLE_2">SOUND2</a>),A          ; Set sounds
1774: C9              RET                         ; Out

<span class="siteTarget" id="FleetDelayExShip">F</span>leetDelayExShip: 
; This game-loop routine handles two sound functions. The routine does:
; 1) Time out the extra-ship awarded sound and turn it off when done
; 2) Load the fleet sound delay based on number of remaining aliens
; 3) Make the changing fleet sound
;
; The 2095 flag is set by the ISR and cleared here. The ISR does the timing and sets 2095 when it
; is time to make a new fleet sound.
;
1775: 3A 95 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2095" title="$2095" target="TABLE_1">changeFleetSnd</a>)  ; Time for new ...
1778: A7              AND     A                   ; ... fleet movement sound?
1779: CA AA 17        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#17AA" title="$17AA" target="_self">$17AA</a>             ; No ... skip to extra-man timing
177C: 21 11 1A        LD      HL,$1A11            ; Number of aliens list coupled ...
177F: 11 21 1A        LD      DE,$1A21            ; ... with delay list
1782: 3A 82 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2082" title="$2082" target="TABLE_1">numAliens</a>)       ; Get the number of aliens on the screen
<span class="siteTarget" id="1785">1</span>785: BE              CP      (HL)                ; Compare it to the first list value
1786: D2 8E 17        JP      NC,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#178E" title="$178E" target="_self">$178E</a>            ; Number of live aliens is higher than value ... use the delay
1789: 23              INC     HL                  ; Move to ...
178A: 13              INC     DE                  ; ... next list value
178B: C3 85 17        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1785" title="$1785" target="_self">$1785</a>               ; Find the right delay
<span class="siteTarget" id="178E">1</span>78E: 1A              LD      A,(DE)              ; Get the delay from the second list
178F: 32 97 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2097" title="$2097" target="TABLE_1">fleetSndReload</a>),A  ; Store the new alien sound delay
1792: 21 98 20        LD      HL,$2098            ; Get current state ...
1795: 7E              LD      A,(HL)              ; ... of sound port
1796: E6 30           AND     $30                 ; Mask off all fleet movement sounds
1798: 47              LD      B,A                 ; Hold the value
1799: 7E              LD      A,(HL)              ; Get current state
179A: E6 0F           AND     $0F                 ; This time ONLY the fleet movement sounds
179C: 07              RLCA                        ; Shift next to next sound
179D: FE 10           CP      $10                 ; Overflow?
179F: C2 A4 17        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#17A4" title="$17A4" target="_self">$17A4</a>            ; No ... keep it
17A2: 3E 01           LD      A,$01               ; Reset back to first sound
<span class="siteTarget" id="17A4">1</span>7A4: B0              OR      B                   ; Add fleet sounds to current sound value
17A5: 77              LD      (HL),A              ; Store new sound value
17A6: AF              XOR     A                   ; Restart ...
17A7: 32 95 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2095" title="$2095" target="TABLE_1">changeFleetSnd</a>),A  ; ... waiting on fleet time
;
<span class="siteTarget" id="17AA">1</span>7AA: 21 99 20        LD      HL,$2099            ; Sound timer for award extra ship
17AD: 35              DEC     (HL)                ; Time expired?
17AE: C0              RET     NZ                  ; No ... leave sound playing
17AF: 06 EF           LD      B,$EF               ; Turn off bit set with #$10 (award extra ship)
17B1: C3 DC 19        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#SoundBits3Off" title="$19DC" target="_self">SoundBits3Off</a>       ; Stop sound and out

<span class="siteTarget" id="SndOffExtPly">S</span>ndOffExtPly: 
17B4: 06 EF           LD      B,$EF               ; Mask off sound bit 4 (Extended play)
17B6: 21 98 20        LD      HL,$2098            ; Current sound content
17B9: 7E              LD      A,(HL)              ; Get current sound bits
17BA: A0              AND     B                   ; Turn off extended play
17BB: 77              LD      (HL),A              ; Remember settings
17BC: D3 05           OUT     (<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0005pw" title="$05" target="TABLE_2">SOUND2</a>),A          ; Turn off extended play
17BE: C9              RET                         ; Out

17BF: 00 ; ** Why?

<span class="siteTarget" id="ReadInputs">R</span>eadInputs: 
; Read control inputs for active player
17C0: 3A 67 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2067" title="$2067" target="TABLE_1">playerDataMSB</a>)   ; Get active player
17C3: 0F              RRCA                        ; Test player
17C4: D2 CA 17        JP      NC,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#17CA" title="$17CA" target="_self">$17CA</a>            ; Player 2 ... read port 2
17C7: DB 01           IN      A,(<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0001pr" title="$01" target="TABLE_2">INP1</a>)            ; Player 1 ... read port 1
17C9: C9              RET                         ; Out
<span class="siteTarget" id="17CA">1</span>7CA: DB 02           IN      A,(<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0002pr" title="$02" target="TABLE_2">INP2</a>)            ; Get controls for player 2
17CC: C9              RET                         ; Out

; Check and handle TILT
<span class="siteTarget" id="CheckHandleTilt">C</span>heckHandleTilt: 
17CD: DB 02           IN      A,(<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0002pr" title="$02" target="TABLE_2">INP2</a>)            ; Read input port
17CF: E6 04           AND     $04                 ; Tilt?
17D1: C8              RET     Z                   ; No tilt ... return
17D2: 3A 9A 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#209A" title="$209A" target="TABLE_1">tilt</a>)           ; Already in TILT handle?
17D5: A7              AND     A                   ; 1 = yes
17D6: C0              RET     NZ                  ; Yes ... ignore it now
17D7: 31 00 24        LD      SP,$2400            ; Reset stack
17DA: 06 04           LD      B,$04               ; Do this 4 times
<span class="siteTarget" id="17DC">1</span>7DC: CD D6 09        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ClearPlayField" title="$09D6" target="_self">ClearPlayField</a>      ; Clear center window
17DF: 05              DEC     B                   ; All done?
17E0: C2 DC 17        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#17DC" title="$17DC" target="_self">$17DC</a>            ; No ... do again
17E3: 3E 01           LD      A,$01               ; Flag ...
17E5: 32 9A 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#209A" title="$209A" target="TABLE_1">tilt</a>),A           ; ... handling TILT
17E8: CD D7 19        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DsableGameTasks" title="$19D7" target="_self">DsableGameTasks</a>     ; Disable game tasks
17EB: FB              EI                          ; Re-enable interrupts
17EC: 11 BC 1C        LD      DE,$1CBC            ; Message "TILT"
17EF: 21 16 30        LD      HL,$3016            ; Center of screen
17F2: 0E 04           LD      C,$04               ; Four letters
17F4: CD 93 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PrintMessageDel" title="$0A93" target="_self">PrintMessageDel</a>     ; Print "TILT"
17F7: CD B1 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#OneSecDelay" title="$0AB1" target="_self">OneSecDelay</a>         ; Short delay
17FA: AF              XOR     A                   ; Zero
17FB: 32 9A 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#209A" title="$209A" target="TABLE_1">tilt</a>),A           ; TILT handle over
17FE: 32 93 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2093" title="$2093" target="TABLE_1">waitStartLoop</a>),A   ; Back into splash screens
1801: C3 C9 16        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#16C9" title="$16C9" target="_self">$16C9</a>               ; Handle game over for player

<span class="siteTarget" id="CtrlSaucerSound">C</span>trlSaucerSound: 
1804: 21 84 20        LD      HL,$2084            ; Saucer on screen flag
1807: 7E              LD      A,(HL)              ; Is the saucer ...
1808: A7              AND     A                   ; ... on the screen?
1809: CA 07 07        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0707" title="$0707" target="_self">$0707</a>             ; No ... UFO sound off
180C: 23              INC     HL                  ; Saucer hit flag
180D: 7E              LD      A,(HL)              ; (2085) Get saucer hit flag
180E: A7              AND     A                   ; Is saucer in "hit" sequence?
180F: C0              RET     NZ                  ; Yes ... out
1810: 06 01           LD      B,$01               ; Retrigger saucer ...
1812: C3 FA 18        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#SoundBits3On" title="$18FA" target="_self">SoundBits3On</a>        ; ... sound (retrigger makes it warble?)

<span class="siteTarget" id="DrawAdvTable">D</span>rawAdvTable: 
; Draw "SCORE ADVANCE TABLE"
1815: 21 10 28        LD      HL,$2810            ; 0x410 is 1040 rotCol=32, rotRow=16 
1818: 11 A3 1C        LD      DE,$1CA3            ; "*SCORE ADVANCE TABLE*"
181B: 0E 15           LD      C,$15               ; 21 bytes in message
181D: CD F3 08        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PrintMessage" title="$08F3" target="_self">PrintMessage</a>        ; Print message
1820: 3E 0A           LD      A,$0A               ; 10 bytes in every "=xx POINTS" string
1822: 32 6C 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#206C" title="$206C" target="TABLE_1">temp206C</a>),A        ; Hold the count
1825: 01 BE 1D        LD      BC,$1DBE            ; Coordinate/sprite for drawing table
<span class="siteTarget" id="1828">1</span>828: CD 56 18        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ReadPriStruct" title="$1856" target="_self">ReadPriStruct</a>       ; Get HL=coordinate, DE=image
182B: DA 37 18        JP      C,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1837" title="$1837" target="_self">$1837</a>             ; Move on if done
182E: CD 44 18        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1844" title="$1844" target="_self">$1844</a>               ; Draw 16-byte sprite
1831: C3 28 18        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1828" title="$1828" target="_self">$1828</a>               ; Do all in table
;
1834: CD B1 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#OneSecDelay" title="$0AB1" target="_self">OneSecDelay</a>         ; One second delay
<span class="siteTarget" id="1837">1</span>837: 01 CF 1D        LD      BC,$1DCF            ; Coordinate/message for drawing table
<span class="siteTarget" id="183A">1</span>83A: CD 56 18        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ReadPriStruct" title="$1856" target="_self">ReadPriStruct</a>       ; Get HL=coordinate, DE=message
183D: D8              RET     C                   ; Out if done
183E: CD 4C 18        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#184C" title="$184C" target="_self">$184C</a>               ; Print message
1841: C3 3A 18        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#183A" title="$183A" target="_self">$183A</a>               ; Do all in table
;
<span class="siteTarget" id="1844">1</span>844: C5              PUSH    BC                  ; Hold BC
1845: 06 10           LD      B,$10               ; 16 bytes
1847: CD 39 14        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawSimpSprite" title="$1439" target="_self">DrawSimpSprite</a>      ; Draw simple
184A: C1              POP     BC                  ; Restore BC
184B: C9              RET                         ; Out
;
<span class="siteTarget" id="184C">1</span>84C: C5              PUSH    BC                  ; Hold BC
184D: 3A 6C 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#206C" title="$206C" target="TABLE_1">temp206C</a>)        ; Count of 10 ...
1850: 4F              LD      C,A                 ; ... to C
1851: CD 93 0A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PrintMessageDel" title="$0A93" target="_self">PrintMessageDel</a>     ; Print the message with delay between letters
1854: C1              POP     BC                  ; Restore BC
1855: C9              RET                         ; Out

<span class="siteTarget" id="ReadPriStruct">R</span>eadPriStruct: 
; Read a 4-byte print-structure pointed to by BC
; HL=Screen coordiante, DE=pointer to message
; If the first byte is FF then return with Carry Set, Carry Cleared otherwise.
1856: 0A              LD      A,(BC)              ; Get the screen LSB
1857: FE FF           CP      $FF                 ; Valid?
1859: 37              SCF                         ; If not Carry will be Set
185A: C8              RET     Z                   ; Return if 255
185B: 6F              LD      L,A                 ; Screen LSB to L
185C: 03              INC     BC                  ; Next
185D: 0A              LD      A,(BC)              ; Read screen MSB
185E: 67              LD      H,A                 ; Screen MSB to H
185F: 03              INC     BC                  ; Next
1860: 0A              LD      A,(BC)              ; Read message LSB
1861: 5F              LD      E,A                 ; Message LSB to E
1862: 03              INC     BC                  ; Next
1863: 0A              LD      A,(BC)              ; Read message MSB
1864: 57              LD      D,A                 ; Message MSB to D
1865: 03              INC     BC                  ; Next (for next print)
1866: A7              AND     A                   ; Clear Carry
1867: C9              RET                         ; Done

<span class="siteTarget" id="SplashSprite">S</span>plashSprite: 
; Moves a sprite up or down in splash mode. Interrupt moves the sprite. When it reaches
; Y value in 20CA the flag at 20CB is raised. The image flips between two pictures every
; 4 movements.      

1868: 21 C2 20        LD      HL,$20C2            ; Descriptor
186B: 34              INC     (HL)                ; Change image
186C: 23              INC     HL                  ; Point to delta-x
186D: 4E              LD      C,(HL)              ; Get delta-x
186E: CD D9 01        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#AddDelta" title="$01D9" target="_self">AddDelta</a>            ; Add delta-X and delta-Y to X and Y
1871: 47              LD      B,A                 ; Current y coordinate
1872: 3A CA 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20CA" title="$20CA" target="TABLE_1">splashTargetY</a>)   ; Has sprite reached ...
1875: B8              CP      B                   ; ... target coordinate?
1876: CA 98 18        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1898" title="$1898" target="_self">$1898</a>             ; Yes ... flag and out
1879: 3A C2 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20C2" title="$20C2" target="TABLE_1">splashAnForm</a>)    ; Image number
187C: E6 04           AND     $04                 ; Watching bit 3 for flip delay
187E: 2A CC 20        LD      HL,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20CC" title="$20CC" target="TABLE_1">splashImRestLSB</a>)          ; Image
1881: C2 88 18        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1888" title="$1888" target="_self">$1888</a>            ; Did bit 3 go to 0? No ... keep current image
1884: 11 30 00        LD      DE,$0030            ; 16*3 ...
1887: 19              ADD     HL,DE               ; ...  use other image form
<span class="siteTarget" id="1888">1</span>888: 22 C7 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20C7" title="$20C7" target="TABLE_1">splashImageLSB</a>),HL ; Image to descriptor structure
188B: 21 C5 20        LD      HL,$20C5            ; X,Y,Image descriptor
188E: CD 3B 1A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ReadDesc" title="$1A3B" target="_self">ReadDesc</a>            ; Read sprite descriptor
1891: EB              EX      DE,HL               ; Image to DE, position to HL
1892: C3 D3 15        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawSprite" title="$15D3" target="_self">DrawSprite</a>          ; Draw the sprite

1895: 00 00 00                          

<span class="siteTarget" id="1898">1</span>898: 3E 01           LD      A,$01               ; Flag that sprite ...
189A: 32 CB 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20CB" title="$20CB" target="TABLE_1">splashReached</a>),A   ; ... reached location
189D: C9              RET                         ; Out

;Animate alien shot to extra "C" in splash
<span class="siteTarget" id="189E">1</span>89E: 21 50 20        LD      HL,$2050            ; Task descriptor for game object 4 (squiggly shot)
18A1: 11 C0 1B        LD      DE,$1BC0            ; Task info for animate-shot-to-extra-C
18A4: 06 10           LD      B,$10               ; Block copy ...
18A6: CD 32 1A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#BlockCopy" title="$1A32" target="_self">BlockCopy</a>           ; ... 16 bytes
18A9: 3E 02           LD      A,$02               ; Set shot sync ...
18AB: 32 80 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2080" title="$2080" target="TABLE_1">shotSync</a>),A        ; ... to run the squiggly shot
18AE: 3E FF           LD      A,$FF               ; Shot direction (-1)
18B0: 32 7E 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#207E" title="$207E" target="TABLE_1">alienShotDelta</a>),A  ; Alien shot delta
18B3: 3E 04           LD      A,$04               ; Animate ...
18B5: 32 C1 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20C1" title="$20C1" target="TABLE_1">isrSplashTask</a>),A   ; ... shot
<span class="siteTarget" id="18B8">1</span>8B8: 3A 55 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2055" title="$2055" target="TABLE_1">squShotStatus</a>)   ; Has shot ...
18BB: E6 01           AND     $01                 ; ... collided?
18BD: CA B8 18        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#18B8" title="$18B8" target="_self">$18B8</a>             ; No ... keep waiting
<span class="siteTarget" id="18C0">1</span>8C0: 3A 55 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2055" title="$2055" target="TABLE_1">squShotStatus</a>)   ; Wait ...
18C3: E6 01           AND     $01                 ; ... for explosion ...
18C5: C2 C0 18        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#18C0" title="$18C0" target="_self">$18C0</a>            ; ... to finish
18C8: 21 11 33        LD      HL,$3311            ; Here is where the extra C is
18CB: 3E 26           LD      A,$26               ; Space character
18CD: 00              NOP                         ; ** Why?
18CE: CD FF 08        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawChar" title="$08FF" target="_self">DrawChar</a>            ; Draw character
18D1: C3 B6 0A        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#TwoSecDelay" title="$0AB6" target="_self">TwoSecDelay</a>         ; Two second delay and out

; Initializiation comes here
;
<span class="siteTarget" id="18D4">1</span>8D4: 31 00 24        LD      SP,$2400            ; Set stack pointer just below screen
18D7: 06 00           LD      B,$00               ; Count 256 bytes
18D9: CD E6 01        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#01E6" title="$01E6" target="_self">$01E6</a>               ; Copy ROM to RAM
18DC: CD 56 19        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawStatus" title="$1956" target="_self">DrawStatus</a>          ; Print scores and credits
;
<span class="siteTarget" id="18DF">1</span>8DF: 3E 08           LD      A,$08               ; Set alien ...
18E1: 32 CF 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20CF" title="$20CF" target="TABLE_1">aShotReloadRate</a>),A ; ... shot reload rate
18E4: C3 EA 0A        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#0AEA" title="$0AEA" target="_self">$0AEA</a>               ; Top of splash screen loop

; Get player-alive flag for OTHER player
<span class="siteTarget" id="18E7">1</span>8E7: 3A 67 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2067" title="$2067" target="TABLE_1">playerDataMSB</a>)   ; Player data MSB
18EA: 21 E7 20        LD      HL,$20E7            ; Alive flags (player 1 and 2)
18ED: 0F              RRCA                        ; Bit 1=1 for player 1
18EE: D0              RET     NC                  ; Player 2 ... we have it ... out
18EF: 23              INC     HL                  ; Player 1's flag
18F0: C9              RET                         ; Done

; If there is one alien left then the right motion is 3 instead of 2. That's
; why the timing is hard to hit after the change.
<span class="siteTarget" id="18F1">1</span>8F1: 06 02           LD      B,$02               ; Rack moving right delta X 
18F3: 3A 82 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2082" title="$2082" target="TABLE_1">numAliens</a>)       ; Number of aliens on screen
18F6: 3D              DEC     A                   ; Just one left?
18F7: C0              RET     NZ                  ; No ... use right delta X of 2
18F8: 04              INC     B                   ; Just one alien ... move right at 3 instead of 2
18F9: C9              RET                         ; Done

<span class="siteTarget" id="SoundBits3On">S</span>oundBits3On: 
; Add in bit for sound
18FA: 3A 94 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2094" title="$2094" target="TABLE_1">soundPort3</a>)      ; Current value of sound port
18FD: B0              OR      B                   ; Add in new sounds
18FE: 32 94 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2094" title="$2094" target="TABLE_1">soundPort3</a>),A      ; New value of sound port
1901: D3 03           OUT     (<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0003pw" title="$03" target="TABLE_2">SOUND1</a>),A          ; Write new value to sound hardware
1903: C9              RET                         

<span class="siteTarget" id="InitAliensP2">I</span>nitAliensP2: 
1904: 21 00 22        LD      HL,$2200            ; Player 2 data area
1907: C3 C3 01        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#01C3" title="$01C3" target="_self">$01C3</a>               ; Initialize player 2 aliens

<span class="siteTarget" id="PlyrShotAndBump">P</span>lyrShotAndBump: 
190A: CD D8 14        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PlayerShotHit" title="$14D8" target="_self">PlayerShotHit</a>       ; Player's shot collision detection
190D: C3 97 15        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#RackBump" title="$1597" target="_self">RackBump</a>            ; Change alien deltaX and deltaY when rack bumps edges

<span class="siteTarget" id="CurPlyAlive">C</span>urPlyAlive: 
; Get the current player's alive status
1910: 21 E7 20        LD      HL,$20E7            ; Alive flags
1913: 3A 67 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2067" title="$2067" target="TABLE_1">playerDataMSB</a>)   ; Player 1 or 2
1916: 0F              RRCA                        ; Will be 1 if player 1
1917: D8              RET     C                   ; Return if player 1
1918: 23              INC     HL                  ; Bump to player 2
1919: C9              RET                         ; Return

<span class="siteTarget" id="DrawScoreHead">D</span>rawScoreHead: 
; Print score header " SCORE&lt;1&gt; HI-SCORE SCORE&lt;2&gt; "
191A: 0E 1C           LD      C,$1C               ; 28 bytes in message
191C: 21 1E 24        LD      HL,$241E            ; Screen coordinates
191F: 11 E4 1A        LD      DE,$1AE4            ; Score header message
1922: C3 F3 08        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PrintMessage" title="$08F3" target="_self">PrintMessage</a>        ; Print score header

<span class="siteTarget" id="1925">1</span>925: 21 F8 20        LD      HL,$20F8            ; Player 1 score descriptor
1928: C3 31 19        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawScore" title="$1931" target="_self">DrawScore</a>           ; Print score

<span class="siteTarget" id="192B">1</span>92B: 21 FC 20        LD      HL,$20FC            ; Player 2 score descriptor
192E: C3 31 19        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawScore" title="$1931" target="_self">DrawScore</a>           ; Print score

<span class="siteTarget" id="DrawScore">D</span>rawScore: 
; Print score.
; HL = descriptor
1931: 5E              LD      E,(HL)              ; Get score LSB
1932: 23              INC     HL                  ; Next
1933: 56              LD      D,(HL)              ; Get score MSB
1934: 23              INC     HL                  ; Next
1935: 7E              LD      A,(HL)              ; Get coordinate LSB
1936: 23              INC     HL                  ; Next
1937: 66              LD      H,(HL)              ; Get coordiante MSB
1938: 6F              LD      L,A                 ; Set LSB
1939: C3 AD 09        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#Print4Digits" title="$09AD" target="_self">Print4Digits</a>        ; Print 4 digits in DE

; Print message "CREDIT "
<span class="siteTarget" id="193C">1</span>93C: 0E 07           LD      C,$07               ; 7 bytes in message
193E: 21 01 35        LD      HL,$3501            ; Screen coordinates
1941: 11 A9 1F        LD      DE,$1FA9            ; Message = "CREDIT "
1944: C3 F3 08        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PrintMessage" title="$08F3" target="_self">PrintMessage</a>        ; Print message

<span class="siteTarget" id="DrawNumCredits">D</span>rawNumCredits: 
; Display number of credits on screen
1947: 3A EB 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20EB" title="$20EB" target="TABLE_1">numCoins</a>)        ; Number of credits
194A: 21 01 3C        LD      HL,$3C01            ; Screen coordinates
194D: C3 B2 09        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawHexByte" title="$09B2" target="_self">DrawHexByte</a>         ; Character to screen

<span class="siteTarget" id="PrintHiScore">P</span>rintHiScore: 
1950: 21 F4 20        LD      HL,$20F4            ; Hi Score descriptor
1953: C3 31 19        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawScore" title="$1931" target="_self">DrawScore</a>           ; Print Hi-Score

<span class="siteTarget" id="DrawStatus">D</span>rawStatus: 
; Print scores (with header) and credits (with label)
1956: CD 5C 1A        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ClearScreen" title="$1A5C" target="_self">ClearScreen</a>         ; Clear the screen
1959: CD 1A 19        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawScoreHead" title="$191A" target="_self">DrawScoreHead</a>       ; Print score header
195C: CD 25 19        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1925" title="$1925" target="_self">$1925</a>               ; Print player 1 score
195F: CD 2B 19        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#192B" title="$192B" target="_self">$192B</a>               ; Print player 2 score
1962: CD 50 19        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PrintHiScore" title="$1950" target="_self">PrintHiScore</a>        ; Print hi score
1965: CD 3C 19        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#193C" title="$193C" target="_self">$193C</a>               ; Print credit lable
1968: C3 47 19        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawNumCredits" title="$1947" target="_self">DrawNumCredits</a>      ; Number of credits

<span class="siteTarget" id="196B">1</span>96B: CD DC 19        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#SoundBits3Off" title="$19DC" target="_self">SoundBits3Off</a>       ; From 170B with B=FB. Turn off player shot sound
196E: C3 71 16        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1671" title="$1671" target="_self">$1671</a>               ; Update high-score if player's score is greater

<span class="siteTarget" id="1971">1</span>971: 3E 01           LD      A,$01               ; Set flag that ...
1973: 32 6D 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#206D" title="$206D" target="TABLE_1">invaded</a>),A         ; ... aliens reached bottom of screen
1976: C3 E6 16        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#16E6" title="$16E6" target="_self">$16E6</a>               ; End of round

<span class="siteTarget" id="1979">1</span>979: CD D7 19        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DsableGameTasks" title="$19D7" target="_self">DsableGameTasks</a>     ; Disable ISR game tasks
197C: CD 47 19        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawNumCredits" title="$1947" target="_self">DrawNumCredits</a>      ; Display number of credits on screen
197F: C3 3C 19        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#193C" title="$193C" target="_self">$193C</a>               ; Print message "CREDIT"

<span class="siteTarget" id="1982">1</span>982: 32 C1 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20C1" title="$20C1" target="TABLE_1">isrSplashTask</a>),A   ; Set ISR splash task
1985: C9              RET                         ; Done

; The original code (from TAITO) printed this message on the screen. When Midway branched the code
; they changed the logic so it isn't printed.

1986: 8B 19 ; Points to print TAITO CORPORATION message ... not sure why

<span class="siteTarget" id="1988">1</span>988: C3 D6 09        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ClearPlayField" title="$09D6" target="_self">ClearPlayField</a>      ; Clear playfield and out

; Print "*TAITO CORPORATION*"
198B: 21 03 28        LD      HL,$2803            ; Screen coordinates
198E: 11 BE 19        LD      DE,$19BE            ; Message "*TAITO CORPORATION*"
1991: 0E 13           LD      C,$13               ; Messgae length
1993: C3 F3 08        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PrintMessage" title="$08F3" target="_self">PrintMessage</a>        ; Print message

; The original TAITO code:
;1985: C3 8B 19     JP    $198B              ; 
;1988: CD D6 09     CALL  $09D6              ; 
;198B: 21 03 28     LD    HL,$2803           ; 
;198E: 11 BE 19     LD    DE,$19BE           ; 
;1991: 0E 13        LD    C,$13              ; 
;1993: C3 F3 08     JP    $08F3              ; 

1996: 00 00 00 00 ; ** Why?

<span class="siteTarget" id="CheckHiddenMes">C</span>heckHiddenMes: 
; There is a hidden message "TAITO COP" (with no "R") in the game. It can only be 
; displayed in the demonstration game during the splash screens. You must enter
; 2 seqences of buttons. Timing is not critical. As long as you eventually get all
; the buttons up/down in the correct pattern then the game will register the
; sequence.
;
; 1st: 2start(down) 1start(up)   1fire(down) 1left(down) 1right(down)
; 2nd: 2start(up)   1start(down) 1fire(down) 1left(down) 1right(up)
;
; Unfortunately MAME does not deliver the simultaneous button presses correctly. You can see the message in
; MAME by changing 19A6 to 02 and 19B1 to 02. Then the 2start(down) is the only sequence. 
;
199A: 3A 1E 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#201E" title="$201E" target="TABLE_1">hidMessSeq</a>)      ; Has the 1st "hidden-message" sequence ...
199D: A7              AND     A                   ; ... been registered?
199E: C2 AC 19        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#19AC" title="$19AC" target="_self">$19AC</a>            ; Yes ... go look for the 2nd sequence
19A1: DB 01           IN      A,(<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0001pr" title="$01" target="TABLE_2">INP1</a>)            ; Get player inputs
19A3: E6 76           AND     $76                 ; 0111_0110 Keep 2Pstart, 1Pstart, 1Pshot, 1Pleft, 1Pright
19A5: D6 72           SUB     $72                 ; 0111_0010 1st sequence: 2Pstart, 1Pshot, 1Pleft, 1Pright
19A7: C0              RET     NZ                  ; Not first sequence ... out
19A8: 3C              INC     A                   ; Flag that 1st sequence ...
19A9: 32 1E 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#201E" title="$201E" target="TABLE_1">hidMessSeq</a>),A      ; ... has been entered
<span class="siteTarget" id="19AC">1</span>9AC: DB 01           IN      A,(<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0001pr" title="$01" target="TABLE_2">INP1</a>)            ; Check inputs for 2nd sequence
19AE: E6 76           AND     $76                 ; 0111_0110 Keep 2Pstart, 1Pstart, 1Pshot, 1Pleft, 1Pright
19B0: FE 34           CP      $34                 ; 0011_0100 2nd sequence: 1Pstart, 1Pshot, 1Pleft 
19B2: C0              RET     NZ                  ; If not second sequence ignore
19B3: 21 1B 2E        LD      HL,$2E1B            ; Screen coordinates
19B6: 11 F7 0B        LD      DE,$0BF7            ; Message = "TAITO COP" (no R)
19B9: 0E 09           LD      C,$09               ; Message length
19BB: C3 F3 08        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#PrintMessage" title="$08F3" target="_self">PrintMessage</a>        ; Print message and out

<span class="siteTarget" id="MessageTaito">M</span>essageTaito: 
; "*TAITO CORPORATION*"
19BE: 28 13 00 08 13 0E 26 02 0E 11 0F 0E 11      
19CB: 00 13 08 0E 0D 28

<span class="siteTarget" id="EnableGameTasks">E</span>nableGameTasks: 
; Enable ISR game tasks 
19D1: 3E 01           LD      A,$01               ; Set ISR ...
<span class="siteTarget" id="19D3">1</span>9D3: 32 E9 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#20E9" title="$20E9" target="TABLE_1">suspendPlay</a>),A     ; ... game tasks enabled
19D6: C9              RET                         ; Done

<span class="siteTarget" id="DsableGameTasks">D</span>sableGameTasks: 
; Disable ISR game tasks
; Clear 20E9 flag
19D7: AF              XOR     A                   ; Clear ISR game tasks flag
19D8: C3 D3 19        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#19D3" title="$19D3" target="_self">$19D3</a>               ; Save a byte (the RET)
19DB: 00                                          ; ** Here is the byte saved. I wonder if this was an optimizer pass.

<span class="siteTarget" id="SoundBits3Off">S</span>oundBits3Off: 
; Turn off bit in sound port
19DC: 3A 94 20        LD      A,(<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2094" title="$2094" target="TABLE_1">soundPort3</a>)      ; Current sound effects value
19DF: A0              AND     B                   ; Mask bits off
19E0: 32 94 20        LD      (<a class="addressLink1" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/RAMUse.html#2094" title="$2094" target="TABLE_1">soundPort3</a>),A      ; Store new hold value
19E3: D3 03           OUT     (<a class="addressLink2" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Hardware.html#0003pw" title="$03" target="TABLE_2">SOUND1</a>),A          ; Change sounds
19E5: C9              RET                         ; Done

<span class="siteTarget" id="DrawNumShips">D</span>rawNumShips: 
; Show ships remaining in hold for the player
19E6: 21 01 27        LD      HL,$2701            ; Screen coordinates
19E9: CA FA 19        JP      Z,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#19FA" title="$19FA" target="_self">$19FA</a>             ; None in reserve ... skip display
; Draw line of ships
<span class="siteTarget" id="19EC">1</span>9EC: 11 60 1C        LD      DE,$1C60            ; Player sprite
19EF: 06 10           LD      B,$10               ; 16 rows
19F1: 4F              LD      C,A                 ; Hold count
19F2: CD 39 14        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawSimpSprite" title="$1439" target="_self">DrawSimpSprite</a>      ; Display 1byte sprite to screen
19F5: 79              LD      A,C                 ; Restore remaining
19F6: 3D              DEC     A                   ; All done?
19F7: C2 EC 19        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#19EC" title="$19EC" target="_self">$19EC</a>            ; No ... keep going
; Clear remainder of line
<span class="siteTarget" id="19FA">1</span>9FA: 06 10           LD      B,$10               ; 16 rows
19FC: CD CB 14        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#ClearSmallSprite" title="$14CB" target="_self">ClearSmallSprite</a>    ; Clear 1byte sprite at HL
19FF: 7C              LD      A,H                 ; Get Y coordinate
1A00: FE 35           CP      $35                 ; At edge?
1A02: C2 FA 19        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#19FA" title="$19FA" target="_self">$19FA</a>            ; No ... do all
1A05: C9              RET                         ; Out

<span class="siteTarget" id="CompYToBeam">C</span>ompYToBeam: 
;
; The ISRs set the upper bit of 2072 based on where the beam is. This is compared to the
; upper bit of an object's Y coordinate to decide whic ISR should handle it. When the
; beam passes the halfway point (or near it ... at scanline 96), the upper bit is cleared.
; When the beam reaches the end of the screen the upper bit is set.
;
; The task then runs in the ISR if the Y coordiante bit matches the 2072 flag. Objects that
; are at the top of the screen (upper bit of Y clear) run in the mid-screen ISR when
; the beam has moved to the bottom of the screen. Objects that are at the bottom of the screen
; (upper bit of Y set) run in the end-screen ISR when the beam is moving back to the top.
;
; The pointer to the object's Y coordinate is passed in DE. CF is set if the upper bits are
; the same (the calling ISR should execute the task).
;
1A06: 21 72 20        LD      HL,$2072            ; Get the ...
1A09: 46              LD      B,(HL)              ; ... beam position status
1A0A: 1A              LD      A,(DE)              ; Get the task structure flag
1A0B: E6 80           AND     $80                 ; Only upper bits count
1A0D: A8              XOR     B                   ; XOR them together
1A0E: C0              RET     NZ                  ; Not the same (CF cleared)
1A0F: 37              SCF                         ; Set the CF if the same
1A10: C9              RET                         ; Done

; Alien delay lists. First list is the number of aliens. The second list is the corresponding delay.
; This delay is only for the rate of change in the fleet's sound.
; The check takes the first num-aliens-value that is lower or the same as the actual num-aliens on screen.
;
; The game starts with 55 aliens. The aliens are move/drawn one per interrupt which means it
; takes 55 interrupts. The first delay value is 52 ... which is almost in sync with the number
; of aliens. It is a tad faster and you can observe the sound and steps getting out of sync.
;
1A11: 32 2B 24 1C 16 11 0D 0A 08 07 06 05 04 03 02 01
1A21: 34 2E 27 22 1C 18 15 13 10 0E 0D 0C 0B 09 07 05     
1A31: FF   ; ** Needless terminator. The list value "1" catches everything.

<span class="siteTarget" id="BlockCopy">B</span>lockCopy: 
; Copy from [DE] to [HL] (b bytes)
1A32: 1A              LD      A,(DE)              ; Copy from [DE] to ...
1A33: 77              LD      (HL),A              ; ... [HL]
1A34: 23              INC     HL                  ; Next destination
1A35: 13              INC     DE                  ; Next source
1A36: 05              DEC     B                   ; Count in B
1A37: C2 32 1A        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#BlockCopy" title="$1A32" target="_self">BlockCopy</a>        ; Do all
1A3A: C9              RET                         ; Done

<span class="siteTarget" id="ReadDesc">R</span>eadDesc: 
; Load 5 bytes sprite descriptor from [HL]
1A3B: 5E              LD      E,(HL)              ; Descriptor ...
1A3C: 23              INC     HL                  ; ... sprite ...
1A3D: 56              LD      D,(HL)              ; ...
1A3E: 23              INC     HL                  ; ... picture
1A3F: 7E              LD      A,(HL)              ; Descriptor ...
1A40: 23              INC     HL                  ; ... screen ...
1A41: 4E              LD      C,(HL)              ; ...
1A42: 23              INC     HL                  ; ... location
1A43: 46              LD      B,(HL)              ; Number of bytes in sprite
1A44: 61              LD      H,C                 ; From A,C to ...
1A45: 6F              LD      L,A                 ; ... H,L
1A46: C9              RET                         ; Done

<span class="siteTarget" id="ConvToScr">C</span>onvToScr: 
; The screen is organized as one-bit-per-pixel.
; In: HL contains pixel number (bbbbbbbbbbbbbppp)
; Convert from pixel number to screen coordinates (without shift)
; Shift HL right 3 bits (clearing the top 2 bits)
; and set the third bit from the left.
1A47: C5              PUSH    BC                  ; Hold B (will mangle)
1A48: 06 03           LD      B,$03               ; 3 shifts (divide by 8)
<span class="siteTarget" id="1A4A">1</span>A4A: 7C              LD      A,H                 ; H to A
1A4B: 1F              RRA                         ; Shift right (into carry, from doesn't matter)
1A4C: 67              LD      H,A                 ; Back to H
1A4D: 7D              LD      A,L                 ; L to A
1A4E: 1F              RRA                         ; Shift right (from/to carry)
1A4F: 6F              LD      L,A                 ; Back to L
1A50: 05              DEC     B                   ; Do all ...
1A51: C2 4A 1A        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1A4A" title="$1A4A" target="_self">$1A4A</a>            ; ... 3 shifts
1A54: 7C              LD      A,H                 ; H to A
1A55: E6 3F           AND     $3F                 ; Mask off all but screen (less than or equal 3F)
1A57: F6 20           OR      $20                 ; Offset into RAM
1A59: 67              LD      H,A                 ; Back to H
1A5A: C1              POP     BC                  ; Restore B
1A5B: C9              RET                         ; Done

<span class="siteTarget" id="ClearScreen">C</span>learScreen: 
; Clear the screen
; Thanks to Mark Tankard for pointing out what this really does
1A5C: 21 00 24        LD      HL,$2400            ; Screen coordinate
<span class="siteTarget" id="1A5F">1</span>A5F: 36 00           LD      (HL),$00            ; Clear it
1A61: 23              INC     HL                  ; Next byte
1A62: 7C              LD      A,H                 ; Have we done ...
1A63: FE 40           CP      $40                 ; ... all the screen?
1A65: C2 5F 1A        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1A5F" title="$1A5F" target="_self">$1A5F</a>            ; No ... keep going
1A68: C9              RET                         ; Out

<span class="siteTarget" id="RestoreShields">R</span>estoreShields: 
; Logically OR the player's shields back onto the playfield
; DE = sprite
; HL = screen
; C = bytes per row
; B = number of rows
1A69: C5              PUSH    BC                  ; Preserve BC
1A6A: E5              PUSH    HL                  ; Hold for a bit
<span class="siteTarget" id="1A6B">1</span>A6B: 1A              LD      A,(DE)              ; From sprite
1A6C: B6              OR      (HL)                ; OR with screen
1A6D: 77              LD      (HL),A              ; Back to screen
1A6E: 13              INC     DE                  ; Next sprite
1A6F: 23              INC     HL                  ; Next on screen
1A70: 0D              DEC     C                   ; Row done?
1A71: C2 6B 1A        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#1A6B" title="$1A6B" target="_self">$1A6B</a>            ; No ... do entire row
1A74: E1              POP     HL                  ; Original start
1A75: 01 20 00        LD      BC,$0020            ; Bump HL by ...
1A78: 09              ADD     HL,BC               ; ... one screen row
1A79: C1              POP     BC                  ; Restore
1A7A: 05              DEC     B                   ; Row counter
1A7B: C2 69 1A        JP      NZ,<a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#RestoreShields" title="$1A69" target="_self">RestoreShields</a>   ; Do all rows
1A7E: C9              RET                         

<span class="siteTarget" id="RemoveShip">R</span>emoveShip: 
; Remove a ship from the players stash and update the
; hold indicators on the screen.
1A7F: CD 2E 09        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#092E" title="$092E" target="_self">$092E</a>               ; Get last byte from player data
1A82: A7              AND     A                   ; Is it 0?
1A83: C8              RET     Z                   ; Skip
1A84: F5              PUSH    AF                  ; Preserve number remaining
1A85: 3D              DEC     A                   ; Remove a ship from the stash
1A86: 77              LD      (HL),A              ; New number of ships
1A87: CD E6 19        CALL    <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#DrawNumShips" title="$19E6" target="_self">DrawNumShips</a>        ; Draw the line of ships
1A8A: F1              POP     AF                  ; Restore number
<span class="siteTarget" id="1A8B">1</span>A8B: 21 01 25        LD      HL,$2501            ; Screen coordinates
1A8E: E6 0F           AND     $0F                 ; Make sure it is a digit
1A90: C3 C5 09        JP      <a class="addressLink0" href="http://www.computerarcheology.com/Arcade/SpaceInvaders/Code.html#09C5" title="$09C5" target="_self">$09C5</a>               ; Print number remaining




;==========================================================
; DATA FROM HERE DOWN
;
1A93: 00 00       

; Splash screen animation structure 1
; 00   Image form (increments each draw)
; 00   Delta X
; FF   Delta Y is -1
; B8   X coordinate
; FE   Y starting coordiante
; 1C20 Base image (small alien)
; 10   Size of image (16 bytes)
; 9E   Target Y coordiante
; 00   Reached Y flag
; 1C20 Base iamge (small alien)
1A95: 00 00 FF B8 FE 20 1C 10 9E 00 20 1C   

<span class="siteTarget" id="ShotReloadRate">S</span>hotReloadRate: 
; The tables at 1CB8 and 1AA1 control how fast shots are created. The speed is based
; on the upper byte of the player's score. For a score of less than or equal 0200 then 
; the fire speed is 30. For a score less than or equal 1000 the shot speed is 10. Less 
; than or equal 2000 the speed is 0B. Less than or equal 3000 is 08. And anything 
; above 3000 is 07.
;
; 1CB8: 02 10 20 30
;
1AA1: 30 10 0B 08                           
1AA5: 07           ; Fastest shot firing speed

<span class="siteTarget" id="MessageGOver">M</span>essageGOver: 
; GAME OVER PLAYER&lt; &gt;"
1AA6: 06 00 0C 04 26 0E 15 04 11 26 26 0F   
1AB2: 0B 00 18 04 11 24 26 25               

<span class="siteTarget" id="MessageB1or2">M</span>essageB1or2: 
; "1 OR 2PLAYERS BUTTON"
1ABA: 1B 26 0E 11 26 1C 0F 0B 00 18 04      
1AC5: 11 12 26 01 14 13 13 0E 0D 26

<span class="siteTarget" id="Message1Only">M</span>essage1Only: 
; "ONLY 1PLAYER BUTTON "
; Note the space on the end ... both alternatives are same length
1ACF: 0E 0D 0B 18 26 1B 0F 0B 00 18 04 11 26 26 
1ADD: 01 14 13 13 0E 0D 26                  

<span class="siteTarget" id="MessageScore">M</span>essageScore: 
; " SCORE&lt;1&gt; HI-SCORE SCORE&lt;2&gt;"
1AE4: 26 12 02 0E 11 04 24 1B 25 26 07 08   
1AF0: 3F 12 02 0E 11 04 26 12 02 0E 11 04   
1AFC: 24 1C 25 26                           

;-------------------------- RAM initialization -----------------------------
; Coppied to RAM (2000) C0 bytes as initialization.
; See the description of RAM at the top of this file for the details on this data.

1B00: 01 00 00 10 00 00 00 00 02 78 38 78 38 00 F8 00
1B10: 00 80 00 8E 02 FF 05 0C 60 1C 20 30 10 01 00 00   
1B20: 00 00 00 BB 03 00 10 90 1C 28 30 01 04 00 FF FF   
1B30: 00 00 02 76 04 00 00 00 00 00 04 EE 1C 00 00 03    
1B40: 00 00 00 B6 04 00 00 01 00 1D 04 E2 1C 00 00 03 
1B50: 00 00 00 82 06 00 00 01 06 1D 04 D0 1C 00 00 03
1B60: FF 00 C0 1C 00 00 10 21 01 00 30 00 12 00 00 00         

; These don't need to be copied over to RAM (see 1BA0 below).
<span class="siteTarget" id="MesssageP1">M</span>esssageP1: 
; "PLAY PLAYER&lt;1&gt;"                           
1B70: 0F 0B 00 18 26 0F 0B 00 18 04 11 24 1B 25 FC 
1B7F: 00 

1B80: 01 FF FF 00 00 00 20 64 1D D0 29 18 02 54 1D 00               
1B90: 08 00 06 00 00 01 40 00 01 00 00 10 9E 00 20 1C                                 

; These don't need to be copied over to RAM I believe this to be a mistake. The constant at 01E4 is C0,
; which is the size of this mirror with the added sprite. It should be A0. I believe there was a macro
; to size this area and later the splash screens where put in. Some of the data spilled over into this
; and the macro automatically included it. No harm.

<span class="siteTarget" id="AlienSprCYA">A</span>lienSprCYA: 
; Alien sprite type C pulling upside down Y
</pre>
<canvas width="130" height="65" data-gettiledatafunction="SpaceInvaders.get8x16Data" data-address="1BA0" data-gridx="16" data-gridy="8" data-command="0">
</canvas>
<pre class="codePreStyle">; ........
; **......
; ..*.....
; ...****.
; ..*.*...
; **..*...
; ...*....
; .*.**...
; *.****..
; ...*.**.
; ..******
; ..******
; ...*.**.
; *.****..
; .*.**...
; ........
1BA0: 00 03 04 78 14 13 08 1A 3D 68 FC FC 68 3D 1A 00                                    

1BB0: 00 00 01 B8 98 A0 1B 10 FF 00 A0 1B 00 00 00 00                                    
;--------------------------- End of initialization copy -------------------------


; Shot descriptor for splash shooting the extra "C"
1BC0: 00 10 00 0E 05 00 00 00 00 00 07 D0 1C C8 9B 03      


<span class="siteTarget" id="AlienSprCYB">A</span>lienSprCYB: 
; Alien sprite C pulling upside down Y. Note the difference between this and the first picutre
; above. The Y is closer to the ship. This gives the effect of the Y kind of "sticking" in the
; animation.
</pre>
<canvas width="130" height="65" data-gettiledatafunction="SpaceInvaders.get8x16Data" data-address="1BD0" data-gridx="16" data-gridy="8" data-command="0">
</canvas>
<pre class="codePreStyle">; ........
; ........
; **......
; ..*.....
; ...****.
; ..*.*...
; **.*....
; *..**...
; .*.***..
; *.**.**.
; .*.*****
; .*.*****
; *.**.**.
; .*.***..
; *..**...
; ........
;
1BD0: 00 00 03 04 78 14 0B 19 3A 6D FA FA 6D 3A 19 00                                    

; More RAM initialization copied by 18D9
1BE0: 00 00 00 00 00 00 00 00 00 01 00 00 01 74 1F 00                                    
1BF0: 80 00 00 00 00 00 1C 2F 00 00 1C 27 00 00 1C 39 

<span class="siteTarget" id="AlienSprA">A</span>lienSprA: 

</pre>
<h2 id="AlienImages" class="siteTarget">Alien Images</h2> 
<p> 
<canvas width="400" height="140" data-gettiledatafunction="SpaceInvaders.get8x16Data" data-address="1C00" data-gridx="16" data-gridy="8" data-command="0,+x,1,+x,2,*,+y,3,+x,4,+x,5">
</canvas>
</p><pre class="codePreStyle">; Alien sprite type A,B, and C at positions 0
;  ........ ........ ........
;  ........ ........ ........
;  *..***.. ........ ........
;  *..****. ...****. ........
;  .*.****. *.***... *..**...
;  .***.**. .*****.* .*.***..
;  ..**.*** ..**.**. *.**.**.
;  .*.***** ..****.. .*.*****
;  .*.***** ..****.. .*.*****
;  ..**.*** ..****.. *.**.**.
;  .***.**. ..**.**. .*.***..
;  .*.****. .*****.* *..**...
;  *..****. *.***... ........
;  *..***.. ...****. ........
;  ........ ........ ........
;  ........ ........ ........
1C00: 00 00 39 79 7A 6E EC FA FA EC 6E 7A 79 39 00 00 
1C10: 00 00 00 78 1D BE 6C 3C 3C 3C 6C BE 1D 78 00 00 
1C20: 00 00 00 00 19 3A 6D FA FA 6D 3A 19 00 00 00 00 

<span class="siteTarget" id="AlienSprB">A</span>lienSprB: 
; Alien sprite type A,B, and C at positions 1
;  ........ ........ ........
;  ........ ........ ........
;  ...***.. ........ ........
;  .*.****. .***.... ........
;  *******. ...**... .*.**...
;  *.**.**. .*****.* *.****..
;  ..**.*** *.**.**. ...*.**.
;  .*.***** *.****.. ..******
;  .*.***** ..****.. ..******
;  ..**.*** *.****.. ...*.**.
;  *.**.**. *.**.**. *.****..
;  *******. .*****.* .*.**...
;  .*.****. ...**... ........
;  ...***.. .***.... ........
;  ........ ........ ........
;  ........ ........ ........
1C30: 00 00 38 7A 7F 6D EC FA FA EC 6D 7F 7A 38 00 00 
1C40: 00 00 00 0E 18 BE 6D 3D 3C 3D 6D BE 18 0E 00 00 
1C50: 00 00 00 00 1A 3D 68 FC FC 68 3D 1A 00 00 00 00 

<span class="siteTarget" id="PlayerSprite">P</span>layerSprite: 
</pre>
<canvas width="400" height="65" data-gettiledatafunction="SpaceInvaders.get8x16Data" data-address="1C60" data-gridx="16" data-gridy="8" data-command="0,+x,1,+x,2">
</canvas>
<p> 
</p><pre class="codePreStyle">; Player sprite
;  ........
;  ........
;  ****....
;  *****...
;  *****...
;  *****...
;  *****...
;  *******.
;  ********
;  *******.
;  *****...
;  *****...
;  *****...
;  *****...
;  ****....
;  ........  
1C60: 00 00 0F 1F 1F 1F 1F 7F FF 7F 1F 1F 1F 1F 0F 00 


;PlrBlowupSprites: ; =
;  ........
;  ..*.....
;  *.......
;  **..*...
;  **......
;  ***.....
;  **..**.*
;  ****....
;  ****.*..
;  **......
;  ****.*..
;  *..*..*.
;  ..*.....
;  **......
;  ........
;  *.......
;
1C70: 00 04 01 13 03 07 B3 0F 2F 03 2F 49 04 03 00 01 
;
;  ......*.
;  ...*....
;  *.*.....
;  **...*.*
;  .*.*....
;  **......
;  **.**.*.
;  ****....
;  ***..*..
;  ***..*..
;  **.*....
;  **.*..*.
;  ......*.
;  ..*....*
;  *...*...
;  ...*..*.
1C80: 40 08 05 A3 0A 03 5B 0F 27 27 0B 4B 40 84 11 48 

<span class="siteTarget" id="PlayerShotSpr">P</span>layerShotSpr: 
</pre>
<canvas width="10" height="65" data-gettiledatafunction="SpaceInvaders.get1x8Data" data-address="1C90" data-gridx="1" data-gridy="8" data-command="0">
</canvas>
<pre class="codePreStyle">1C90: 0F    ; ****....      

<span class="siteTarget" id="ShotExploding">S</span>hotExploding: 
</pre>
<canvas width="65" height="65" data-gettiledatafunction="SpaceInvaders.get8x8Data" data-address="1C91" data-gridx="8" data-gridy="8" data-command="0">
</canvas>
<pre class="codePreStyle">; *..**..*
; ..****..
; .******.
; *.****..
; ..****.*
; .*****..
; ..*****.
; *..**..*           
1C91: 99 3C 7E 3D BC 3E 7C 99     

<span class="siteTarget" id="Message10Pts">M</span>essage10Pts: 
; Ran out of space at 1DFE
1C99: 27 1B 1A 26 0F 0E 08 0D 13 12    ; "=10 POINTS"

<span class="siteTarget" id="MessageAdv">M</span>essageAdv: 
; "*SCORE ADVANCE TABLE*"                                
1CA3: 28 12 02 0E 11 04 26 00                                 
1CAB: 03 15 00 0D 02 04 26 13                                 
1CB3: 00 01 0B 04 28                                    


<span class="siteTarget" id="AReloadScoreTab">A</span>ReloadScoreTab: 
; The tables at 1CB8 and 1AA1 control how fast shots are created. The speed is based
; on the upper byte of the player's score. For a score of less than or equal 0200 then 
; the fire speed is 30. For a score less than or equal 1000 the shot speed is 10. Less 
; than or equal 2000 the speed is 0B. Less than or equal 3000 is 08. And anything 
; above 3000 is 07.
;
; 1AA1: 30 10 0B 08                           
; 1AA5: 07           ; Fastest shot firing speed
;
1CB8: 02 10 20 30                           

<span class="siteTarget" id="MessageTilt">M</span>essageTilt: 
1CBC: 13 08 0B 13   ; "TILT"

<span class="siteTarget" id="AlienExplode">A</span>lienExplode: 
; Alien exploding sprite
</pre>
<canvas width="130" height="65" data-gettiledatafunction="SpaceInvaders.get8x16Data" data-address="1CC0" data-gridx="16" data-gridy="8" data-command="0">
</canvas>
<pre class="codePreStyle">;  ........
;  ...*....
;  *..*..*.
;  .*...*..
;  ..*.*...
;  *......*
;  .*....*.
;  ........
;  .*....*.
;  *......*
;  ..*.*...
;  .*...*..
;  *..*..*.
;  ...*....
;  ........
;  ........
1CC0: 00 08 49 22 14 81 42 00 42 81 14 22 49 08 00 00 

;SquiglyShot: ; =
; Squigly shot picture in 4 animation frames
</pre>
<canvas width="120" height="65" data-gettiledatafunction="SpaceInvaders.get8x3Data" data-address="1CD0" data-gridx="3" data-gridy="8" data-command="0,+x,1,+x,2,+x,3">
</canvas>
<pre class="codePreStyle">1CD0: 44   ; ..*...*.               
1CD1: AA   ; .*.*.*.*                                 
1CD2: 10   ; ....*...

1CD3: 88   ; ...*...*                             
1CD4: 54   ; ..*.*.*.                                 
1CD5: 22   ; .*...*..

1CD6: 10   ; ....*...
1CD7: AA   ; .*.*.*.*                           
1CD8: 44   ; ..*...*.

1CD9: 22   ; .*...*..
1CDA: 54   ; ..*.*.*.
1CDB: 88   ; ...*...*


<span class="siteTarget" id="AShotExplo">A</span>ShotExplo: 
; Alien shot exploding 
</pre>
<canvas width="65" height="65" data-gettiledatafunction="SpaceInvaders.get6x8Data" data-address="1CDC" data-gridx="6" data-gridy="8" data-command="0">
</canvas>
<pre class="codePreStyle">; .*.*..*.                                 
; *.*.*...                                  
; .*****.*                                  
; ******..                                  
; .****.*.                                  
; *.*..*..       
1CDC: 4A 15 BE 3F 5E 25                                

<span class="siteTarget" id="PlungerShot">P</span>lungerShot: 
; Alien shot ... the plunger looking one
</pre>
<canvas width="120" height="65" data-gettiledatafunction="SpaceInvaders.get8x3Data" data-address="1CE2" data-gridx="3" data-gridy="8" data-command="0,+x,1,+x,2,+x,3">
</canvas>
<pre class="codePreStyle">1CE2: 04  ; ..*.....                                  
1CE3: FC  ; ..******
1CE4: 04  ; ..*.....

1CE5: 10  ; ....*...                            
1CE6: FC  ; ..******
1CE7: 10  ; ....*...

1CE8: 20  ; .....*..                            
1CE9: FC  ; ..******
1CEA: 20  ; .....*..

1CEB: 80  ; .......*                            
1CEC: FC  ; ..******
1CED: 80  ; .......*

<span class="siteTarget" id="RollShot">R</span>ollShot: 
; Alien shot ... the rolling one
</pre>
<canvas width="120" height="65" data-gettiledatafunction="SpaceInvaders.get8x3Data" data-address="1CEE" data-gridx="3" data-gridy="8" data-command="0,+x,1,+x,2,+x,3">
</canvas>
<pre class="codePreStyle">1CEE: 00  ; ........                            
1CEF: FE  ; .*******
1CF0: 00  ; ........                               

1CF1: 24  ; ..*..*..                                  
1CF2: FE  ; .*******
1CF3: 12  ; .*..*...                               

1CF4: 00  ; ........                                  
1CF5: FE  ; .*******
1CF6: 00  ; ........                               

1CF7: 48  ; ...*..*.                                  
1CF8: FE  ; .*******
1CF9: 90  ; ....*..*       

<span class="siteTarget" id="MessagePlayUY">M</span>essagePlayUY: 
1CFA: 0F 0B 00 29    ; "PLAy" with an upside down 'Y' for splash screen

1CFE: 00 00        

<span class="siteTarget" id="ColFireTable">C</span>olFireTable: 
; This table decides which column a shot will fall from. The column number is read from the
; table (1-11) and the pointer increases for the shot type. For instance, the "squiggly" shot
; will fall from columns in this order: 0B, 01, 06, 03. If you play the game you'll see that
; order.
;
; The "plunger" shot uses index 00-0F (inclusive)
; The "squiggly" shot uses index 06-14 (inclusive)
; The "rolling" shot targets the player
1D00: 01 07 01 01 01 04 0B 01 06 03 01 01 0B 09 02 08                                    
1D10: 02 0B 04 07 0A    
;
; This appears to be part of the column-firing table, but it is never used.
; Perhaps this was originally intended for the "rolling" shot but then the
; "rolling" was change to target the player specifically.
1D15: 05 02 05 04 06 07 08 0A 06 0A 03              

<span class="siteTarget" id="ShieldImage">S</span>hieldImage: 
</pre>
<canvas width="180" height="130" data-gettiledatafunction="SpaceInvaders.get16x22Data" data-address="1D20" data-gridx="22" data-gridy="16" data-command="0">
</canvas>
<pre class="codePreStyle">; Shield image pattern. 2 x 22 = 44 bytes.
;
;************....
;*************...
;**************..
;***************.
;****************
;..**************
;...*************
;....************
;....************
;....************
;....************
;....************
;....************
;....************
;...*************
;..**************
;****************
;****************
;***************.
;**************..
;*************...
;************....
;             
1D20: FF 0F FF 1F FF 3F FF 7F FF FF FC FF F8 FF F0 FF F0 FF F0 FF F0 FF                                    
1D36: F0 FF F0 FF F0 FF F8 FF FC FF FF FF FF FF FF 7F FF 3F FF 1F FF 0F                                    


1D4C: 05 10 15 30  ; Table of possible saucer scores
1D50: 94 97 9A 9D  ; Table of corresponding string prints for each possible score                                  

<span class="siteTarget" id="SaucerScrTab">S</span>aucerScrTab: 
; 208D points here to the score given when the saucer is shot. It advances 
; every time the player-shot is removed. The code wraps after 15, but there
; are 16 values in this table. This is a bug in the code at 044E (thanks to
; Colin Dooley for finding this).
;
; Thus the one and only 300 comes up every 15 shots (after an initial 8).
1D54: 10 05 05 10 15 10 10 05 30 10 10 10 05 15 10 05                                 

<span class="siteTarget" id="SpriteSaucer">S</span>priteSaucer: 
</pre>
<canvas width="410" height="65" data-gettiledatafunction="SpaceInvaders.get8x24Data" data-address="1D64" data-gridx="24" data-gridy="8" data-command="0,+x,1">
</canvas>
<pre class="codePreStyle">; ........
; ........
; ........
; ........
; ..*.....
; ..**....
; .****...
; ***.**..
; .*****..
; ..*****.
; ..*.***.
; .******.
; .******.
; ..*.***.
; ..*****.
; .*****..
; ***.**..
; .****...
; ..**....
; ..*.....      
; ........
; ........
; ........
; ........                         
1D64: 00 00 00 00 04 0C 1E 37 3E 7C 74 7E 7E 74 7C 3E 37 1E 0C 04 00 00 00 00

<span class="siteTarget" id="SpriteSaucerExp">S</span>priteSaucerExp: 
;........
;.*...*..
;........
;*.*..*.*
;......*.
;...*....
;...**..*
;*.****..
;.**.**.*
;..****..
;.**.**..
;*.***...
;....*...
;...*..*.
;.*...**.
;.**.**.*
;*.***...
;...**..*
;...*....
;.*....*.
;....*..*
;...*....
;........
;........
1D7C: 00 22 00 A5 40 08 98 3D B6 3C 36 1D 10 48 62 B6 1D 98 08 42 90 08 00 00  

<span class="siteTarget" id="SaucSoreStr">S</span>aucSoreStr: 
1D94: 26 1F 1A  ; _50                                   
1D97: 1B 1A 1A  ; 100                                  
1D9A: 1B 1F 1A  ; 150                                  
1D9D: 1D 1A 1A  ; 300                                  

<span class="siteTarget" id="AlienScores">A</span>lienScores: 
; Score table for hitting alien type
1DA0: 10 ; Bottom 2 rows                                    
1DA1: 20 ; Middle row                                   
1DA2: 30 ; Highest row

<span class="siteTarget" id="AlienStartTable">A</span>lienStartTable: 
; Starting Y coordinates for aliens at beginning of rounds. The first round is initialized to $78 at 07EA.
; After that this table is used for 2nd, 3rd, 4th, 5th, 6th, 7th, 8th, and 9th. The 10th starts over at
; 1DA3 (60).
1DA3: 60                                    
1DA4: 50                                    
1DA5: 48                                    
1DA6: 48                                    
1DA7: 48                                    
1DA8: 40                                    
1DA9: 40                                    
1DAA: 40   

<span class="siteTarget" id="MessagePlayY">M</span>essagePlayY: 
1DAB: 0F 0B 00 18   ; "PLAY" with normal Y

<span class="siteTarget" id="MessageInvaders">M</span>essageInvaders: 
; "SPACE  INVADERS"
1DAF: 12 0F 00 02 04 26 26 08 0D 15 00 03 04 11 12 

; Tables used to draw "SCORE ADVANCE TABLE" information
1DBE: 0E 2C 68 1D           ; Flying Saucer                         
1DC2: 0C 2C 20 1C           ; Alien C, sprite 0                      
1DC6: 0A 2C 40 1C           ; Alien B, sprite 1                         
1DCA: 08 2C 00 1C           ; Alien A, sprite 0                         
1DCE: FF                    ; End of list         
;
<span class="siteTarget" id="AlienScoreTable">A</span>lienScoreTable: 
1DCF: 0E 2E E0 1D           ; "=? MYSTERY"                          
1DD3: 0C 2E EA 1D           ; "=30 POINTS"                        
1DD7: 0A 2E F4 1D           ; "=20 POINTS"                        
1DDB: 08 2E 99 1C           ; "=10 POINTS"
1DDF: FF                    ; End of list

<span class="siteTarget" id="MessageMyst">M</span>essageMyst: 
1DE0: 27 38 26 0C 18 12 13 04 11 18   ; "=? MYSTERY"

<span class="siteTarget" id="Message30Pts">M</span>essage30Pts: 
1DEA: 27 1D 1A 26 0F 0E 08 0D 13 12   ; "=30 POINTS"                                 

<span class="siteTarget" id="Message20Pts">M</span>essage20Pts: 
1DF4: 27 1C 1A 26 0F 0E 08 0D 13 12   ; "=20 POINTS"

; Ran out of space here. The "=10" message is up at 1C99. That keeps
; the font table firmly at 1E00.

1DFE: 00 00 ; Padding to put font table at 1E00


;=============================================================
<span class="siteTarget" id="Characters">C</span>haracters: 
; 8 byte sprites 
; The screen is turned so rotate these pictures counter-clockwise.
; Some of the font characters at the end were never needed. The ROM overwrites these characters with
; data near the end. For instance, 1F90 would be a character but has the "INSERT COIN" message. The "?"
; character is at 1FC0 and is used in messages as is 1FF8 "-". The "light colored" tiles in the grid below
; show the character slots that have been repurposed.
</pre>
<canvas width="520" height="520" data-gettiledatafunction="SpaceInvaders.get8x8CharData" data-labelcolor="#FFFFFF" data-address="1E00" data-gridx="8" data-gridy="8" data-command=":8x8:0,1,2,3,4,5,6,7,8,9,A,B,C,D,E,F,
10,11,12,13,14,15,16,17,18,19,1A,1B,1C,1D,1E,1F,
20,21,22,23,24,25,26,27,28,29,#UNUSED,2A,2B,2C,2D,2E,2F,
30,31,32,33,34,35,36,37,#CS0,38,#UNUSED,39,3A,3B,3C,3D,3E,#CS0,3F">
</canvas>
<pre class="codePreStyle">1E00: 00 1F 24 44 24 1F 00 00  ; ........ ........ ........ ........ ........ ........ ........ ........ 
1E08: 00 7F 49 49 49 36 00 00  ; *****... *******. .*****.. *******. *******. *******. .*****.. *******. 
1E10: 00 3E 41 41 41 22 00 00  ; ..*..*.. *..*..*. *.....*. *.....*. *..*..*. ...*..*. *.....*. ...*.... 
1E18: 00 7F 41 41 41 3E 00 00  ; ..*...*. *..*..*. *.....*. *.....*. *..*..*. ...*..*. *.....*. ...*.... 
1E20: 00 7F 49 49 49 41 00 00  ; ..*..*.. *..*..*. *.....*. *.....*. *..*..*. ...*..*. *.*...*. ...*.... 
1E28: 00 7F 48 48 48 40 00 00  ; *****... .**.**.. .*...*.. .*****.. *.....*. ......*. ***...*. *******. 
1E30: 00 3E 41 41 45 47 00 00  ; ........ ........ ........ ........ ........ ........ ........ ........ 
1E38: 00 7F 08 08 08 7F 00 00  ; ........ ........ ........ ........ ........ ........ ........ ........ 

1E40: 00 00 41 7F 41 00 00 00  ; ........ ........ ........ ........ ........ ........ ........ ........ 
1E48: 00 02 01 01 01 7E 00 00  ; ........ .*...... *******. *******. *******. *******. .*****.. *******. 
1E50: 00 7F 08 14 22 41 00 00  ; *.....*. *....... ...*.... *....... .....*.. ....*... *.....*. ...*..*. 
1E58: 00 7F 01 01 01 01 00 00  ; *******. *....... ..*.*... *....... ...**... ...*.... *.....*. ...*..*. 
1E60: 00 7F 20 18 20 7F 00 00  ; *.....*. *....... .*...*.. *....... .....*.. ..*..... *.....*. ...*..*. 
1E68: 00 7F 10 08 04 7F 00 00  ; ........ .******. *.....*. *....... *******. *******. .*****.. ....**.. 
1E70: 00 3E 41 41 41 3E 00 00  ; ........ ........ ........ ........ ........ ........ ........ ........ 
1E78: 00 7F 48 48 48 30 00 00  ; ........ ........ ........ ........ ........ ........ ........ ........ 

1E80: 00 3E 41 45 42 3D 00 00  ; ........ ........ ........ ........ ........ ........ ........ ........ 
1E88: 00 7F 48 4C 4A 31 00 00  ; .*****.. *******. .*..**.. ......*. .******. ..*****. *******. **...**. 
1E90: 00 32 49 49 49 26 00 00  ; *.....*. ...*..*. *..*..*. ......*. *....... .*...... .*...... ..*.*... 
1E98: 00 40 40 7F 40 40 00 00  ; *.*...*. ..**..*. *..*..*. *******. *....... *....... ..**.... ...*.... 
1EA0: 00 7E 01 01 01 7E 00 00  ; .*....*. .*.*..*. *..*..*. ......*. *....... .*...... .*...... ..*.*... 
1EA8: 00 7C 02 01 02 7C 00 00  ; *.****.. *...**.. .**..*.. ......*. .******. ..*****. *******. **...**. 
1EB0: 00 7F 02 0C 02 7F 00 00  ; ........ ........ ........ ........ ........ ........ ........ ........ 
1EB8: 00 63 14 08 14 63 00 00  ; ........ ........ ........ ........ ........ ........ ........ ........ 

1EC0: 00 60 10 0F 10 60 00 00  ; ........ ........ ........ ........ ........ ........ ........ ........ 
1EC8: 00 43 45 49 51 61 00 00  ; .....**. **....*. .*****.. ........ **...*.. .*....*. ..**.... .*..***. 
1ED0: 00 3E 45 49 51 3E 00 00  ; ....*... *.*...*. *.*...*. *....*.. *.*...*. *.....*. ..*.*... *...*.*. 
1ED8: 00 00 21 7F 01 00 00 00  ; ****.... *..*..*. *..*..*. *******. *..*..*. *..*..*. ..*..*.. *...*.*. 
1EE0: 00 23 45 49 49 31 00 00  ; ....*... *...*.*. *...*.*. *....... *..*..*. *..**.*. *******. *...*.*. 
1EE8: 00 42 41 49 59 66 00 00  ; .....**. *....**. .*****.. ........ *...**.. .**..**. ..*..... .***..*. 
1EF0: 00 0C 14 24 7F 04 00 00  ; ........ ........ ........ ........ ........ ........ ........ ........ 
1EF8: 00 72 51 51 51 4E 00 00  ; ........ ........ ........ ........ ........ ........ ........ ........ 

1F00: 00 1E 29 49 49 46 00 00  ; ........ ........ ........ ........ ........ ........ ........ ........ 
1F08: 00 40 47 48 50 60 00 00  ; .****... ......*. .**.**.. *...**.. ...*.... ........ ........ ..*.*... 
1F10: 00 36 49 49 49 36 00 00  ; *..*.*.. ***...*. *..*..*. *..*..*. ..*.*... *.....*. ........ ..*.*... 
1F18: 00 31 49 49 4A 3C 00 00  ; *..*..*. ...*..*. *..*..*. *..*..*. .*...*.. .*...*.. ........ ..*.*... 
1F20: 00 08 14 22 41 00 00 00  ; *..*..*. ....*.*. *..*..*. .*.*..*. *.....*. ..*.*... ........ ..*.*... 
1F28: 00 00 41 22 14 08 00 00  ; .**...*. .....**. .**.**.. ..****.. ........ ...*.... ........ ..*.*... 
1F30: 00 00 00 00 00 00 00 00  ; ........ ........ ........ ........ ........ ........ ........ ........ 
1F38: 00 14 14 14 14 14 00 00  ; ........ ........ ........ ........ ........ ........ ........ ........ 

1F40: 00 22 14 7F 14 22 00 00  ; ........ ........   
1F48: 00 03 04 78 04 03 00 00  ; .*...*.. **......   
                               ; ..*.*... ..*.....   
                               ; *******. ...****.   
                               ; ..*.*... ..*.....   
                               ; .*...*.. **......   
                               ; ........ ........   
                               ; ........ ........   

<span class="siteTarget" id="MessageP1or2">M</span>essageP1or2: 
1F50: 24 1B 26 0E 11 26 1C 26  ; "&lt;1 OR 2 PLAYERS&gt;  "             
1F58: 0F 0B 00 18 04 11 12 25               
1F60: 26 26 

<span class="siteTarget" id="Message1Coin">M</span>essage1Coin: 
1F62: 28 1B 26 0F 0B 00 18 04  ; "*1 PLAYER  1 COIN "
1F6A: 11 26 26 1B 26 02 0E 08 
1F72: 0D 26                           

<span class="siteTarget" id="DemoCommands">D</span>emoCommands: 
; (1=Right, 2=Left)
1F74: 01 01 00 00 01 00 02 01 00 02 01 00

<span class="siteTarget" id="AlienSprCA">A</span>lienSprCA: 
; Small alien pushing Y back onto screen
</pre>
<canvas width="140" height="65" data-gettiledatafunction="SpaceInvaders.get8x16Data" data-labelcolor="" data-address="1F80" data-gridx="16" data-gridy="8" data-command="0">
</canvas>
<canvas width="140" height="65" data-gettiledatafunction="SpaceInvaders.get8x16Data" data-address="1FB0" data-gridx="16" data-gridy="8" data-command="0">
</canvas>
<pre class="codePreStyle">; .....**.
; ....*...
; ****....
; ....*...
; .....**.
; ....**..
; ...**...
; .*.**...
; *.****..
; ...*.**.
; ..******
; ..******
; ...*.**.
; *.****..
; .*.**...
; ........         

1F80: 60 10 0F 10 60 30 18 1A 3D 68 FC FC 68 3D 1A 00               

<span class="siteTarget" id="MessageCoin">M</span>essageCoin: 
1F90: 08 0D 12 04 11 13 26 26 02 0E 08 0D   ; "INSERT  COIN"         

<span class="siteTarget" id="CreditTable">C</span>reditTable: 
1F9C: 0D 2A 50 1F                 ; "&lt;1 OR 2 PLAYERS&gt;  " to screen at 2A0D 
1FA0: 0A 2A 62 1F                 ; "*1 PLAYER  1 COIN " to screen at 2A0A
1FA4: 07 2A E1 1F                 ; "*2 PLAYERS 2 COINS" to screen at 2A07
1FA8: FF                          ; Terminates "table print"         

<span class="siteTarget" id="MessageCredit">M</span>essageCredit: 
1FA9: 02 11 04 03 08 13 26       ; "CREDIT " (with space on the end)           

<span class="siteTarget" id="AlienSprCB">A</span>lienSprCB: 
; ........
; .....**.
; ....*...
; ****....
; ....*...
; .....**.
; ...***..
; *..**...
; .*.***..
; *.**.**.
; .*.*****
; .*.*****
; *.**.**.
; .*.***..
; *..**...
; ........
1FB0: 00 60 10 0F 10 60 38 19 3A 6D FA FA 6D 3A 19 00               

1FC0: 00 20 40 4D 50 20 00 00               ; "?"

1FC8: 00 

; Splash screen animation structure 3
; 00   Image form (increments each draw)
; 00   Delta X
; FF   Delta Y is -1
; B8   X coordinate
; FF   Y starting coordiante
; 1F80 Base image (small alien with Y)
; 10   Size of image (16 bytes)
; 97   Target Y coordiante
; 00   Reached Y flag
; 1F80 Base iamge (small alien with Y)
;
1FC9: 00 00 FF B8 FF 80 1F 10 97 00 80 1F 

; Splash screen animation structure 4
; 00   Image form (increments each draw)
; 00   Delta X
; 01   Delta Y is 1
; D0   X coordinate
; 22   Y starting coordiante
; 1C20 Base image (small alien)
; 10   Size of image (16 bytes)
; 94   Target Y coordiante
; 00   Reached Y flag
; 1C20 Base iamge (small alien)
;
1FD5: 00 00 01 D0 22 20 1C 10 94 00 20 1C 

<span class="siteTarget" id="Message2Coins">M</span>essage2Coins: 
1FE1: 28 1C 26 0F 0B 00 18 04    ; "*2 PLAYERS 2 COINS"
1FE9: 11 12 26 1C 26 02 0E 08 
1FF1: 0D 12                              

<span class="siteTarget" id="MessagePush">M</span>essagePush: 
1FF3: 0F 14 12 07 26             ; "PUSH " (with space on the end)                                 

1FF8: 00 08 08 08 08 08 00 00               ; 3F:"-"

          
			    </pre></div>
			
			</div> <!-- End of row -->
			
		</div> 

	


</body></html>